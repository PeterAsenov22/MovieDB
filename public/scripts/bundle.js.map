{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/alt/lib/actions/index.js","node_modules/alt/lib/functions.js","node_modules/alt/lib/index.js","node_modules/alt/lib/store/AltStore.js","node_modules/alt/lib/store/StoreMixin.js","node_modules/alt/lib/store/index.js","node_modules/alt/lib/utils/AltUtils.js","node_modules/alt/lib/utils/StateFunctions.js","node_modules/deep-equal/index.js","node_modules/deep-equal/lib/is_arguments.js","node_modules/deep-equal/lib/keys.js","node_modules/flux/index.js","node_modules/flux/lib/Dispatcher.js","node_modules/flux/node_modules/fbjs/lib/invariant.js","node_modules/history/lib/Actions.js","node_modules/history/lib/AsyncUtils.js","node_modules/history/lib/DOMStateStorage.js","node_modules/history/lib/DOMUtils.js","node_modules/history/lib/ExecutionEnvironment.js","node_modules/history/lib/createBrowserHistory.js","node_modules/history/lib/createDOMHistory.js","node_modules/history/lib/createHistory.js","node_modules/history/lib/createLocation.js","node_modules/history/lib/deprecate.js","node_modules/history/lib/extractPath.js","node_modules/history/lib/parsePath.js","node_modules/history/lib/runTransitionHook.js","node_modules/invariant/browser.js","node_modules/is-promise/index.js","node_modules/process/browser.js","node_modules/transmitter/dist/transmitter.js","node_modules/warning/browser.js","source/client/actions/FormActions.js","source/client/actions/MovieActions.js","source/client/actions/MovieAddActions.js","source/client/actions/NavbarActions.js","source/client/actions/UserActions.js","source/client/alt.js","source/client/components/App.js","source/client/components/Footer.js","source/client/components/Home.js","source/client/components/MovieAdd.js","source/client/components/Navbar.js","source/client/components/UserLogin.js","source/client/components/UserProfile.js","source/client/components/UserRegister.js","source/client/components/form/Form.js","source/client/components/form/RadioElement.js","source/client/components/form/RadioGroup.js","source/client/components/form/Submit.js","source/client/components/form/TextGroup.js","source/client/components/sub-components/MovieCard.js","source/client/components/sub-components/MovieCardInfo.js","source/client/components/sub-components/MovieCardPoster.js","source/client/components/sub-components/MovieCommentsPanel.js","source/client/components/sub-components/MoviePanelToggles.js","source/client/components/sub-components/MovieVotePanel.js","source/client/components/sub-components/NavbarUserMenu.js","source/client/components/sub-components/UserInfo.js","source/client/components/sub-components/UserRatedMovies.js","source/client/components/sub-components/UserRatedMoviesPanel.js","source/client/components/sub-components/UserReviews.js","source/client/components/sub-components/UserReviewsPanel.js","source/client/main.js","source/client/routes.js","source/client/stores/FormStore.js","source/client/stores/MovieAddStore.js","source/client/stores/MovieStore.js","source/client/stores/NavbarStore.js","source/client/stores/UserStore.js","source/client/utilities/Authorize.js","source/client/utilities/Helpers.js","source/client/utilities/RequesterTMDB.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = makeAction;\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _AltUtils = require('../utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _isPromise = require('is-promise');\n\nvar _isPromise2 = _interopRequireDefault(_isPromise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction makeAction(alt, namespace, name, implementation, obj) {\n  var id = utils.uid(alt._actionsRegistry, String(namespace) + '.' + String(name));\n  alt._actionsRegistry[id] = 1;\n\n  var data = { id: id, namespace: namespace, name: name };\n\n  var dispatch = function dispatch(payload) {\n    return alt.dispatch(id, payload, data);\n  };\n\n  // the action itself\n  var action = function action() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var invocationResult = implementation.apply(obj, args);\n    var actionResult = invocationResult;\n\n    // async functions that return promises should not be dispatched\n    if (invocationResult !== undefined && !(0, _isPromise2['default'])(invocationResult)) {\n      if (fn.isFunction(invocationResult)) {\n        // inner function result should be returned as an action result\n        actionResult = invocationResult(dispatch, alt);\n      } else {\n        dispatch(invocationResult);\n      }\n    }\n\n    if (invocationResult === undefined) {\n      utils.warn('An action was called but nothing was dispatched');\n    }\n\n    return actionResult;\n  };\n  action.defer = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return setTimeout(function () {\n      return action.apply(null, args);\n    });\n  };\n  action.id = id;\n  action.data = data;\n\n  // ensure each reference is unique in the namespace\n  var container = alt.actions[namespace];\n  var namespaceId = utils.uid(container, name);\n  container[namespaceId] = action;\n\n  // generate a constant\n  var constant = utils.formatAsConstant(namespaceId);\n  container[constant] = id;\n\n  return action;\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMutableObject = isMutableObject;\nexports.eachObject = eachObject;\nexports.assign = assign;\nvar isFunction = exports.isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nfunction isMutableObject(target) {\n  var Ctor = target.constructor;\n\n  return !!target && Object.prototype.toString.call(target) === '[object Object]' && isFunction(Ctor) && !Object.isFrozen(target) && (Ctor instanceof Ctor || target.type === 'AltStore');\n}\n\nfunction eachObject(f, o) {\n  o.forEach(function (from) {\n    Object.keys(Object(from)).forEach(function (key) {\n      f(key, from[key]);\n    });\n  });\n}\n\nfunction assign(target) {\n  for (var _len = arguments.length, source = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    source[_key - 1] = arguments[_key];\n  }\n\n  eachObject(function (key, value) {\n    return target[key] = value;\n  }, source);\n  return target;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _flux = require('flux');\n\nvar _StateFunctions = require('./utils/StateFunctions');\n\nvar StateFunctions = _interopRequireWildcard(_StateFunctions);\n\nvar _functions = require('./functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _store = require('./store');\n\nvar store = _interopRequireWildcard(_store);\n\nvar _AltUtils = require('./utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _actions = require('./actions');\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /* global window */\n\n\nvar Alt = function () {\n  function Alt() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Alt);\n\n    this.config = config;\n    this.serialize = config.serialize || JSON.stringify;\n    this.deserialize = config.deserialize || JSON.parse;\n    this.dispatcher = config.dispatcher || new _flux.Dispatcher();\n    this.batchingFunction = config.batchingFunction || function (callback) {\n      return callback();\n    };\n    this.actions = { global: {} };\n    this.stores = {};\n    this.storeTransforms = config.storeTransforms || [];\n    this.trapAsync = false;\n    this._actionsRegistry = {};\n    this._initSnapshot = {};\n    this._lastSnapshot = {};\n  }\n\n  Alt.prototype.dispatch = function () {\n    function dispatch(action, data, details) {\n      var _this = this;\n\n      this.batchingFunction(function () {\n        var id = Math.random().toString(18).substr(2, 16);\n\n        // support straight dispatching of FSA-style actions\n        if (action.hasOwnProperty('type') && action.hasOwnProperty('payload')) {\n          var fsaDetails = {\n            id: action.type,\n            namespace: action.type,\n            name: action.type\n          };\n          return _this.dispatcher.dispatch(utils.fsa(id, action.type, action.payload, fsaDetails));\n        }\n\n        if (action.id && action.dispatch) {\n          return utils.dispatch(id, action, data, _this);\n        }\n\n        return _this.dispatcher.dispatch(utils.fsa(id, action, data, details));\n      });\n    }\n\n    return dispatch;\n  }();\n\n  Alt.prototype.createUnsavedStore = function () {\n    function createUnsavedStore(StoreModel) {\n      var key = StoreModel.displayName || '';\n      store.createStoreConfig(this.config, StoreModel);\n      var Store = store.transformStore(this.storeTransforms, StoreModel);\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return fn.isFunction(Store) ? store.createStoreFromClass.apply(store, [this, Store, key].concat(args)) : store.createStoreFromObject(this, Store, key);\n    }\n\n    return createUnsavedStore;\n  }();\n\n  Alt.prototype.createStore = function () {\n    function createStore(StoreModel, iden) {\n      var key = iden || StoreModel.displayName || StoreModel.name || '';\n      store.createStoreConfig(this.config, StoreModel);\n      var Store = store.transformStore(this.storeTransforms, StoreModel);\n\n      /* istanbul ignore next */\n      if (module.hot) delete this.stores[key];\n\n      if (this.stores[key] || !key) {\n        if (this.stores[key]) {\n          utils.warn('A store named ' + String(key) + ' already exists, double check your store ' + 'names or pass in your own custom identifier for each store');\n        } else {\n          utils.warn('Store name was not specified');\n        }\n\n        key = utils.uid(this.stores, key);\n      }\n\n      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      var storeInstance = fn.isFunction(Store) ? store.createStoreFromClass.apply(store, [this, Store, key].concat(args)) : store.createStoreFromObject(this, Store, key);\n\n      this.stores[key] = storeInstance;\n      StateFunctions.saveInitialSnapshot(this, key);\n\n      return storeInstance;\n    }\n\n    return createStore;\n  }();\n\n  Alt.prototype.generateActions = function () {\n    function generateActions() {\n      var actions = { name: 'global' };\n\n      for (var _len3 = arguments.length, actionNames = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        actionNames[_key3] = arguments[_key3];\n      }\n\n      return this.createActions(actionNames.reduce(function (obj, action) {\n        obj[action] = utils.dispatchIdentity;\n        return obj;\n      }, actions));\n    }\n\n    return generateActions;\n  }();\n\n  Alt.prototype.createAction = function () {\n    function createAction(name, implementation, obj) {\n      return (0, _actions2['default'])(this, 'global', name, implementation, obj);\n    }\n\n    return createAction;\n  }();\n\n  Alt.prototype.createActions = function () {\n    function createActions(ActionsClass) {\n      var _this3 = this;\n\n      var exportObj = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var actions = {};\n      var key = utils.uid(this._actionsRegistry, ActionsClass.displayName || ActionsClass.name || 'Unknown');\n\n      if (fn.isFunction(ActionsClass)) {\n        fn.assign(actions, utils.getPrototypeChain(ActionsClass));\n\n        var ActionsGenerator = function (_ActionsClass) {\n          _inherits(ActionsGenerator, _ActionsClass);\n\n          function ActionsGenerator() {\n            _classCallCheck(this, ActionsGenerator);\n\n            for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n              args[_key5] = arguments[_key5];\n            }\n\n            return _possibleConstructorReturn(this, _ActionsClass.call.apply(_ActionsClass, [this].concat(args)));\n          }\n\n          ActionsGenerator.prototype.generateActions = function () {\n            function generateActions() {\n              for (var _len6 = arguments.length, actionNames = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n                actionNames[_key6] = arguments[_key6];\n              }\n\n              actionNames.forEach(function (actionName) {\n                actions[actionName] = utils.dispatchIdentity;\n              });\n            }\n\n            return generateActions;\n          }();\n\n          return ActionsGenerator;\n        }(ActionsClass);\n\n        for (var _len4 = arguments.length, argsForConstructor = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n          argsForConstructor[_key4 - 2] = arguments[_key4];\n        }\n\n        fn.assign(actions, new (Function.prototype.bind.apply(ActionsGenerator, [null].concat(argsForConstructor)))());\n      } else {\n        fn.assign(actions, ActionsClass);\n      }\n\n      this.actions[key] = this.actions[key] || {};\n\n      fn.eachObject(function (actionName, action) {\n        if (!fn.isFunction(action)) {\n          exportObj[actionName] = action;\n          return;\n        }\n\n        // create the action\n        exportObj[actionName] = (0, _actions2['default'])(_this3, key, actionName, action, exportObj);\n\n        // generate a constant\n        var constant = utils.formatAsConstant(actionName);\n        exportObj[constant] = exportObj[actionName].id;\n      }, [actions]);\n\n      return exportObj;\n    }\n\n    return createActions;\n  }();\n\n  Alt.prototype.takeSnapshot = function () {\n    function takeSnapshot() {\n      for (var _len7 = arguments.length, storeNames = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        storeNames[_key7] = arguments[_key7];\n      }\n\n      var state = StateFunctions.snapshot(this, storeNames);\n      fn.assign(this._lastSnapshot, state);\n      return this.serialize(state);\n    }\n\n    return takeSnapshot;\n  }();\n\n  Alt.prototype.rollback = function () {\n    function rollback() {\n      StateFunctions.setAppState(this, this.serialize(this._lastSnapshot), function (storeInst) {\n        storeInst.lifecycle('rollback');\n        storeInst.emitChange();\n      });\n    }\n\n    return rollback;\n  }();\n\n  Alt.prototype.recycle = function () {\n    function recycle() {\n      for (var _len8 = arguments.length, storeNames = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        storeNames[_key8] = arguments[_key8];\n      }\n\n      var initialSnapshot = storeNames.length ? StateFunctions.filterSnapshots(this, this._initSnapshot, storeNames) : this._initSnapshot;\n\n      StateFunctions.setAppState(this, this.serialize(initialSnapshot), function (storeInst) {\n        storeInst.lifecycle('init');\n        storeInst.emitChange();\n      });\n    }\n\n    return recycle;\n  }();\n\n  Alt.prototype.flush = function () {\n    function flush() {\n      var state = this.serialize(StateFunctions.snapshot(this));\n      this.recycle();\n      return state;\n    }\n\n    return flush;\n  }();\n\n  Alt.prototype.bootstrap = function () {\n    function bootstrap(data) {\n      StateFunctions.setAppState(this, data, function (storeInst, state) {\n        storeInst.lifecycle('bootstrap', state);\n        storeInst.emitChange();\n      });\n    }\n\n    return bootstrap;\n  }();\n\n  Alt.prototype.prepare = function () {\n    function prepare(storeInst, payload) {\n      var data = {};\n      if (!storeInst.displayName) {\n        throw new ReferenceError('Store provided does not have a name');\n      }\n      data[storeInst.displayName] = payload;\n      return this.serialize(data);\n    }\n\n    return prepare;\n  }();\n\n  // Instance type methods for injecting alt into your application as context\n\n  Alt.prototype.addActions = function () {\n    function addActions(name, ActionsClass) {\n      for (var _len9 = arguments.length, args = Array(_len9 > 2 ? _len9 - 2 : 0), _key9 = 2; _key9 < _len9; _key9++) {\n        args[_key9 - 2] = arguments[_key9];\n      }\n\n      this.actions[name] = Array.isArray(ActionsClass) ? this.generateActions.apply(this, ActionsClass) : this.createActions.apply(this, [ActionsClass].concat(args));\n    }\n\n    return addActions;\n  }();\n\n  Alt.prototype.addStore = function () {\n    function addStore(name, StoreModel) {\n      for (var _len10 = arguments.length, args = Array(_len10 > 2 ? _len10 - 2 : 0), _key10 = 2; _key10 < _len10; _key10++) {\n        args[_key10 - 2] = arguments[_key10];\n      }\n\n      this.createStore.apply(this, [StoreModel, name].concat(args));\n    }\n\n    return addStore;\n  }();\n\n  Alt.prototype.getActions = function () {\n    function getActions(name) {\n      return this.actions[name];\n    }\n\n    return getActions;\n  }();\n\n  Alt.prototype.getStore = function () {\n    function getStore(name) {\n      return this.stores[name];\n    }\n\n    return getStore;\n  }();\n\n  Alt.debug = function () {\n    function debug(name, alt, win) {\n      var key = 'alt.js.org';\n      var context = win;\n      if (!context && typeof window !== 'undefined') {\n        context = window;\n      }\n      if (typeof context !== 'undefined') {\n        context[key] = context[key] || [];\n        context[key].push({ name: name, alt: alt });\n      }\n      return alt;\n    }\n\n    return debug;\n  }();\n\n  return Alt;\n}();\n\nexports['default'] = Alt;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _transmitter = require('transmitter');\n\nvar _transmitter2 = _interopRequireDefault(_transmitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AltStore = function () {\n  function AltStore(alt, model, state, StoreModel) {\n    var _this = this;\n\n    _classCallCheck(this, AltStore);\n\n    var lifecycleEvents = model.lifecycleEvents;\n    this.transmitter = (0, _transmitter2['default'])();\n    this.lifecycle = function (event, x) {\n      if (lifecycleEvents[event]) lifecycleEvents[event].publish(x);\n    };\n    this.state = state;\n\n    this.alt = alt;\n    this.preventDefault = false;\n    this.displayName = model.displayName;\n    this.boundListeners = model.boundListeners;\n    this.StoreModel = StoreModel;\n    this.reduce = model.reduce || function (x) {\n      return x;\n    };\n    this.subscriptions = [];\n\n    var output = model.output || function (x) {\n      return x;\n    };\n\n    this.emitChange = function () {\n      return _this.transmitter.publish(output(_this.state));\n    };\n\n    var handleDispatch = function handleDispatch(f, payload) {\n      try {\n        return f();\n      } catch (e) {\n        if (model.handlesOwnErrors) {\n          _this.lifecycle('error', {\n            error: e,\n            payload: payload,\n            state: _this.state\n          });\n          return false;\n        }\n\n        throw e;\n      }\n    };\n\n    fn.assign(this, model.publicMethods);\n\n    // Register dispatcher\n    this.dispatchToken = alt.dispatcher.register(function (payload) {\n      _this.preventDefault = false;\n\n      _this.lifecycle('beforeEach', {\n        payload: payload,\n        state: _this.state\n      });\n\n      var actionHandlers = model.actionListeners[payload.action];\n\n      if (actionHandlers || model.otherwise) {\n        var result = void 0;\n\n        if (actionHandlers) {\n          result = handleDispatch(function () {\n            return actionHandlers.filter(Boolean).every(function (handler) {\n              return handler.call(model, payload.data, payload.action) !== false;\n            });\n          }, payload);\n        } else {\n          result = handleDispatch(function () {\n            return model.otherwise(payload.data, payload.action);\n          }, payload);\n        }\n\n        if (result !== false && !_this.preventDefault) _this.emitChange();\n      }\n\n      if (model.reduce) {\n        handleDispatch(function () {\n          var value = model.reduce(_this.state, payload);\n          if (value !== undefined) _this.state = value;\n        }, payload);\n        if (!_this.preventDefault) _this.emitChange();\n      }\n\n      _this.lifecycle('afterEach', {\n        payload: payload,\n        state: _this.state\n      });\n    });\n\n    this.lifecycle('init');\n  }\n\n  AltStore.prototype.listen = function () {\n    function listen(cb) {\n      var _this2 = this;\n\n      if (!fn.isFunction(cb)) throw new TypeError('listen expects a function');\n\n      var _transmitter$subscrib = this.transmitter.subscribe(cb);\n\n      var dispose = _transmitter$subscrib.dispose;\n\n      this.subscriptions.push({ cb: cb, dispose: dispose });\n      return function () {\n        _this2.lifecycle('unlisten');\n        dispose();\n      };\n    }\n\n    return listen;\n  }();\n\n  AltStore.prototype.unlisten = function () {\n    function unlisten(cb) {\n      this.lifecycle('unlisten');\n      this.subscriptions.filter(function (subscription) {\n        return subscription.cb === cb;\n      }).forEach(function (subscription) {\n        return subscription.dispose();\n      });\n    }\n\n    return unlisten;\n  }();\n\n  AltStore.prototype.getState = function () {\n    function getState() {\n      return this.StoreModel.config.getState.call(this, this.state);\n    }\n\n    return getState;\n  }();\n\n  return AltStore;\n}();\n\nexports['default'] = AltStore;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _transmitter = require('transmitter');\n\nvar _transmitter2 = _interopRequireDefault(_transmitter);\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar StoreMixin = {\n  waitFor: function () {\n    function waitFor() {\n      for (var _len = arguments.length, sources = Array(_len), _key = 0; _key < _len; _key++) {\n        sources[_key] = arguments[_key];\n      }\n\n      if (!sources.length) {\n        throw new ReferenceError('Dispatch tokens not provided');\n      }\n\n      var sourcesArray = sources;\n      if (sources.length === 1) {\n        sourcesArray = Array.isArray(sources[0]) ? sources[0] : sources;\n      }\n\n      var tokens = sourcesArray.map(function (source) {\n        return source.dispatchToken || source;\n      });\n\n      this.dispatcher.waitFor(tokens);\n    }\n\n    return waitFor;\n  }(),\n  exportAsync: function () {\n    function exportAsync(asyncMethods) {\n      this.registerAsync(asyncMethods);\n    }\n\n    return exportAsync;\n  }(),\n  registerAsync: function () {\n    function registerAsync(asyncDef) {\n      var _this = this;\n\n      var loadCounter = 0;\n\n      var asyncMethods = fn.isFunction(asyncDef) ? asyncDef(this.alt) : asyncDef;\n\n      var toExport = Object.keys(asyncMethods).reduce(function (publicMethods, methodName) {\n        var desc = asyncMethods[methodName];\n        var spec = fn.isFunction(desc) ? desc(_this) : desc;\n\n        var validHandlers = ['success', 'error', 'loading'];\n        validHandlers.forEach(function (handler) {\n          if (spec[handler] && !spec[handler].id) {\n            throw new Error(String(handler) + ' handler must be an action function');\n          }\n        });\n\n        publicMethods[methodName] = function () {\n          for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          var state = _this.getInstance().getState();\n          var value = spec.local && spec.local.apply(spec, [state].concat(args));\n          var shouldFetch = spec.shouldFetch ? spec.shouldFetch.apply(spec, [state].concat(args))\n          /*eslint-disable*/\n          : value == null;\n          /*eslint-enable*/\n          var intercept = spec.interceptResponse || function (x) {\n            return x;\n          };\n\n          var makeActionHandler = function () {\n            function makeActionHandler(action, isError) {\n              return function (x) {\n                var fire = function () {\n                  function fire() {\n                    loadCounter -= 1;\n                    action(intercept(x, action, args));\n                    if (isError) throw x;\n                    return x;\n                  }\n\n                  return fire;\n                }();\n                return _this.alt.trapAsync ? function () {\n                  return fire();\n                } : fire();\n              };\n            }\n\n            return makeActionHandler;\n          }();\n\n          // if we don't have it in cache then fetch it\n          if (shouldFetch) {\n            loadCounter += 1;\n            /* istanbul ignore else */\n            if (spec.loading) spec.loading(intercept(null, spec.loading, args));\n            return spec.remote.apply(spec, [state].concat(args)).then(makeActionHandler(spec.success), makeActionHandler(spec.error, 1));\n          }\n\n          // otherwise emit the change now\n          _this.emitChange();\n          return value;\n        };\n\n        return publicMethods;\n      }, {});\n\n      this.exportPublicMethods(toExport);\n      this.exportPublicMethods({\n        isLoading: function () {\n          function isLoading() {\n            return loadCounter > 0;\n          }\n\n          return isLoading;\n        }()\n      });\n    }\n\n    return registerAsync;\n  }(),\n  exportPublicMethods: function () {\n    function exportPublicMethods(methods) {\n      var _this2 = this;\n\n      fn.eachObject(function (methodName, value) {\n        if (!fn.isFunction(value)) {\n          throw new TypeError('exportPublicMethods expects a function');\n        }\n\n        _this2.publicMethods[methodName] = value;\n      }, [methods]);\n    }\n\n    return exportPublicMethods;\n  }(),\n  emitChange: function () {\n    function emitChange() {\n      this.getInstance().emitChange();\n    }\n\n    return emitChange;\n  }(),\n  on: function () {\n    function on(lifecycleEvent, handler) {\n      if (lifecycleEvent === 'error') this.handlesOwnErrors = true;\n      var bus = this.lifecycleEvents[lifecycleEvent] || (0, _transmitter2['default'])();\n      this.lifecycleEvents[lifecycleEvent] = bus;\n      return bus.subscribe(handler.bind(this));\n    }\n\n    return on;\n  }(),\n  bindAction: function () {\n    function bindAction(symbol, handler) {\n      if (!symbol) {\n        throw new ReferenceError('Invalid action reference passed in');\n      }\n      if (!fn.isFunction(handler)) {\n        throw new TypeError('bindAction expects a function');\n      }\n\n      // You can pass in the constant or the function itself\n      var key = symbol.id ? symbol.id : symbol;\n      this.actionListeners[key] = this.actionListeners[key] || [];\n      this.actionListeners[key].push(handler.bind(this));\n      this.boundListeners.push(key);\n    }\n\n    return bindAction;\n  }(),\n  bindActions: function () {\n    function bindActions(actions) {\n      var _this3 = this;\n\n      fn.eachObject(function (action, symbol) {\n        var matchFirstCharacter = /./;\n        var assumedEventHandler = action.replace(matchFirstCharacter, function (x) {\n          return 'on' + String(x[0].toUpperCase());\n        });\n\n        if (_this3[action] && _this3[assumedEventHandler]) {\n          // If you have both action and onAction\n          throw new ReferenceError('You have multiple action handlers bound to an action: ' + (String(action) + ' and ' + String(assumedEventHandler)));\n        }\n\n        var handler = _this3[action] || _this3[assumedEventHandler];\n        if (handler) {\n          _this3.bindAction(symbol, handler);\n        }\n      }, [actions]);\n    }\n\n    return bindActions;\n  }(),\n  bindListeners: function () {\n    function bindListeners(obj) {\n      var _this4 = this;\n\n      fn.eachObject(function (methodName, symbol) {\n        var listener = _this4[methodName];\n\n        if (!listener) {\n          throw new ReferenceError(String(methodName) + ' defined but does not exist in ' + String(_this4.displayName));\n        }\n\n        if (Array.isArray(symbol)) {\n          symbol.forEach(function (action) {\n            _this4.bindAction(action, listener);\n          });\n        } else {\n          _this4.bindAction(symbol, listener);\n        }\n      }, [obj]);\n    }\n\n    return bindListeners;\n  }()\n};\n\nexports['default'] = StoreMixin;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createStoreConfig = createStoreConfig;\nexports.transformStore = transformStore;\nexports.createStoreFromObject = createStoreFromObject;\nexports.createStoreFromClass = createStoreFromClass;\n\nvar _AltUtils = require('../utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _AltStore = require('./AltStore');\n\nvar _AltStore2 = _interopRequireDefault(_AltStore);\n\nvar _StoreMixin = require('./StoreMixin');\n\nvar _StoreMixin2 = _interopRequireDefault(_StoreMixin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction doSetState(store, storeInstance, state) {\n  if (!state) {\n    return;\n  }\n\n  var config = storeInstance.StoreModel.config;\n\n\n  var nextState = fn.isFunction(state) ? state(storeInstance.state) : state;\n\n  storeInstance.state = config.setState.call(store, storeInstance.state, nextState);\n\n  if (!store.alt.dispatcher.isDispatching()) {\n    store.emitChange();\n  }\n}\n\nfunction createPrototype(proto, alt, key, extras) {\n  return fn.assign(proto, _StoreMixin2['default'], {\n    displayName: key,\n    alt: alt,\n    dispatcher: alt.dispatcher,\n    preventDefault: function () {\n      function preventDefault() {\n        this.getInstance().preventDefault = true;\n      }\n\n      return preventDefault;\n    }(),\n\n    boundListeners: [],\n    lifecycleEvents: {},\n    actionListeners: {},\n    publicMethods: {},\n    handlesOwnErrors: false\n  }, extras);\n}\n\nfunction createStoreConfig(globalConfig, StoreModel) {\n  StoreModel.config = fn.assign({\n    getState: function () {\n      function getState(state) {\n        if (Array.isArray(state)) {\n          return state.slice();\n        } else if (fn.isMutableObject(state)) {\n          return fn.assign({}, state);\n        }\n\n        return state;\n      }\n\n      return getState;\n    }(),\n    setState: function () {\n      function setState(currentState, nextState) {\n        if (fn.isMutableObject(nextState)) {\n          return fn.assign(currentState, nextState);\n        }\n        return nextState;\n      }\n\n      return setState;\n    }()\n  }, globalConfig, StoreModel.config);\n}\n\nfunction transformStore(transforms, StoreModel) {\n  return transforms.reduce(function (Store, transform) {\n    return transform(Store);\n  }, StoreModel);\n}\n\nfunction createStoreFromObject(alt, StoreModel, key) {\n  var storeInstance = void 0;\n\n  var StoreProto = createPrototype({}, alt, key, fn.assign({\n    getInstance: function () {\n      function getInstance() {\n        return storeInstance;\n      }\n\n      return getInstance;\n    }(),\n    setState: function () {\n      function setState(nextState) {\n        doSetState(this, storeInstance, nextState);\n      }\n\n      return setState;\n    }()\n  }, StoreModel));\n\n  // bind the store listeners\n  /* istanbul ignore else */\n  if (StoreProto.bindListeners) {\n    _StoreMixin2['default'].bindListeners.call(StoreProto, StoreProto.bindListeners);\n  }\n  /* istanbul ignore else */\n  if (StoreProto.observe) {\n    _StoreMixin2['default'].bindListeners.call(StoreProto, StoreProto.observe(alt));\n  }\n\n  // bind the lifecycle events\n  /* istanbul ignore else */\n  if (StoreProto.lifecycle) {\n    fn.eachObject(function (eventName, event) {\n      _StoreMixin2['default'].on.call(StoreProto, eventName, event);\n    }, [StoreProto.lifecycle]);\n  }\n\n  // create the instance and fn.assign the public methods to the instance\n  storeInstance = fn.assign(new _AltStore2['default'](alt, StoreProto, StoreProto.state !== undefined ? StoreProto.state : {}, StoreModel), StoreProto.publicMethods, {\n    displayName: key,\n    config: StoreModel.config\n  });\n\n  return storeInstance;\n}\n\nfunction createStoreFromClass(alt, StoreModel, key) {\n  var storeInstance = void 0;\n  var config = StoreModel.config;\n\n  // Creating a class here so we don't overload the provided store's\n  // prototype with the mixin behaviour and I'm extending from StoreModel\n  // so we can inherit any extensions from the provided store.\n\n  var Store = function (_StoreModel) {\n    _inherits(Store, _StoreModel);\n\n    function Store() {\n      _classCallCheck(this, Store);\n\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return _possibleConstructorReturn(this, _StoreModel.call.apply(_StoreModel, [this].concat(args)));\n    }\n\n    return Store;\n  }(StoreModel);\n\n  createPrototype(Store.prototype, alt, key, {\n    type: 'AltStore',\n    getInstance: function () {\n      function getInstance() {\n        return storeInstance;\n      }\n\n      return getInstance;\n    }(),\n    setState: function () {\n      function setState(nextState) {\n        doSetState(this, storeInstance, nextState);\n      }\n\n      return setState;\n    }()\n  });\n\n  for (var _len = arguments.length, argsForClass = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    argsForClass[_key - 3] = arguments[_key];\n  }\n\n  var store = new (Function.prototype.bind.apply(Store, [null].concat(argsForClass)))();\n\n  /* istanbul ignore next */\n  if (config.bindListeners) store.bindListeners(config.bindListeners);\n  /* istanbul ignore next */\n  if (config.datasource) store.registerAsync(config.datasource);\n\n  storeInstance = fn.assign(new _AltStore2['default'](alt, store, store.state !== undefined ? store.state : store, StoreModel), utils.getInternalMethods(StoreModel), config.publicMethods, { displayName: key });\n\n  return storeInstance;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.getInternalMethods = getInternalMethods;\nexports.getPrototypeChain = getPrototypeChain;\nexports.warn = warn;\nexports.uid = uid;\nexports.formatAsConstant = formatAsConstant;\nexports.dispatchIdentity = dispatchIdentity;\nexports.fsa = fsa;\nexports.dispatch = dispatch;\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\n/*eslint-disable*/\nvar builtIns = Object.getOwnPropertyNames(NoopClass);\nvar builtInProto = Object.getOwnPropertyNames(NoopClass.prototype);\n/*eslint-enable*/\n\nfunction getInternalMethods(Obj, isProto) {\n  var excluded = isProto ? builtInProto : builtIns;\n  var obj = isProto ? Obj.prototype : Obj;\n  return Object.getOwnPropertyNames(obj).reduce(function (value, m) {\n    if (excluded.indexOf(m) !== -1) {\n      return value;\n    }\n\n    value[m] = obj[m];\n    return value;\n  }, {});\n}\n\nfunction getPrototypeChain(Obj) {\n  var methods = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n  return Obj === Function.prototype ? methods : getPrototypeChain(Object.getPrototypeOf(Obj), fn.assign(getInternalMethods(Obj, true), methods));\n}\n\nfunction warn(msg) {\n  /* istanbul ignore else */\n  /*eslint-disable*/\n  if (typeof console !== 'undefined') {\n    console.warn(new ReferenceError(msg));\n  }\n  /*eslint-enable*/\n}\n\nfunction uid(container, name) {\n  var count = 0;\n  var key = name;\n  while (Object.hasOwnProperty.call(container, key)) {\n    key = name + String(++count);\n  }\n  return key;\n}\n\nfunction formatAsConstant(name) {\n  return name.replace(/[a-z]([A-Z])/g, function (i) {\n    return String(i[0]) + '_' + String(i[1].toLowerCase());\n  }).toUpperCase();\n}\n\nfunction dispatchIdentity(x) {\n  if (x === undefined) return null;\n\n  for (var _len = arguments.length, a = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    a[_key - 1] = arguments[_key];\n  }\n\n  return a.length ? [x].concat(a) : x;\n}\n\nfunction fsa(id, type, payload, details) {\n  return {\n    type: type,\n    payload: payload,\n    meta: _extends({\n      dispatchId: id\n    }, details),\n\n    id: id,\n    action: type,\n    data: payload,\n    details: details\n  };\n}\n\nfunction dispatch(id, actionObj, payload, alt) {\n  var data = actionObj.dispatch(payload);\n  if (data === undefined) return null;\n\n  var type = actionObj.id;\n  var namespace = type;\n  var name = type;\n  var details = { id: type, namespace: namespace, name: name };\n\n  var dispatchLater = function dispatchLater(x) {\n    return alt.dispatch(type, x, details);\n  };\n\n  if (fn.isFunction(data)) return data(dispatchLater, alt);\n\n  // XXX standardize this\n  return alt.dispatcher.dispatch(fsa(id, type, data, details));\n}\n\n/* istanbul ignore next */\nfunction NoopClass() {}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setAppState = setAppState;\nexports.snapshot = snapshot;\nexports.saveInitialSnapshot = saveInitialSnapshot;\nexports.filterSnapshots = filterSnapshots;\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction setAppState(instance, data, onStore) {\n  var obj = instance.deserialize(data);\n  fn.eachObject(function (key, value) {\n    var store = instance.stores[key];\n    if (store) {\n      (function () {\n        var config = store.StoreModel.config;\n\n        var state = store.state;\n        if (config.onDeserialize) obj[key] = config.onDeserialize(value) || value;\n        if (fn.isMutableObject(state)) {\n          fn.eachObject(function (k) {\n            return delete state[k];\n          }, [state]);\n          fn.assign(state, obj[key]);\n        } else {\n          store.state = obj[key];\n        }\n        onStore(store, store.state);\n      })();\n    }\n  }, [obj]);\n}\n\nfunction snapshot(instance) {\n  var storeNames = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n  var stores = storeNames.length ? storeNames : Object.keys(instance.stores);\n  return stores.reduce(function (obj, storeHandle) {\n    var storeName = storeHandle.displayName || storeHandle;\n    var store = instance.stores[storeName];\n    var config = store.StoreModel.config;\n\n    store.lifecycle('snapshot');\n    var customSnapshot = config.onSerialize && config.onSerialize(store.state);\n    obj[storeName] = customSnapshot ? customSnapshot : store.getState();\n    return obj;\n  }, {});\n}\n\nfunction saveInitialSnapshot(instance, key) {\n  var state = instance.deserialize(instance.serialize(instance.stores[key].state));\n  instance._initSnapshot[key] = state;\n  instance._lastSnapshot[key] = state;\n}\n\nfunction filterSnapshots(instance, state, stores) {\n  return stores.reduce(function (obj, store) {\n    var storeName = store.displayName || store;\n    if (!state[storeName]) {\n      throw new ReferenceError(String(storeName) + ' is not a valid store');\n    }\n    obj[storeName] = state[storeName];\n    return obj;\n  }, {});\n}","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nmodule.exports.Dispatcher = require('./lib/Dispatcher');\n","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Dispatcher\n * \n * @preventMunge\n */\n\n'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar _prefix = 'ID_';\n\n/**\n * Dispatcher is used to broadcast payloads to registered callbacks. This is\n * different from generic pub-sub systems in two ways:\n *\n *   1) Callbacks are not subscribed to particular events. Every payload is\n *      dispatched to every registered callback.\n *   2) Callbacks can be deferred in whole or part until other callbacks have\n *      been executed.\n *\n * For example, consider this hypothetical flight destination form, which\n * selects a default city when a country is selected:\n *\n *   var flightDispatcher = new Dispatcher();\n *\n *   // Keeps track of which country is selected\n *   var CountryStore = {country: null};\n *\n *   // Keeps track of which city is selected\n *   var CityStore = {city: null};\n *\n *   // Keeps track of the base flight price of the selected city\n *   var FlightPriceStore = {price: null}\n *\n * When a user changes the selected city, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'city-update',\n *     selectedCity: 'paris'\n *   });\n *\n * This payload is digested by `CityStore`:\n *\n *   flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'city-update') {\n *       CityStore.city = payload.selectedCity;\n *     }\n *   });\n *\n * When the user selects a country, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'country-update',\n *     selectedCountry: 'australia'\n *   });\n *\n * This payload is digested by both stores:\n *\n *   CountryStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       CountryStore.country = payload.selectedCountry;\n *     }\n *   });\n *\n * When the callback to update `CountryStore` is registered, we save a reference\n * to the returned token. Using this token with `waitFor()`, we can guarantee\n * that `CountryStore` is updated before the callback that updates `CityStore`\n * needs to query its data.\n *\n *   CityStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       // `CountryStore.country` may not be updated.\n *       flightDispatcher.waitFor([CountryStore.dispatchToken]);\n *       // `CountryStore.country` is now guaranteed to be updated.\n *\n *       // Select the default city for the new country\n *       CityStore.city = getDefaultCityForCountry(CountryStore.country);\n *     }\n *   });\n *\n * The usage of `waitFor()` can be chained, for example:\n *\n *   FlightPriceStore.dispatchToken =\n *     flightDispatcher.register(function(payload) {\n *       switch (payload.actionType) {\n *         case 'country-update':\n *         case 'city-update':\n *           flightDispatcher.waitFor([CityStore.dispatchToken]);\n *           FlightPriceStore.price =\n *             getFlightPriceStore(CountryStore.country, CityStore.city);\n *           break;\n *     }\n *   });\n *\n * The `country-update` payload will be guaranteed to invoke the stores'\n * registered callbacks in order: `CountryStore`, `CityStore`, then\n * `FlightPriceStore`.\n */\n\nvar Dispatcher = (function () {\n  function Dispatcher() {\n    _classCallCheck(this, Dispatcher);\n\n    this._callbacks = {};\n    this._isDispatching = false;\n    this._isHandled = {};\n    this._isPending = {};\n    this._lastID = 1;\n  }\n\n  /**\n   * Registers a callback to be invoked with every dispatched payload. Returns\n   * a token that can be used with `waitFor()`.\n   */\n\n  Dispatcher.prototype.register = function register(callback) {\n    var id = _prefix + this._lastID++;\n    this._callbacks[id] = callback;\n    return id;\n  };\n\n  /**\n   * Removes a callback based on its token.\n   */\n\n  Dispatcher.prototype.unregister = function unregister(id) {\n    !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.unregister(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n    delete this._callbacks[id];\n  };\n\n  /**\n   * Waits for the callbacks specified to be invoked before continuing execution\n   * of the current callback. This method should only be used by a callback in\n   * response to a dispatched payload.\n   */\n\n  Dispatcher.prototype.waitFor = function waitFor(ids) {\n    !this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Must be invoked while dispatching.') : invariant(false) : undefined;\n    for (var ii = 0; ii < ids.length; ii++) {\n      var id = ids[ii];\n      if (this._isPending[id]) {\n        !this._isHandled[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Circular dependency detected while ' + 'waiting for `%s`.', id) : invariant(false) : undefined;\n        continue;\n      }\n      !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n      this._invokeCallback(id);\n    }\n  };\n\n  /**\n   * Dispatches a payload to all registered callbacks.\n   */\n\n  Dispatcher.prototype.dispatch = function dispatch(payload) {\n    !!this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.') : invariant(false) : undefined;\n    this._startDispatching(payload);\n    try {\n      for (var id in this._callbacks) {\n        if (this._isPending[id]) {\n          continue;\n        }\n        this._invokeCallback(id);\n      }\n    } finally {\n      this._stopDispatching();\n    }\n  };\n\n  /**\n   * Is this Dispatcher currently dispatching.\n   */\n\n  Dispatcher.prototype.isDispatching = function isDispatching() {\n    return this._isDispatching;\n  };\n\n  /**\n   * Call the callback stored with the given id. Also do some internal\n   * bookkeeping.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._invokeCallback = function _invokeCallback(id) {\n    this._isPending[id] = true;\n    this._callbacks[id](this._pendingPayload);\n    this._isHandled[id] = true;\n  };\n\n  /**\n   * Set up bookkeeping needed when dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._startDispatching = function _startDispatching(payload) {\n    for (var id in this._callbacks) {\n      this._isPending[id] = false;\n      this._isHandled[id] = false;\n    }\n    this._pendingPayload = payload;\n    this._isDispatching = true;\n  };\n\n  /**\n   * Clear bookkeeping used for dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._stopDispatching = function _stopDispatching() {\n    delete this._pendingPayload;\n    this._isDispatching = false;\n  };\n\n  return Dispatcher;\n})();\n\nmodule.exports = Dispatcher;","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule invariant\n */\n\n\"use strict\";\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function (condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error('Invariant Violation: ' + format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;","/**\n * Indicates that navigation was caused by a call to history.push.\n */\n'use strict';\n\nexports.__esModule = true;\nvar PUSH = 'PUSH';\n\nexports.PUSH = PUSH;\n/**\n * Indicates that navigation was caused by a call to history.replace.\n */\nvar REPLACE = 'REPLACE';\n\nexports.REPLACE = REPLACE;\n/**\n * Indicates that navigation was caused by some other action such\n * as using a browser's back/forward buttons and/or manually manipulating\n * the URL in a browser's location bar. This is the default.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onpopstate\n * for more information.\n */\nvar POP = 'POP';\n\nexports.POP = POP;\nexports['default'] = {\n  PUSH: PUSH,\n  REPLACE: REPLACE,\n  POP: POP\n};","\"use strict\";\n\nexports.__esModule = true;\nexports.loopAsync = loopAsync;\n\nfunction loopAsync(turns, work, callback) {\n  var currentTurn = 0;\n  var isDone = false;\n\n  function done() {\n    isDone = true;\n    callback.apply(this, arguments);\n  }\n\n  function next() {\n    if (isDone) return;\n\n    if (currentTurn < turns) {\n      work.call(this, currentTurn++, next, done);\n    } else {\n      done.apply(this, arguments);\n    }\n  }\n\n  next();\n}","/*eslint-disable no-empty */\n'use strict';\n\nexports.__esModule = true;\nexports.saveState = saveState;\nexports.readState = readState;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar KeyPrefix = '@@History/';\nvar QuotaExceededError = 'QuotaExceededError';\nvar SecurityError = 'SecurityError';\n\nfunction createKey(key) {\n  return KeyPrefix + key;\n}\n\nfunction saveState(key, state) {\n  try {\n    window.sessionStorage.setItem(createKey(key), JSON.stringify(state));\n  } catch (error) {\n    if (error.name === SecurityError) {\n      // Blocking cookies in Chrome/Firefox/Safari throws SecurityError on any\n      // attempt to access window.sessionStorage.\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](false, '[history] Unable to save state; sessionStorage is not available due to security settings') : undefined;\n\n      return;\n    }\n\n    if (error.name === QuotaExceededError && window.sessionStorage.length === 0) {\n      // Safari \"private mode\" throws QuotaExceededError.\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](false, '[history] Unable to save state; sessionStorage is not available in Safari private mode') : undefined;\n\n      return;\n    }\n\n    throw error;\n  }\n}\n\nfunction readState(key) {\n  var json = undefined;\n  try {\n    json = window.sessionStorage.getItem(createKey(key));\n  } catch (error) {\n    if (error.name === SecurityError) {\n      // Blocking cookies in Chrome/Firefox/Safari throws SecurityError on any\n      // attempt to access window.sessionStorage.\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](false, '[history] Unable to read state; sessionStorage is not available due to security settings') : undefined;\n\n      return null;\n    }\n  }\n\n  if (json) {\n    try {\n      return JSON.parse(json);\n    } catch (error) {\n      // Ignore invalid JSON.\n    }\n  }\n\n  return null;\n}","'use strict';\n\nexports.__esModule = true;\nexports.addEventListener = addEventListener;\nexports.removeEventListener = removeEventListener;\nexports.getHashPath = getHashPath;\nexports.replaceHashPath = replaceHashPath;\nexports.getWindowPath = getWindowPath;\nexports.go = go;\nexports.getUserConfirmation = getUserConfirmation;\nexports.supportsHistory = supportsHistory;\nexports.supportsGoWithoutReloadUsingHash = supportsGoWithoutReloadUsingHash;\n\nfunction addEventListener(node, event, listener) {\n  if (node.addEventListener) {\n    node.addEventListener(event, listener, false);\n  } else {\n    node.attachEvent('on' + event, listener);\n  }\n}\n\nfunction removeEventListener(node, event, listener) {\n  if (node.removeEventListener) {\n    node.removeEventListener(event, listener, false);\n  } else {\n    node.detachEvent('on' + event, listener);\n  }\n}\n\nfunction getHashPath() {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  return window.location.href.split('#')[1] || '';\n}\n\nfunction replaceHashPath(path) {\n  window.location.replace(window.location.pathname + window.location.search + '#' + path);\n}\n\nfunction getWindowPath() {\n  return window.location.pathname + window.location.search + window.location.hash;\n}\n\nfunction go(n) {\n  if (n) window.history.go(n);\n}\n\nfunction getUserConfirmation(message, callback) {\n  callback(window.confirm(message));\n}\n\n/**\n * Returns true if the HTML5 history API is supported. Taken from Modernizr.\n *\n * https://github.com/Modernizr/Modernizr/blob/master/LICENSE\n * https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n * changed to avoid false negatives for Windows Phones: https://github.com/rackt/react-router/issues/586\n */\n\nfunction supportsHistory() {\n  var ua = navigator.userAgent;\n  if ((ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) && ua.indexOf('Mobile Safari') !== -1 && ua.indexOf('Chrome') === -1 && ua.indexOf('Windows Phone') === -1) {\n    return false;\n  }\n  // FIXME: Work around our browser history not working correctly on Chrome\n  // iOS: https://github.com/rackt/react-router/issues/2565\n  if (ua.indexOf('CriOS') !== -1) {\n    return false;\n  }\n  return window.history && 'pushState' in window.history;\n}\n\n/**\n * Returns false if using go(n) with hash history causes a full page reload.\n */\n\nfunction supportsGoWithoutReloadUsingHash() {\n  var ua = navigator.userAgent;\n  return ua.indexOf('Firefox') === -1;\n}","'use strict';\n\nexports.__esModule = true;\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nexports.canUseDOM = canUseDOM;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\n/**\n * Creates and returns a history object that uses HTML5's history API\n * (pushState, replaceState, and the popstate event) to manage history.\n * This is the recommended method of managing history in browsers because\n * it provides the cleanest URLs.\n *\n * Note: In browsers that do not support the HTML5 history API full\n * page reloads will be used to preserve URLs.\n */\nfunction createBrowserHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Browser history needs a DOM') : _invariant2['default'](false) : undefined;\n\n  var forceRefresh = options.forceRefresh;\n\n  var isSupported = _DOMUtils.supportsHistory();\n  var useRefresh = !isSupported || forceRefresh;\n\n  function getCurrentLocation(historyState) {\n    historyState = historyState || window.history.state || {};\n\n    var path = _DOMUtils.getWindowPath();\n    var _historyState = historyState;\n    var key = _historyState.key;\n\n    var state = undefined;\n    if (key) {\n      state = _DOMStateStorage.readState(key);\n    } else {\n      state = null;\n      key = history.createKey();\n\n      if (isSupported) window.history.replaceState(_extends({}, historyState, { key: key }), null, path);\n    }\n\n    var location = _parsePath2['default'](path);\n\n    return history.createLocation(_extends({}, location, { state: state }), undefined, key);\n  }\n\n  function startPopStateListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function popStateListener(event) {\n      if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n      transitionTo(getCurrentLocation(event.state));\n    }\n\n    _DOMUtils.addEventListener(window, 'popstate', popStateListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'popstate', popStateListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    _DOMStateStorage.saveState(key, state);\n\n    var path = (basename || '') + pathname + search + hash;\n    var historyState = {\n      key: key\n    };\n\n    if (action === _Actions.PUSH) {\n      if (useRefresh) {\n        window.location.href = path;\n        return false; // Prevent location update.\n      } else {\n          window.history.pushState(historyState, null, path);\n        }\n    } else {\n      // REPLACE\n      if (useRefresh) {\n        window.location.replace(path);\n        return false; // Prevent location update.\n      } else {\n          window.history.replaceState(historyState, null, path);\n        }\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopPopStateListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listenBefore(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listen(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  // deprecated\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    history.registerTransitionHook(hook);\n  }\n\n  // deprecated\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n\n    if (--listenerCount === 0) stopPopStateListener();\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    registerTransitionHook: registerTransitionHook,\n    unregisterTransitionHook: unregisterTransitionHook\n  });\n}\n\nexports['default'] = createBrowserHistory;\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _createHistory = require('./createHistory');\n\nvar _createHistory2 = _interopRequireDefault(_createHistory);\n\nfunction createDOMHistory(options) {\n  var history = _createHistory2['default'](_extends({\n    getUserConfirmation: _DOMUtils.getUserConfirmation\n  }, options, {\n    go: _DOMUtils.go\n  }));\n\n  function listen(listener) {\n    !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'DOM history needs a DOM') : _invariant2['default'](false) : undefined;\n\n    return history.listen(listener);\n  }\n\n  return _extends({}, history, {\n    listen: listen\n  });\n}\n\nexports['default'] = createDOMHistory;\nmodule.exports = exports['default'];","//import warning from 'warning'\n'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _deepEqual = require('deep-equal');\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _AsyncUtils = require('./AsyncUtils');\n\nvar _Actions = require('./Actions');\n\nvar _createLocation2 = require('./createLocation');\n\nvar _createLocation3 = _interopRequireDefault(_createLocation2);\n\nvar _runTransitionHook = require('./runTransitionHook');\n\nvar _runTransitionHook2 = _interopRequireDefault(_runTransitionHook);\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\nvar _deprecate = require('./deprecate');\n\nvar _deprecate2 = _interopRequireDefault(_deprecate);\n\nfunction createRandomKey(length) {\n  return Math.random().toString(36).substr(2, length);\n}\n\nfunction locationsAreEqual(a, b) {\n  return a.pathname === b.pathname && a.search === b.search &&\n  //a.action === b.action && // Different action !== location change.\n  a.key === b.key && _deepEqual2['default'](a.state, b.state);\n}\n\nvar DefaultKeyLength = 6;\n\nfunction createHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n  var getCurrentLocation = options.getCurrentLocation;\n  var finishTransition = options.finishTransition;\n  var saveState = options.saveState;\n  var go = options.go;\n  var keyLength = options.keyLength;\n  var getUserConfirmation = options.getUserConfirmation;\n\n  if (typeof keyLength !== 'number') keyLength = DefaultKeyLength;\n\n  var transitionHooks = [];\n\n  function listenBefore(hook) {\n    transitionHooks.push(hook);\n\n    return function () {\n      transitionHooks = transitionHooks.filter(function (item) {\n        return item !== hook;\n      });\n    };\n  }\n\n  var allKeys = [];\n  var changeListeners = [];\n  var location = undefined;\n\n  function getCurrent() {\n    if (pendingLocation && pendingLocation.action === _Actions.POP) {\n      return allKeys.indexOf(pendingLocation.key);\n    } else if (location) {\n      return allKeys.indexOf(location.key);\n    } else {\n      return -1;\n    }\n  }\n\n  function updateLocation(newLocation) {\n    var current = getCurrent();\n\n    location = newLocation;\n\n    if (location.action === _Actions.PUSH) {\n      allKeys = [].concat(allKeys.slice(0, current + 1), [location.key]);\n    } else if (location.action === _Actions.REPLACE) {\n      allKeys[current] = location.key;\n    }\n\n    changeListeners.forEach(function (listener) {\n      listener(location);\n    });\n  }\n\n  function listen(listener) {\n    changeListeners.push(listener);\n\n    if (location) {\n      listener(location);\n    } else {\n      var _location = getCurrentLocation();\n      allKeys = [_location.key];\n      updateLocation(_location);\n    }\n\n    return function () {\n      changeListeners = changeListeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  }\n\n  function confirmTransitionTo(location, callback) {\n    _AsyncUtils.loopAsync(transitionHooks.length, function (index, next, done) {\n      _runTransitionHook2['default'](transitionHooks[index], location, function (result) {\n        if (result != null) {\n          done(result);\n        } else {\n          next();\n        }\n      });\n    }, function (message) {\n      if (getUserConfirmation && typeof message === 'string') {\n        getUserConfirmation(message, function (ok) {\n          callback(ok !== false);\n        });\n      } else {\n        callback(message !== false);\n      }\n    });\n  }\n\n  var pendingLocation = undefined;\n\n  function transitionTo(nextLocation) {\n    if (location && locationsAreEqual(location, nextLocation)) return; // Nothing to do.\n\n    pendingLocation = nextLocation;\n\n    confirmTransitionTo(nextLocation, function (ok) {\n      if (pendingLocation !== nextLocation) return; // Transition was interrupted.\n\n      if (ok) {\n        // treat PUSH to current path like REPLACE to be consistent with browsers\n        if (nextLocation.action === _Actions.PUSH) {\n          var prevPath = createPath(location);\n          var nextPath = createPath(nextLocation);\n\n          if (nextPath === prevPath) nextLocation.action = _Actions.REPLACE;\n        }\n\n        if (finishTransition(nextLocation) !== false) updateLocation(nextLocation);\n      } else if (location && nextLocation.action === _Actions.POP) {\n        var prevIndex = allKeys.indexOf(location.key);\n        var nextIndex = allKeys.indexOf(nextLocation.key);\n\n        if (prevIndex !== -1 && nextIndex !== -1) go(prevIndex - nextIndex); // Restore the URL.\n      }\n    });\n  }\n\n  function push(location) {\n    transitionTo(createLocation(location, _Actions.PUSH, createKey()));\n  }\n\n  function replace(location) {\n    transitionTo(createLocation(location, _Actions.REPLACE, createKey()));\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  function createKey() {\n    return createRandomKey(keyLength);\n  }\n\n  function createPath(location) {\n    if (location == null || typeof location === 'string') return location;\n\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n\n    var result = pathname;\n\n    if (search) result += search;\n\n    if (hash) result += hash;\n\n    return result;\n  }\n\n  function createHref(location) {\n    return createPath(location);\n  }\n\n  function createLocation(location, action) {\n    var key = arguments.length <= 2 || arguments[2] === undefined ? createKey() : arguments[2];\n\n    if (typeof action === 'object') {\n      //warning(\n      //  false,\n      //  'The state (2nd) argument to history.createLocation is deprecated; use a ' +\n      //  'location descriptor instead'\n      //)\n\n      if (typeof location === 'string') location = _parsePath2['default'](location);\n\n      location = _extends({}, location, { state: action });\n\n      action = key;\n      key = arguments[3] || createKey();\n    }\n\n    return _createLocation3['default'](location, action, key);\n  }\n\n  // deprecated\n  function setState(state) {\n    if (location) {\n      updateLocationState(location, state);\n      updateLocation(location);\n    } else {\n      updateLocationState(getCurrentLocation(), state);\n    }\n  }\n\n  function updateLocationState(location, state) {\n    location.state = _extends({}, location.state, state);\n    saveState(location.key, location.state);\n  }\n\n  // deprecated\n  function registerTransitionHook(hook) {\n    if (transitionHooks.indexOf(hook) === -1) transitionHooks.push(hook);\n  }\n\n  // deprecated\n  function unregisterTransitionHook(hook) {\n    transitionHooks = transitionHooks.filter(function (item) {\n      return item !== hook;\n    });\n  }\n\n  // deprecated\n  function pushState(state, path) {\n    if (typeof path === 'string') path = _parsePath2['default'](path);\n\n    push(_extends({ state: state }, path));\n  }\n\n  // deprecated\n  function replaceState(state, path) {\n    if (typeof path === 'string') path = _parsePath2['default'](path);\n\n    replace(_extends({ state: state }, path));\n  }\n\n  return {\n    listenBefore: listenBefore,\n    listen: listen,\n    transitionTo: transitionTo,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    createKey: createKey,\n    createPath: createPath,\n    createHref: createHref,\n    createLocation: createLocation,\n\n    setState: _deprecate2['default'](setState, 'setState is deprecated; use location.key to save state instead'),\n    registerTransitionHook: _deprecate2['default'](registerTransitionHook, 'registerTransitionHook is deprecated; use listenBefore instead'),\n    unregisterTransitionHook: _deprecate2['default'](unregisterTransitionHook, 'unregisterTransitionHook is deprecated; use the callback returned from listenBefore instead'),\n    pushState: _deprecate2['default'](pushState, 'pushState is deprecated; use push instead'),\n    replaceState: _deprecate2['default'](replaceState, 'replaceState is deprecated; use replace instead')\n  };\n}\n\nexports['default'] = createHistory;\nmodule.exports = exports['default'];","//import warning from 'warning'\n'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _Actions = require('./Actions');\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\nfunction createLocation() {\n  var location = arguments.length <= 0 || arguments[0] === undefined ? '/' : arguments[0];\n  var action = arguments.length <= 1 || arguments[1] === undefined ? _Actions.POP : arguments[1];\n  var key = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n  var _fourthArg = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\n  if (typeof location === 'string') location = _parsePath2['default'](location);\n\n  if (typeof action === 'object') {\n    //warning(\n    //  false,\n    //  'The state (2nd) argument to createLocation is deprecated; use a ' +\n    //  'location descriptor instead'\n    //)\n\n    location = _extends({}, location, { state: action });\n\n    action = key || _Actions.POP;\n    key = _fourthArg;\n  }\n\n  var pathname = location.pathname || '/';\n  var search = location.search || '';\n  var hash = location.hash || '';\n  var state = location.state || null;\n\n  return {\n    pathname: pathname,\n    search: search,\n    hash: hash,\n    state: state,\n    action: action,\n    key: key\n  };\n}\n\nexports['default'] = createLocation;\nmodule.exports = exports['default'];","//import warning from 'warning'\n\n\"use strict\";\n\nexports.__esModule = true;\nfunction deprecate(fn) {\n  return fn;\n  //return function () {\n  //  warning(false, '[history] ' + message)\n  //  return fn.apply(this, arguments)\n  //}\n}\n\nexports[\"default\"] = deprecate;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nexports.__esModule = true;\nfunction extractPath(string) {\n  var match = string.match(/^https?:\\/\\/[^\\/]*/);\n\n  if (match == null) return string;\n\n  return string.substring(match[0].length);\n}\n\nexports[\"default\"] = extractPath;\nmodule.exports = exports[\"default\"];","'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _extractPath = require('./extractPath');\n\nvar _extractPath2 = _interopRequireDefault(_extractPath);\n\nfunction parsePath(path) {\n  var pathname = _extractPath2['default'](path);\n  var search = '';\n  var hash = '';\n\n  process.env.NODE_ENV !== 'production' ? _warning2['default'](path === pathname, 'A path must be pathname + search + hash only, not a fully qualified URL like \"%s\"', path) : undefined;\n\n  var hashIndex = pathname.indexOf('#');\n  if (hashIndex !== -1) {\n    hash = pathname.substring(hashIndex);\n    pathname = pathname.substring(0, hashIndex);\n  }\n\n  var searchIndex = pathname.indexOf('?');\n  if (searchIndex !== -1) {\n    search = pathname.substring(searchIndex);\n    pathname = pathname.substring(0, searchIndex);\n  }\n\n  if (pathname === '') pathname = '/';\n\n  return {\n    pathname: pathname,\n    search: search,\n    hash: hash\n  };\n}\n\nexports['default'] = parsePath;\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction runTransitionHook(hook, location, callback) {\n  var result = hook(location, callback);\n\n  if (hook.length < 2) {\n    // Assume the hook runs synchronously and automatically\n    // call the callback with the return value.\n    callback(result);\n  } else {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](result === undefined, 'You should not \"return\" in a transition hook with a callback argument; call the callback instead') : undefined;\n  }\n}\n\nexports['default'] = runTransitionHook;\nmodule.exports = exports['default'];","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\n\nfunction transmitter() {\n  var subscriptions = [];\n  var nowDispatching = false;\n  var toUnsubscribe = {};\n\n  var unsubscribe = function unsubscribe(onChange) {\n    var id = subscriptions.indexOf(onChange);\n    if (id < 0) return;\n    if (nowDispatching) {\n      toUnsubscribe[id] = onChange;\n      return;\n    }\n    subscriptions.splice(id, 1);\n  };\n\n  var subscribe = function subscribe(onChange) {\n    var id = subscriptions.push(onChange);\n    var dispose = function dispose() {\n      return unsubscribe(onChange);\n    };\n    return { dispose: dispose };\n  };\n\n  var publish = function publish() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    nowDispatching = true;\n    try {\n      subscriptions.forEach(function (subscription, id) {\n        return toUnsubscribe[id] || subscription.apply(undefined, args);\n      });\n    } finally {\n      nowDispatching = false;\n      Object.keys(toUnsubscribe).forEach(function (id) {\n        return unsubscribe(toUnsubscribe[id]);\n      });\n      toUnsubscribe = {};\n    }\n  };\n\n  return {\n    publish: publish,\n    subscribe: subscribe,\n    $subscriptions: subscriptions\n  };\n}\n\nmodule.exports = transmitter;","/**\n * Copyright 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar warning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n        '`warning(condition, format, ...args)` requires a warning ' +\n        'message argument'\n      );\n    }\n\n    if (format.length < 10 || (/^[s\\W]*$/).test(format)) {\n      throw new Error(\n        'The warning format should be able to uniquely identify this ' +\n        'warning. Please, use a more descriptive format than: ' + format\n      );\n    }\n\n    if (!condition) {\n      var argIndex = 0;\n      var message = 'Warning: ' +\n        format.replace(/%s/g, function() {\n          return args[argIndex++];\n        });\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n      try {\n        // This error was thrown as a convenience so that you can use this stack\n        // to find the callsite that caused this warning to fire.\n        throw new Error(message);\n      } catch(x) {}\n    }\n  };\n}\n\nmodule.exports = warning;\n","import alt from '../alt'\r\n\r\nclass FormActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'handleInputChange',\r\n      'usernameValidationFail',\r\n      'passwordValidationFail',\r\n      'genderValidationFail',\r\n      'firstNameValidationFail',\r\n      'lastNameValidationFail',\r\n      'ageValidationFail',\r\n      'unauthorizedAccessAttempt'\r\n    )\r\n  }\r\n}\r\n\r\nexport default alt.createActions(FormActions)\r\n","import alt from '../alt'\r\nimport TMDB from '../utilities/RequesterTMDB'\r\n\r\nclass MovieActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'getTopTenMoviesSuccess',\r\n      'getTopTenMoviesFail',\r\n      'getFiveRecentMoviesSuccess',\r\n      'getFiveRecentMoviesFail',\r\n      'emptyTopTenMovies',\r\n      'addMovieToTopTen'\r\n    )\r\n  }\r\n\r\n  getFiveRecentMovies () {\r\n    let request = {\r\n      method: 'get',\r\n      url: '/api/movies/five-recent'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(data => this.getFiveRecentMoviesSuccess(data))\r\n\r\n    return true\r\n  }\r\n\r\n  getTopTenMovies () {\r\n    let request = {\r\n      url: '/api/movies/top-ten',\r\n      method: 'get'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(data => {\r\n        this.emptyTopTenMovies()\r\n        for (let movie of data) {\r\n          let movieData = {\r\n            _id: movie._id,\r\n            name: movie.name,\r\n            description: movie.description,\r\n            genres: movie.genres\r\n          }\r\n\r\n          TMDB\r\n            .getMoviePoster(movie.name)\r\n            .then(tmdbResponse => {\r\n              movieData.moviePosterUrl = tmdbResponse.posterUrl\r\n              if (!movieData.description || movieData.description === '') {\r\n                movieData.description = tmdbResponse.overview\r\n              }\r\n\r\n              getComments(movie._id)\r\n                .then(comments => {\r\n                  movieData.comments = comments\r\n\r\n                  this.addMovieToTopTen(movieData)\r\n                })\r\n            })\r\n        }\r\n      })\r\n      .fail(error => this.getTopTenMoviesFail(error))\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport default alt.createActions(MovieActions)\r\n\r\nfunction getComments (movieId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = {\r\n      url: `/api/movies/${movieId}/comments`,\r\n      method: 'get'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(data => resolve(data))\r\n      .fail(err => reject(err))\r\n  })\r\n}\r\n","import alt from '../alt'\r\n\r\nclass MovieAddActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'handleNameChange',\r\n      'handleDescriptionChange',\r\n      'handleGenresChange',\r\n      'nameValidationFail',\r\n      'genresValidationFail',\r\n      'addMovieSuccess',\r\n      'addMovieFail'\r\n    )\r\n  }\r\n\r\n  addMovie (data) {\r\n    let request = {\r\n      url: '/api/movies/add',\r\n      method: 'POST',\r\n      data: JSON.stringify(data),\r\n      contentType: 'application/json'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(() => {\r\n        this.addMovieSuccess()\r\n      })\r\n      .fail((err) => this.addMovieFail(err))\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport default alt.createActions(MovieAddActions)\r\n","import alt from '../alt'\r\n\r\nclass NavbarActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'updateAjaxAnimation'\r\n    )\r\n  }\r\n}\r\n\r\nexport default alt.createActions(NavbarActions)\r\n","import alt from '../alt'\r\n\r\nclass UserActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'registerUserSuccess',\r\n      'registerUserFail',\r\n      'loginUserSuccess',\r\n      'loginUserFail',\r\n      'logoutUserSuccess'\r\n    )\r\n  }\r\n\r\n  registerUser (data) {\r\n    let request = {\r\n      url: '/user/register',\r\n      method: 'post',\r\n      data: JSON.stringify(data),\r\n      contentType: 'application/json'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(() => this.registerUserSuccess())\r\n      .fail(err => {\r\n        this.registerUserFail(err.responseJSON.message)\r\n      })\r\n\r\n    return true\r\n  }\r\n\r\n  loginUser (data) {\r\n    let request = {\r\n      url: '/user/login',\r\n      method: 'post',\r\n      data: JSON.stringify(data),\r\n      contentType: 'application/json'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(user => {\r\n        this.loginUserSuccess(user)\r\n      })\r\n      .fail(err => {\r\n        this.loginUserFail(err.responseJSON)\r\n      })\r\n\r\n    return true\r\n  }\r\n\r\n  logoutUser () {\r\n    let request = {\r\n      url: '/user/logout',\r\n      method: 'post'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(() => {\r\n        this.logoutUserSuccess()\r\n      })\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport default alt.createActions(UserActions)\r\n","import Alt from 'alt'\r\n\r\nexport default new Alt()\r\n","import React from 'react'\r\nimport Navbar from './Navbar'\r\nimport Footer from './Footer'\r\nimport UserStore from '../stores/UserStore'\r\n\r\nexport default class App extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = UserStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    UserStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    UserStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div>\r\n        <Navbar />\r\n        { this.props.children }\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router'\r\nimport MovieActions from '../actions/MovieActions'\r\nimport MovieStore from '../stores/MovieStore'\r\n\r\nclass Footer extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = MovieStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    MovieStore.listen(this.onChange)\r\n    MovieActions.getFiveRecentMovies()\r\n\r\n    this.interval = setInterval(() => MovieActions.getFiveRecentMovies(), 30000)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    MovieStore.unlisten(this.onChange)\r\n    clearInterval(this.interval)\r\n  }\r\n\r\n  render () {\r\n    let mostRecentMovies = this.state.mostRecentMovies.map(movie => {\r\n      return (\r\n        <li key={movie._id}>\r\n          <Link to={`/...`}>{movie.name}</Link>\r\n        </li>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <footer>\r\n        <div className='container'>\r\n          <div className='row'>\r\n            <div className='col-sm-5'>\r\n              <h3 className='lead'><strong>Information</strong> and <strong>Copyright</strong></h3>\r\n              <p>Powered by <strong>Express</strong>, <strong>MongoDB</strong> and <strong>React</strong></p>\r\n              <p>© 2017 SoftUni.</p>\r\n            </div>\r\n            <div className='col-sm-4 hidden-xs'>\r\n              <h3 className='lead'>\r\n                <strong>Newest</strong> 5 Movies\r\n              </h3>\r\n              <ul className='list-inline'>\r\n                {mostRecentMovies}\r\n              </ul>\r\n            </div>\r\n            <div className='col-sm-3'>\r\n              <h3 className='lead'>Author</h3>\r\n              <a href='https://github.com/PeterAsenov22'><strong>Petar Asenov</strong></a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Footer\r\n","import React, { Component } from 'react'\r\nimport MovieCard from './sub-components/MovieCard'\r\nimport MovieActions from '../actions/MovieActions'\r\nimport MovieStore from '../stores/MovieStore'\r\n\r\nclass Home extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = MovieStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    MovieStore.listen(this.onChange)\r\n    MovieActions.getTopTenMovies()\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    MovieStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    let movies = this.state.topTenMovies.map((movie, index) => {\r\n      return (\r\n        <MovieCard\r\n          key={movie._id}\r\n          movie={movie}\r\n          index={index} />\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className='container'>\r\n        <h3 className='text-center'>Welcome to <strong>Movie Database</strong></h3>\r\n        <div className='list-group'>\r\n          {movies}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Home\r\n","import React from 'react'\r\nimport MovieAddActions from '../actions/MovieAddActions'\r\nimport MovieAddStore from '../stores/MovieAddStore'\r\n\r\nclass MovieAdd extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = MovieAddStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    MovieAddStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    MovieAddStore.unlisten(this.onChange)\r\n  }\r\n\r\n  handleSubmit (e) {\r\n    e.preventDefault()\r\n\r\n    let name = this.state.name.trim()\r\n    let genres = this.state.genres\r\n    if (!name) {\r\n      MovieAddActions.nameValidationFail()\r\n    }\r\n    if (genres.length === 0) {\r\n      MovieAddActions.genresValidationFail()\r\n    }\r\n\r\n    if (name) {\r\n      let data = {\r\n        name: this.state.name,\r\n        description: this.state.description,\r\n        genres: this.state.genres\r\n      }\r\n\r\n      MovieAddActions.addMovie(data)\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='container'>\r\n        <div className='row flipInX animated'>\r\n          <div className='col-sm-8'>\r\n            <div className='panel panel-default'>\r\n              <div className='panel-heading'>Add Movie</div>\r\n              <div className='panel-body'>\r\n                <form onSubmit={this.handleSubmit.bind(this)}>\r\n                  <div className={'form-group ' + this.state.nameValidationState}>\r\n                    <label className='control-label'>Name</label>\r\n                    <input type='text' className='form-control' ref='nameTextField'\r\n                      value={this.state.name}\r\n                      onChange={MovieAddActions.handleNameChange} autoFocus />\r\n                    <span className='help-block'>{ this.state.helpBlock }</span>\r\n                  </div>\r\n                  <div className='form-group'>\r\n                    <label className='control-label'>Description</label>\r\n                    <textarea className='form-control'\r\n                      rows='5'\r\n                      value={this.state.description}\r\n                      onChange={MovieAddActions.handleDescriptionChange} />\r\n                  </div>\r\n                  <div className={'form-group ' + this.state.genresValidationState}>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='action' value='Action'\r\n                        checked={this.state.genres.indexOf('Action') !== -1}\r\n                        onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='action'>Action</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='horror' value='Horror'\r\n                        checked={this.state.genres.indexOf('Horror') !== -1}\r\n                        onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='horror'>Horror</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='sci-fi' value='Sci-fi'\r\n                        checked={this.state.genres.indexOf('Sci-fi') !== -1}\r\n                        onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='sci-fi'>Sci-fi</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='fantasy' value='Fantasy'\r\n                        checked={this.state.genres.indexOf('Fantasy') !== -1}\r\n                        onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='fantasy'>Fantasy</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='romance' value='Romance'\r\n                        checked={this.state.genres.indexOf('Romance') !== -1}\r\n                        onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='romance'>Romance</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='thriller' value='Thriller'\r\n                        checked={this.state.genres.indexOf('Thriller') !== -1}\r\n                        onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='thriller'>Thriller</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='adventure' value='Adventure'\r\n                        checked={this.state.genres.indexOf('Adventure') !== -1}\r\n                        onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='adventure'>Adventure</label>\r\n                    </div>\r\n                  </div>\r\n                  <button type='submit' className='btn btn-primary'>Submit</button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MovieAdd\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router'\r\nimport NavbarActions from '../actions/NavbarActions'\r\nimport NavbarStore from '../stores/NavbarStore'\r\nimport NavbarUserMenu from './sub-components/NavbarUserMenu'\r\n\r\nclass Navbar extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = NavbarStore.getState()\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    NavbarStore.listen(this.onChange)\r\n\r\n    $(document).ajaxStart(() => NavbarActions.updateAjaxAnimation('fadeIn'))\r\n    $(document).ajaxComplete(() => NavbarActions.updateAjaxAnimation('fadeOut'))\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    NavbarStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <nav className='navbar navbar-default navbar-static-top'>\r\n        <div className='navbar-header'>\r\n          <button type='button'\r\n            className='navbar-toggle collapsed'\r\n            data-toggle='collapse'\r\n            data-target='#navbar'>\r\n            <span className='sr-only'>Toggle navigation</span>\r\n            <span className='icon-bar' />\r\n            <span className='icon-bar' />\r\n            <span className='icon-bar' />\r\n          </button>\r\n          <Link to='/' className='navbar-brand'>\r\n            <span ref='triangles' className={'triangles animated' + this.state.ajaxAnimationClass}>\r\n              <div className='tri invert' />\r\n              <div className='tri invert' />\r\n              <div className='tri' />\r\n              <div className='tri invert' />\r\n              <div className='tri invert' />\r\n              <div className='tri' />\r\n              <div className='tri invert' />\r\n              <div className='tri' />\r\n              <div className='tri invert' />\r\n            </span>\r\n            MDB\r\n          </Link>\r\n        </div>\r\n        <div id='navbar' className='navbar-collapse collapse'>\r\n          <ul className='nav navbar-nav'>\r\n            <li>\r\n              <Link to='/'>Home</Link>\r\n            </li>\r\n            <li>\r\n              <Link to='/movie/add'>Add Movie</Link>\r\n            </li>\r\n          </ul>\r\n          <NavbarUserMenu />\r\n        </div>\r\n      </nav>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Navbar\r\n","import React, {Component} from 'react'\r\nimport FormStore from '../stores/FormStore'\r\nimport FormActions from '../actions/FormActions'\r\nimport UserActions from '../actions/UserActions'\r\nimport Form from './form/Form'\r\nimport TextGroup from './form/TextGroup'\r\nimport Submit from './form/Submit'\r\n\r\nclass UserLogin extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = FormStore.getState()\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    FormStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    FormStore.unlisten(this.onChange)\r\n  }\r\n\r\n  handleSubmit (event) {\r\n    event.preventDefault()\r\n\r\n    let username = this.state.user.username\r\n    let password = this.state.user.password\r\n\r\n    if (!username) {\r\n      return FormActions.usernameValidationFail()\r\n    }\r\n\r\n    if (!password) {\r\n      return FormActions.passwordValidationFail('Enter password')\r\n    }\r\n\r\n    UserActions.loginUser({username, password})\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <Form\r\n        title='Login'\r\n        handleSubmit={this.handleSubmit.bind(this)}\r\n        submitState={this.state.formSubmitState}\r\n        message={this.state.message}>\r\n\r\n        <TextGroup\r\n          type='text'\r\n          name='username'\r\n          label='Username'\r\n          value={this.state.user.username}\r\n          onChange={FormActions.handleInputChange}\r\n          validationState={this.state.usernameValidationState} />\r\n\r\n        <TextGroup\r\n          type='password'\r\n          name='password'\r\n          value={this.state.user.password}\r\n          label='Password'\r\n          onChange={FormActions.handleInputChange}\r\n          validationState={this.state.passwordValidationState}\r\n          message={this.state.message} />\r\n\r\n        <Submit type='btn-primary' value='Login' />\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserLogin\r\n","import React, {Component} from 'react'\r\nimport UserStore from '../stores/UserStore'\r\nimport UserInfo from '../components/sub-components/UserInfo'\r\nimport UserRatedMovies from '../components/sub-components/UserRatedMovies'\r\nimport UserReviews from '../components/sub-components/UserReviews'\r\n\r\nclass UserProfile extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = UserStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    UserStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    UserStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div>\r\n        <UserInfo username={this.state.name} roles={this.state.roles} />\r\n        <UserRatedMovies votes={this.state.votes} />\r\n        <UserReviews reviews={this.state.reviews} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserProfile\r\n","import React, {Component} from 'react'\r\nimport FormStore from '../stores/FormStore'\r\nimport FormActions from '../actions/FormActions'\r\nimport UserActions from '../actions/UserActions'\r\nimport Form from '../components/form/Form'\r\nimport TextGroup from '../components/form/TextGroup'\r\nimport RadioGroup from '../components/form/RadioGroup'\r\nimport RadioElement from '../components/form/RadioElement'\r\nimport Submit from '../components/form/Submit'\r\n\r\nclass UserRegister extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = FormStore.getState()\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    FormStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    FormStore.unlisten(this.onChange)\r\n  }\r\n\r\n  handleSubmit (event) {\r\n    event.preventDefault()\r\n\r\n    let data = {\r\n      username: this.state.user.username,\r\n      password: this.state.user.password,\r\n      confirmedPassword: this.state.user.confirmedPassword,\r\n      firstName: this.state.user.firstName,\r\n      lastName: this.state.user.lastName,\r\n      age: this.state.user.age,\r\n      gender: this.state.user.gender\r\n    }\r\n\r\n    if (!data.username) {\r\n      return FormActions.usernameValidationFail()\r\n    }\r\n\r\n    if (!data.password ||\r\n       !data.confirmedPassword ||\r\n        data.password !== data.confirmedPassword) {\r\n      return FormActions.passwordValidationFail('Invalid password, or passwords do not match')\r\n    }\r\n\r\n    if (!data.firstName || data.firstName.length < 2) {\r\n      return FormActions.firstNameValidationFail()\r\n    }\r\n\r\n    if (!data.lastName || data.lastName.length < 2) {\r\n      return FormActions.lastNameValidationFail()\r\n    }\r\n\r\n    if (!data.age || parseInt(data.age) < 0 || parseInt(data.age) > 120) {\r\n      return FormActions.ageValidationFail()\r\n    }\r\n\r\n    if (data.gender !== 'Male' && data.gender !== 'Female') {\r\n      return FormActions.genderValidationFail()\r\n    }\r\n\r\n    UserActions.registerUser(data)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <Form\r\n        title='Register'\r\n        handleSubmit={this.handleSubmit.bind(this)}\r\n        submitState={this.state.formSubmitState}\r\n        message={this.state.message}>\r\n        <TextGroup\r\n          type='text'\r\n          name='username'\r\n          label='Username'\r\n          value={this.state.user.username}\r\n          autoFocus\r\n          onChange={FormActions.handleInputChange}\r\n          validationState={this.state.usernameValidationState}\r\n          message={this.state.message} />\r\n\r\n        <TextGroup\r\n          type='password'\r\n          name='password'\r\n          label='Password'\r\n          value={this.state.user.password}\r\n          onChange={FormActions.handleInputChange}\r\n          validationState={this.state.passwordValidationState}\r\n          message={this.state.message} />\r\n\r\n        <TextGroup\r\n          type='password'\r\n          name='confirmedPassword'\r\n          label='Confirm Password'\r\n          value={this.state.user.confirmedPassword}\r\n          onChange={FormActions.handleInputChange}\r\n          validationState={this.state.passwordValidationState}\r\n          message={this.state.message} />\r\n\r\n        <TextGroup\r\n          type='text'\r\n          name='firstName'\r\n          label='First Name'\r\n          onChange={FormActions.handleInputChange}\r\n          value={this.state.user.firstName}\r\n          validationState={this.state.firstNameValidationState}\r\n          message={this.state.message} />\r\n\r\n        <TextGroup\r\n          type='text'\r\n          name='lastName'\r\n          label='Last Name'\r\n          onChange={FormActions.handleInputChange}\r\n          value={this.state.user.lastName}\r\n          validationState={this.state.lastNameValidationState}\r\n          message={this.state.message} />\r\n\r\n        <TextGroup\r\n          type='number'\r\n          name='age'\r\n          label='Age'\r\n          onChange={FormActions.handleInputChange}\r\n          value={this.state.user.age}\r\n          validationState={this.state.ageValidationState}\r\n          message={this.state.message} />\r\n\r\n        <RadioGroup\r\n          validationState={this.state.genderValidationState}\r\n          message={this.state.message}>\r\n          <RadioElement\r\n            groupName='gender'\r\n            value='Male'\r\n            selectedValue={this.state.user.gender}\r\n            onChange={FormActions.handleInputChange} />\r\n\r\n          <RadioElement\r\n            groupName='gender'\r\n            value='Female'\r\n            selectedValue={this.state.user.gender}\r\n            onChange={FormActions.handleInputChange} />\r\n        </RadioGroup>\r\n\r\n        <Submit\r\n          type='btn-primary'\r\n          value='Register' />\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserRegister\r\n","import React from 'react'\r\n\r\nconst Form = (props) => (\r\n  <div className='container'>\r\n    <div className='row flipInX animated'>\r\n      <div className='col-sm-8'>\r\n        <div className='panel panel-default'>\r\n          <div className='panel-heading'>\r\n            { props.title }\r\n          </div>\r\n          <div className='panel-body'>\r\n            <form onSubmit={props.handleSubmit}>\r\n              <div className={`form-group ${props.submitState}`}>\r\n                <span className={`help-block`}>{ props.message }</span>\r\n              </div>\r\n              { props.children }\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nexport default Form\r\n","import React from 'react'\r\n\r\nconst RadioElement = (props) => (\r\n  <div className='radio radio-inline'>\r\n    <input\r\n      type='radio'\r\n      name={props.groupName}\r\n      id={props.value.toLowerCase()}\r\n      value={props.value}\r\n      checked={props.selectedValue === props.value}\r\n      onChange={props.onChange} />\r\n    <label htmlFor={props.value.toLowerCase()}>\r\n      {props.value}\r\n    </label>\r\n  </div>\r\n)\r\n\r\nexport default RadioElement\r\n","import React from 'react'\r\n\r\nconst RadioGroup = (props) => (\r\n  <div className={`form-group ${props.validationState}`}>\r\n    <span className='help-block'>\r\n      {props.message}\r\n    </span>\r\n    {props.children}\r\n  </div>\r\n)\r\n\r\nexport default RadioGroup\r\n","import React from 'react'\r\n\r\nconst Submit = (props) => (\r\n  <input\r\n    type='submit'\r\n    className={`btn ${props.type}`} value={props.value} />\r\n)\r\n\r\nexport default Submit\r\n","import React from 'react'\r\n\r\nconst TextGroup = (props) => (\r\n  <div className={'form-group ' + props.validationState}>\r\n    <label className='control-label'>\r\n      { props.label }\r\n    </label>\r\n    <input\r\n      type={props.type}\r\n      name={props.name}\r\n      className='form-control'\r\n      value={props.value}\r\n      onChange={props.onChange}\r\n      autoFocus={props.autoFocus} />\r\n    <span className='help-block'>\r\n      { props.message }\r\n    </span>\r\n  </div>\r\n)\r\n\r\nexport default TextGroup\r\n","import React, { Component } from 'react'\r\nimport MovieCardInfo from './MovieCardInfo'\r\nimport MovieCardPoster from './MovieCardPoster'\r\nimport MovieCommentsPanel from './MovieCommentsPanel'\r\nimport MovieVotePanel from './MovieVotePanel'\r\nimport MoviePanelToggles from './MoviePanelToggles'\r\n\r\nclass MovieCard extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      showVotePanel: false,\r\n      showCommentsPanel: false\r\n    }\r\n  }\r\n\r\n  toggleCommentsPanel () {\r\n    this.setState(prevState => ({\r\n      showCommentsPanel: !prevState.showCommentsPanel,\r\n      showVotePanel: false\r\n    }))\r\n  }\r\n\r\n  toggleVotePanel () {\r\n    this.setState(prevState => ({\r\n      showVotePanel: !prevState.showVotePanel,\r\n      showCommentsPanel: false\r\n    }))\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='animated fade-in'>\r\n        <div className='media movie'>\r\n          <span className='position pull-left'>{this.props.index + 1}</span>\r\n          <MovieCardPoster moviePosterUrl={this.props.movie.moviePosterUrl} />\r\n          <MovieCardInfo movie={this.props.movie} />\r\n          <MoviePanelToggles\r\n            toggleCommentsPanel={this.toggleCommentsPanel.bind(this)}\r\n            toggleVotePanel={this.toggleVotePanel.bind(this)}\r\n            showCommentsPanel={this.state.showCommentsPanel}\r\n            showVotePanel={this.state.showVotePanel}\r\n            movieId={this.props.movie._id} />\r\n        </div>\r\n        { this.state.showVotePanel ? <MovieVotePanel movieId={this.props.movie._id} /> : null }\r\n        { this.state.showCommentsPanel ? <MovieCommentsPanel movieId={this.props.movie._id} /> : null }\r\n        <div id='clear' />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MovieCard\r\n","import React, {Component} from 'react'\r\nimport {Link} from 'react-router'\r\n\r\nclass MovieCardInfo extends Component {\r\n  render () {\r\n    let genres = this.props.movie.genres.map(genre => {\r\n      return (\r\n        <strong key={this.props.movie._id + genre}>{genre}</strong>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className='media-body'>\r\n        <h4 className='media-heading'>\r\n          <Link to={`/movie/${this.props.movie._id}/${this.props.movie.name}`}>\r\n            {this.props.movie.name}\r\n          </Link>\r\n        </h4>\r\n        <small>Genres: {genres}</small>\r\n        <br />\r\n        <p>{this.props.movie.description}</p>\r\n        <span className='votes'>Votes:\r\n        { /* <strong>{this.state.movieVotes}</strong> */ }\r\n        </span>\r\n        {/* {nodes.rating} */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MovieCardInfo\r\n","import React, {Component} from 'react'\r\n\r\nclass MovieCardPoster extends Component {\r\n  render () {\r\n    let poster\r\n    if (this.props.moviePosterUrl) {\r\n      poster = (\r\n        <img className='media-object' src={this.props.moviePosterUrl} />\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className='pull-left thumb-lg'>\r\n        {poster}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MovieCardPoster\r\n","import React, {Component} from 'react'\r\n\r\nclass MovieCommentsPanel extends Component {\r\n  render () {\r\n    return (\r\n      <div className='list-group'>\r\n        <h3 className='col-sm-3'>Comments:</h3>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MovieCommentsPanel\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router'\r\n\r\nclass MoviePanelToggles extends Component {\r\n  render () {\r\n    return (\r\n      <div className='pull-right btn-group'>\r\n        <a className='btn btn-primary'\r\n          onClick={this.props.toggleCommentsPanel}>\r\n          {this.props.showCommentsPanel ? 'Hide' : 'Comments'}\r\n        </a>\r\n        <a className='btn btn-primary'\r\n          onClick={this.props.toggleVotePanel}>\r\n          {this.props.showVotePanel ? 'Hide' : 'Vote'}\r\n        </a>\r\n        <Link to={`/movie/${this.props.movieId}/review/add`} className='btn btn-warning'>\r\n          Write review\r\n        </Link>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MoviePanelToggles\r\n","import React, {Component} from 'react'\r\n\r\nclass MovieVotePanel extends Component {\r\n  render () {\r\n    return (\r\n      <div className='col-sm-4 col-xs-offset-8 list-group-item animated fadeIn vote'>\r\n        <div className='media'>\r\n          <div className='media-body'>\r\n            Hello from MovieVotePanel\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MovieVotePanel\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router'\r\n\r\nimport UserActions from '../../actions/UserActions'\r\nimport UserStore from '../../stores/UserStore'\r\n\r\nclass NavbarUserMenu extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = UserStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    UserStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    UserStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    let userMenu\r\n\r\n    if (!this.state.loggedInUserId) {\r\n      userMenu = (\r\n        <ul className='nav navbar-nav pull-right'>\r\n          <li>\r\n            <Link to='/user/login'>Login</Link>\r\n          </li>\r\n          <li>\r\n            <Link to='/user/register'>Register</Link>\r\n          </li>\r\n        </ul>\r\n      )\r\n    } else {\r\n      userMenu = (\r\n        <ul className='nav navbar-nav pull-right'>\r\n          <li>\r\n            <Link to={`/user/profile/${this.state.loggedInUserId}`}>Profile</Link>\r\n          </li>\r\n          <li>\r\n            <a href='#' onClick={UserActions.logoutUser}>Logout</a>\r\n          </li>\r\n        </ul>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div>{userMenu}</div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NavbarUserMenu\r\n","import React, {Component} from 'react'\r\n\r\nclass UserInfo extends Component {\r\n  render () {\r\n    let roles\r\n    if (this.props.roles) {\r\n      roles = this.props.roles.map((role, index) => {\r\n        return (\r\n          <h4 key={index} className='lead'>\r\n            <strong>{role}</strong>\r\n          </h4>\r\n        )\r\n      })\r\n    }\r\n\r\n    return (\r\n      <div className='container profile-container'>\r\n        <div className='profile-img'>\r\n          <img src='/images/user-default.png' />\r\n        </div>\r\n        <div className='profile-info clearfix'>\r\n          <h2><strong>{ this.props.username }</strong></h2>\r\n          <h4 className='lead'>Roles:</h4>\r\n          { roles }\r\n          <p>{ this.props.information }</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserInfo\r\n","import React, {Component} from 'react'\r\nimport UserRatedMoviesPanel from '../sub-components/UserRatedMoviesPanel'\r\n\r\nclass UserRatedMovies extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      showRatedMoviesPanel: false\r\n    }\r\n  }\r\n\r\n  toggleRatedMovies () {\r\n    this.setState(prevState => ({\r\n      showRatedMoviesPanel: !prevState.showRatedMoviesPanel\r\n    }))\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='container profile-container'>\r\n        <div className='profile-stats clearfix'>\r\n          <ul>\r\n            <li>\r\n              <span className='stats-number'>{this.props.votes ? this.props.votes.length : 0 }</span>Votes\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className='pull-right btn-group'>\r\n          <a className='btn btn-primary' onClick={this.toggleRatedMovies.bind(this)}>\r\n            { this.state.showRatedMoviesPanel ? 'Hide' : 'Rated Movies' }\r\n          </a>\r\n        </div>\r\n        { this.state.showRatedMoviesPanel ? <UserRatedMoviesPanel movies={this.props.votes} /> : null }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserRatedMovies\r\n","import React, {Component} from 'react'\r\n\r\nclass UserRatedMoviesPanel extends Component {\r\n  render () {\r\n    return (\r\n      <div className='container'>\r\n        <div className='list-group'>\r\n          Hello from UserRatedMoviesPanel\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserRatedMoviesPanel\r\n","import React, {Component} from 'react'\r\nimport UserReviewsPanel from '../sub-components/UserReviewsPanel'\r\n\r\nclass UserReviews extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      showReviewsPanel: false\r\n    }\r\n  }\r\n\r\n  toggleReviews () {\r\n    this.setState(prevState => ({\r\n      showReviewsPanel: !prevState.showReviewsPanel\r\n    }))\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='container profile-container'>\r\n        <div className='profile-stats clearfix'>\r\n          <ul>\r\n            <li><span className='stats-number'>{this.props.reviews ? this.props.reviews.length : 0}</span>Reviews</li>\r\n          </ul>\r\n        </div>\r\n        <div className='pull-right btn-group'>\r\n          <a className='btn btn-primary'\r\n            onClick={this.toggleReviews.bind(this)}>\r\n            { this.state.showReviewsPanel ? 'Hide' : 'Reviews' }\r\n          </a>\r\n        </div>\r\n        { this.state.showReviewsPanel ? <UserReviewsPanel /> : null }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserReviews\r\n","import React, {Component} from 'react'\r\n\r\nclass UserReviewsPanel extends Component {\r\n  render () {\r\n    return (\r\n      <div className='container'>\r\n        <div className='list-group'>\r\n          Hello from UserReviewsPanel\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserReviewsPanel\r\n","import React from 'react'\r\nimport Router from 'react-router'\r\nimport ReactDOM from 'react-dom'\r\nimport createBrowserHistory from 'history/lib/createBrowserHistory'\r\n\r\nimport routes from './routes'\r\n\r\nlet history = createBrowserHistory()\r\n\r\nReactDOM.render(\r\n  <Router history={history}>{ routes }</Router>,\r\n  document.getElementById('app')\r\n)\r\n","import React from 'react'\r\nimport { Route } from 'react-router'\r\n\r\nimport App from './components/App'\r\nimport Home from './components/Home'\r\nimport MovieAdd from './components/MovieAdd'\r\nimport UserProfile from './components/UserProfile'\r\nimport UserRegister from './components/UserRegister'\r\nimport UserLogin from './components/UserLogin'\r\nimport authorize from './utilities/Authorize'\r\n\r\nexport default (\r\n  <Route component={App}>\r\n    <Route path='/' component={Home} />\r\n    <Route path='/movie/add' component={authorize(MovieAdd)} />\r\n    <Route path='/user/profile/:userId' component={authorize(UserProfile)} />\r\n    <Route path='/user/register' component={UserRegister} />\r\n    <Route path='/user/login' component={UserLogin} />\r\n  </Route>\r\n)\r\n","import alt from '../alt'\r\nimport FormActions from '../actions/FormActions'\r\nimport UserActions from '../actions/UserActions'\r\n\r\nclass FormStore {\r\n  constructor () {\r\n    this.bindActions(FormActions)\r\n    this.bindListeners({\r\n      onRegisterUserFail: UserActions.registerUserFail,\r\n      onRegisterUserSuccess: UserActions.registerUserSuccess,\r\n      onLoginUserSuccess: UserActions.loginUserSuccess,\r\n      onLoginUserFail: UserActions.loginUserFail\r\n    })\r\n\r\n    this.user = {\r\n      username: '',\r\n      password: '',\r\n      confirmedPassword: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      age: '',\r\n      gender: ''\r\n    }\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.firstNameValidationState = ''\r\n    this.lastNameValidationState = ''\r\n    this.ageValidationState = ''\r\n    this.genderValidationState = ''\r\n    this.formSubmitState = ''\r\n    this.message = ''\r\n  }\r\n\r\n  onRegisterUserSuccess () {\r\n    this.formSubmitState = 'has-success'\r\n    this.message = 'User register successful'\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.firstNameValidationState = ''\r\n    this.lastNameValidationState = ''\r\n    this.ageValidationState = ''\r\n    this.genderValidationState = ''\r\n    this.user = {\r\n      username: '',\r\n      password: '',\r\n      confirmedPassword: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      age: '',\r\n      gender: ''\r\n    }\r\n  }\r\n\r\n  onRegisterUserFail (err) {\r\n    if (err.code === 11000) {\r\n      this.usernameValidationState = 'has-error'\r\n      this.message = 'Username already in use'\r\n      this.passwordValidationState = ''\r\n      this.firstNameValidationState = ''\r\n      this.lastNameValidationState = ''\r\n      this.ageValidationState = ''\r\n      this.genderValidationState = ''\r\n      return\r\n    }\r\n\r\n    this.formSubmitState = 'has-error'\r\n    this.message = err.errmsg\r\n  }\r\n\r\n  onLoginUserSuccess () {\r\n    this.formSubmitState = 'has-success'\r\n    this.message = 'User login successful'\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.user = {\r\n      username: '',\r\n      password: '',\r\n      confirmedPassword: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      age: '',\r\n      gender: ''\r\n    }\r\n  }\r\n\r\n  onLoginUserFail (err) {\r\n    this.formSubmitState = 'has-error'\r\n    this.message = err.message\r\n    this.usernameValidationState = 'has-error'\r\n    this.passwordValidationState = 'has-error'\r\n  }\r\n\r\n  onUsernameValidationFail () {\r\n    this.usernameValidationState = 'has-error'\r\n    this.passwordValidationState = ''\r\n    this.firstNameValidationState = ''\r\n    this.lastNameValidationState = ''\r\n    this.ageValidationState = ''\r\n    this.genderValidationState = ''\r\n    this.formSubmitState = ''\r\n    this.message = 'Enter username'\r\n  }\r\n\r\n  onPasswordValidationFail (message) {\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = 'has-error'\r\n    this.firstNameValidationState = ''\r\n    this.lastNameValidationState = ''\r\n    this.ageValidationState = ''\r\n    this.genderValidationState = ''\r\n    this.formSubmitState = ''\r\n    this.message = message\r\n  }\r\n\r\n  onFirstNameValidationFail () {\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.genderValidationState = ''\r\n    this.firstNameValidationState = 'has-error'\r\n    this.lastNameValidationState = ''\r\n    this.ageValidationState = ''\r\n    this.formSubmitState = ''\r\n    this.message = 'First Name should start with capital letter and should be at least 2 letters'\r\n  }\r\n\r\n  onLastNameValidationFail () {\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.genderValidationState = ''\r\n    this.firstNameValidationState = ''\r\n    this.lastNameValidationState = 'has-error'\r\n    this.ageValidationState = ''\r\n    this.formSubmitState = ''\r\n    this.message = 'Last Name should start with capital letter and should be at least 2 letters'\r\n  }\r\n\r\n  onAgeValidationFail () {\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.genderValidationState = ''\r\n    this.firstNameValidationState = ''\r\n    this.lastNameValidationState = ''\r\n    this.ageValidationState = 'has-error'\r\n    this.formSubmitState = ''\r\n    this.message = 'Age should be between 0 and 120'\r\n  }\r\n\r\n  onGenderValidationFail () {\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.firstNameValidationState = ''\r\n    this.lastNameValidationState = ''\r\n    this.ageValidationState = ''\r\n    this.genderValidationState = 'has-error'\r\n    this.formSubmitState = ''\r\n    this.message = 'Gender should be Male or Female. Select one'\r\n  }\r\n\r\n  onHandleInputChange (event) {\r\n    this.user[event.target.name] = event.target.value\r\n  }\r\n\r\n  onUnauthorizedAccessAttempt () {\r\n    this.formSubmitState = 'has-error'\r\n    this.message = 'Please login'\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n  }\r\n}\r\n\r\nexport default alt.createStore(FormStore)\r\n","import alt from '../alt'\r\nimport MovieAddActions from '../actions/MovieAddActions'\r\nimport Helpers from '../utilities/Helpers'\r\n\r\nclass MovieAddStore {\r\n  constructor () {\r\n    this.bindActions(MovieAddActions)\r\n\r\n    this.name = ''\r\n    this.description = ''\r\n    this.genres = []\r\n    this.genresValidationState = ''\r\n    this.nameValidationState = ''\r\n    this.moviePosterUrl = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onAddMovieSuccess () {\r\n    console.log('Added movie!')\r\n    this.name = ''\r\n    this.description = ''\r\n    this.genres = []\r\n    this.genresValidationState = ''\r\n    this.nameValidationState = ''\r\n    this.moviePosterUrl = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onAddMovieFail (err) {\r\n    console.log('Failed to add movie', err)\r\n  }\r\n\r\n  onHandleNameChange (e) {\r\n    this.name = e.target.value\r\n    this.nameValidationState = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onHandleDescriptionChange (e) {\r\n    this.description = e.target.value\r\n    this.genresValidationState = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onHandleGenresChange (e) {\r\n    let genreValue = e.target.value\r\n    if (this.genres.indexOf(genreValue) === -1) {\r\n      this.genres = Helpers.appendToArray(genreValue, this.genres)\r\n    } else {\r\n      this.genres = Helpers.removeFromArray(genreValue, this.genres)\r\n    }\r\n    this.genresValidationState = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onNameValidationFail () {\r\n    this.nameValidationState = 'has-error'\r\n    this.helpBlock = 'Enter movie name'\r\n  }\r\n\r\n  onGenresValidationFail () {\r\n    this.genresValidationState = 'has-error'\r\n    this.helpBlock = 'Select at least one movie genre'\r\n  }\r\n}\r\n\r\nexport default alt.createStore(MovieAddStore)\r\n","import alt from '../alt'\r\nimport MovieActions from '../actions/MovieActions'\r\n\r\nclass MovieStore {\r\n  constructor () {\r\n    this.bindActions(MovieActions)\r\n    this.topTenMovies = []\r\n    this.mostRecentMovies = []\r\n  }\r\n\r\n  onAddMovieToTopTen (movie) {\r\n    this.topTenMovies.push(movie)\r\n  }\r\n\r\n  onEmptyTopTenMovies () {\r\n    this.topTenMovies = []\r\n  }\r\n\r\n  onGetTopTenMoviesSuccess (movies) {\r\n    this.topTenMovies = movies\r\n  }\r\n\r\n  onGetTopTenMoviesFail (err) {\r\n    console.log('Could not connect to DB', err)\r\n  }\r\n\r\n  onGetFiveRecentMoviesSuccess (movies) {\r\n    this.mostRecentMovies = movies\r\n  }\r\n\r\n  onGetFiveRecentMoviesFail () {\r\n    console.log('Could not connect to DB')\r\n  }\r\n}\r\n\r\nexport default alt.createStore(MovieStore)\r\n","import alt from '../alt'\r\nimport NavbarActions from '../actions/NavbarActions'\r\n\r\nclass NavbarStore {\r\n  constructor () {\r\n    this.bindActions(NavbarActions)\r\n\r\n    this.ajaxAnimationClass = ''\r\n  }\r\n\r\n  onUpdateAjaxAnimation (animationClass) {\r\n    this.ajaxAnimationClass = animationClass\r\n  }\r\n}\r\n\r\nexport default alt.createStore(NavbarStore)\r\n","import alt from '../alt'\r\nimport UserActions from '../actions/UserActions'\r\n\r\nclass UserStore {\r\n  constructor () {\r\n    this.bindActions(UserActions)\r\n\r\n    this.loggedInUserId = ''\r\n    this.username = ''\r\n    this.roles = []\r\n  }\r\n\r\n  onLoginUserSuccess (user) {\r\n    this.loggedInUserId = user._id\r\n    this.username = user.username\r\n    this.roles = user.roles\r\n  }\r\n\r\n  onLoginUserFail () {\r\n    console.log('Failed login attempt')\r\n  }\r\n\r\n  onLogoutUserSuccess () {\r\n    this.loggedInUserId = ''\r\n    this.username = ''\r\n    this.roles = []\r\n  }\r\n}\r\n\r\nexport default alt.createStore(UserStore)\r\n","import React, {Component} from 'react'\r\nimport UserStore from '../stores/UserStore'\r\nimport FormActions from '../actions/FormActions'\r\n\r\nexport default function authorize (ChildComponent) {\r\n  return class Authorization extends Component {\r\n    constructor (props) {\r\n      super(props)\r\n\r\n      this.state = UserStore.getState()\r\n      this.onChange = this.onChange.bind(this)\r\n    }\r\n\r\n    onChange (state) {\r\n      this.setState(state)\r\n    }\r\n\r\n    componentWillMount () {\r\n      if (this.state.loggedInUserId === '') {\r\n        this.props.history.pushState(null, '/user/login')\r\n        FormActions.unauthorizedAccessAttempt()\r\n      }\r\n    }\r\n\r\n    componentDidMount () {\r\n      UserStore.listen(this.onChange)\r\n    }\r\n\r\n    componentWillUnmount () {\r\n      UserStore.unlisten(this.onChange)\r\n    }\r\n\r\n    render () {\r\n      return <ChildComponent {...this.props} />\r\n    }\r\n  }\r\n}\r\n","class Helpers {\r\n  static appendToArray (value, array) {\r\n    array.push(value)\r\n    return array\r\n  }\r\n\r\n  static prependToArray (value, array) {\r\n    array.unshift(value)\r\n    return array\r\n  }\r\n\r\n  static removeFromArray (value, array) {\r\n    let index = array.indexOf(value)\r\n    if (index !== -1) {\r\n      array.splice(index, 1)\r\n    }\r\n\r\n    return array\r\n  }\r\n}\r\n\r\nexport default Helpers\r\n","const API_KEY = '71aabd79c7082bcacabc96877ac7238b'\r\nconst SEARCH_BASE_URL = 'https://api.themoviedb.org/3/search/movie'\r\nconst POSTER_BASE_URL = 'https://image.tmdb.org/t/p/w500'\r\nconst UNVERIFIED_MOVIE_POSTER_URL = '/images/movie-unverified.png'\r\nconst MISSING_DATA_POSTER_URL = '/images/movie-missing-data.jpg'\r\n\r\nexport default class RequesterTMDB {\r\n  static getMoviePoster (movieName) {\r\n    return new Promise((resolve, reject) => {\r\n      let request = {\r\n        method: 'get',\r\n        url: `${SEARCH_BASE_URL}?api_key=${API_KEY}&query=${movieName}`\r\n      }\r\n      $.ajax(request)\r\n        .done(tmdbResponse => {\r\n          console.log('TMDB Response', tmdbResponse)\r\n          if (tmdbResponse.total_results === 0) {\r\n            resolve({posterUrl: UNVERIFIED_MOVIE_POSTER_URL})\r\n            return\r\n          }\r\n\r\n          let posterPath = tmdbResponse.results[0].poster_path\r\n          if (posterPath === null) {\r\n            resolve({posterUrl: MISSING_DATA_POSTER_URL})\r\n            return\r\n          }\r\n\r\n          resolve({\r\n            posterUrl: `${POSTER_BASE_URL}/${posterPath}`,\r\n            overview: tmdbResponse.results[0].overview\r\n          })\r\n        })\r\n        .fail(err => {\r\n          reject(err)\r\n        })\r\n    })\r\n  }\r\n}\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYWx0L2xpYi9hY3Rpb25zL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2FsdC9saWIvZnVuY3Rpb25zLmpzIiwibm9kZV9tb2R1bGVzL2FsdC9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYWx0L2xpYi9zdG9yZS9BbHRTdG9yZS5qcyIsIm5vZGVfbW9kdWxlcy9hbHQvbGliL3N0b3JlL1N0b3JlTWl4aW4uanMiLCJub2RlX21vZHVsZXMvYWx0L2xpYi9zdG9yZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9hbHQvbGliL3V0aWxzL0FsdFV0aWxzLmpzIiwibm9kZV9tb2R1bGVzL2FsdC9saWIvdXRpbHMvU3RhdGVGdW5jdGlvbnMuanMiLCJub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9kZWVwLWVxdWFsL2xpYi9pc19hcmd1bWVudHMuanMiLCJub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9saWIva2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9mbHV4L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2ZsdXgvbGliL0Rpc3BhdGNoZXIuanMiLCJub2RlX21vZHVsZXMvZmx1eC9ub2RlX21vZHVsZXMvZmJqcy9saWIvaW52YXJpYW50LmpzIiwibm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL0FjdGlvbnMuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvQXN5bmNVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9ET01TdGF0ZVN0b3JhZ2UuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvRE9NVXRpbHMuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvY3JlYXRlQnJvd3Nlckhpc3RvcnkuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvY3JlYXRlRE9NSGlzdG9yeS5qcyIsIm5vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9jcmVhdGVIaXN0b3J5LmpzIiwibm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL2NyZWF0ZUxvY2F0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL2RlcHJlY2F0ZS5qcyIsIm5vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9leHRyYWN0UGF0aC5qcyIsIm5vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9wYXJzZVBhdGguanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvcnVuVHJhbnNpdGlvbkhvb2suanMiLCJub2RlX21vZHVsZXMvaW52YXJpYW50L2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvaXMtcHJvbWlzZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdHJhbnNtaXR0ZXIvZGlzdC90cmFuc21pdHRlci5qcyIsIm5vZGVfbW9kdWxlcy93YXJuaW5nL2Jyb3dzZXIuanMiLCJzb3VyY2UvY2xpZW50L2FjdGlvbnMvRm9ybUFjdGlvbnMuanMiLCJzb3VyY2UvY2xpZW50L2FjdGlvbnMvTW92aWVBY3Rpb25zLmpzIiwic291cmNlL2NsaWVudC9hY3Rpb25zL01vdmllQWRkQWN0aW9ucy5qcyIsInNvdXJjZS9jbGllbnQvYWN0aW9ucy9OYXZiYXJBY3Rpb25zLmpzIiwic291cmNlL2NsaWVudC9hY3Rpb25zL1VzZXJBY3Rpb25zLmpzIiwic291cmNlL2NsaWVudC9hbHQuanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvQXBwLmpzIiwic291cmNlL2NsaWVudC9jb21wb25lbnRzL0Zvb3Rlci5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9Ib21lLmpzIiwic291cmNlL2NsaWVudC9jb21wb25lbnRzL01vdmllQWRkLmpzIiwic291cmNlL2NsaWVudC9jb21wb25lbnRzL05hdmJhci5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9Vc2VyTG9naW4uanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvVXNlclByb2ZpbGUuanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvVXNlclJlZ2lzdGVyLmpzIiwic291cmNlL2NsaWVudC9jb21wb25lbnRzL2Zvcm0vRm9ybS5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9mb3JtL1JhZGlvRWxlbWVudC5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9mb3JtL1JhZGlvR3JvdXAuanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvZm9ybS9TdWJtaXQuanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvZm9ybS9UZXh0R3JvdXAuanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvc3ViLWNvbXBvbmVudHMvTW92aWVDYXJkLmpzIiwic291cmNlL2NsaWVudC9jb21wb25lbnRzL3N1Yi1jb21wb25lbnRzL01vdmllQ2FyZEluZm8uanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvc3ViLWNvbXBvbmVudHMvTW92aWVDYXJkUG9zdGVyLmpzIiwic291cmNlL2NsaWVudC9jb21wb25lbnRzL3N1Yi1jb21wb25lbnRzL01vdmllQ29tbWVudHNQYW5lbC5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9zdWItY29tcG9uZW50cy9Nb3ZpZVBhbmVsVG9nZ2xlcy5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9zdWItY29tcG9uZW50cy9Nb3ZpZVZvdGVQYW5lbC5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9zdWItY29tcG9uZW50cy9OYXZiYXJVc2VyTWVudS5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9zdWItY29tcG9uZW50cy9Vc2VySW5mby5qcyIsInNvdXJjZS9jbGllbnQvY29tcG9uZW50cy9zdWItY29tcG9uZW50cy9Vc2VyUmF0ZWRNb3ZpZXMuanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvc3ViLWNvbXBvbmVudHMvVXNlclJhdGVkTW92aWVzUGFuZWwuanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvc3ViLWNvbXBvbmVudHMvVXNlclJldmlld3MuanMiLCJzb3VyY2UvY2xpZW50L2NvbXBvbmVudHMvc3ViLWNvbXBvbmVudHMvVXNlclJldmlld3NQYW5lbC5qcyIsInNvdXJjZS9jbGllbnQvbWFpbi5qcyIsInNvdXJjZS9jbGllbnQvcm91dGVzLmpzIiwic291cmNlL2NsaWVudC9zdG9yZXMvRm9ybVN0b3JlLmpzIiwic291cmNlL2NsaWVudC9zdG9yZXMvTW92aWVBZGRTdG9yZS5qcyIsInNvdXJjZS9jbGllbnQvc3RvcmVzL01vdmllU3RvcmUuanMiLCJzb3VyY2UvY2xpZW50L3N0b3Jlcy9OYXZiYXJTdG9yZS5qcyIsInNvdXJjZS9jbGllbnQvc3RvcmVzL1VzZXJTdG9yZS5qcyIsInNvdXJjZS9jbGllbnQvdXRpbGl0aWVzL0F1dGhvcml6ZS5qcyIsInNvdXJjZS9jbGllbnQvdXRpbGl0aWVzL0hlbHBlcnMuanMiLCJzb3VyY2UvY2xpZW50L3V0aWxpdGllcy9SZXF1ZXN0ZXJUTURCLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4WEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbk5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN0T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2pMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbFNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7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QVosRUFBUjtBQUNBO0FBQ0Q7O0FBRUQsY0FBSSxhQUFhLGFBQWEsT0FBYixDQUFxQixDQUFyQixFQUF3QixXQUF6QztBQUNBLGNBQUksZUFBZSxJQUFuQixFQUF5QjtBQUN2QixvQkFBUSxFQUFDLFdBQVcsdUJBQVosRUFBUjtBQUNBO0FBQ0Q7O0FBRUQsa0JBQVE7QUFDTix1QkFBYyxlQUFkLFNBQWlDLFVBRDNCO0FBRU4sc0JBQVUsYUFBYSxPQUFiLENBQXFCLENBQXJCLEVBQXdCO0FBRjVCLFdBQVI7QUFJRCxTQWxCSCxFQW1CRyxJQW5CSCxDQW1CUSxlQUFPO0FBQ1gsaUJBQU8sR0FBUDtBQUNELFNBckJIO0FBc0JELE9BM0JNLENBQVA7QUE0QkQ7Ozs7OztrQkE5QmtCLGEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzWydkZWZhdWx0J10gPSBtYWtlQWN0aW9uO1xuXG52YXIgX2Z1bmN0aW9ucyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucycpO1xuXG52YXIgZm4gPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfZnVuY3Rpb25zKTtcblxudmFyIF9BbHRVdGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL0FsdFV0aWxzJyk7XG5cbnZhciB1dGlscyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9BbHRVdGlscyk7XG5cbnZhciBfaXNQcm9taXNlID0gcmVxdWlyZSgnaXMtcHJvbWlzZScpO1xuXG52YXIgX2lzUHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc1Byb21pc2UpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmpbJ2RlZmF1bHQnXSA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIG1ha2VBY3Rpb24oYWx0LCBuYW1lc3BhY2UsIG5hbWUsIGltcGxlbWVudGF0aW9uLCBvYmopIHtcbiAgdmFyIGlkID0gdXRpbHMudWlkKGFsdC5fYWN0aW9uc1JlZ2lzdHJ5LCBTdHJpbmcobmFtZXNwYWNlKSArICcuJyArIFN0cmluZyhuYW1lKSk7XG4gIGFsdC5fYWN0aW9uc1JlZ2lzdHJ5W2lkXSA9IDE7XG5cbiAgdmFyIGRhdGEgPSB7IGlkOiBpZCwgbmFtZXNwYWNlOiBuYW1lc3BhY2UsIG5hbWU6IG5hbWUgfTtcblxuICB2YXIgZGlzcGF0Y2ggPSBmdW5jdGlvbiBkaXNwYXRjaChwYXlsb2FkKSB7XG4gICAgcmV0dXJuIGFsdC5kaXNwYXRjaChpZCwgcGF5bG9hZCwgZGF0YSk7XG4gIH07XG5cbiAgLy8gdGhlIGFjdGlvbiBpdHNlbGZcbiAgdmFyIGFjdGlvbiA9IGZ1bmN0aW9uIGFjdGlvbigpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICB2YXIgaW52b2NhdGlvblJlc3VsdCA9IGltcGxlbWVudGF0aW9uLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgdmFyIGFjdGlvblJlc3VsdCA9IGludm9jYXRpb25SZXN1bHQ7XG5cbiAgICAvLyBhc3luYyBmdW5jdGlvbnMgdGhhdCByZXR1cm4gcHJvbWlzZXMgc2hvdWxkIG5vdCBiZSBkaXNwYXRjaGVkXG4gICAgaWYgKGludm9jYXRpb25SZXN1bHQgIT09IHVuZGVmaW5lZCAmJiAhKDAsIF9pc1Byb21pc2UyWydkZWZhdWx0J10pKGludm9jYXRpb25SZXN1bHQpKSB7XG4gICAgICBpZiAoZm4uaXNGdW5jdGlvbihpbnZvY2F0aW9uUmVzdWx0KSkge1xuICAgICAgICAvLyBpbm5lciBmdW5jdGlvbiByZXN1bHQgc2hvdWxkIGJlIHJldHVybmVkIGFzIGFuIGFjdGlvbiByZXN1bHRcbiAgICAgICAgYWN0aW9uUmVzdWx0ID0gaW52b2NhdGlvblJlc3VsdChkaXNwYXRjaCwgYWx0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3BhdGNoKGludm9jYXRpb25SZXN1bHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpbnZvY2F0aW9uUmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHV0aWxzLndhcm4oJ0FuIGFjdGlvbiB3YXMgY2FsbGVkIGJ1dCBub3RoaW5nIHdhcyBkaXNwYXRjaGVkJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjdGlvblJlc3VsdDtcbiAgfTtcbiAgYWN0aW9uLmRlZmVyID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGFjdGlvbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcbiAgYWN0aW9uLmlkID0gaWQ7XG4gIGFjdGlvbi5kYXRhID0gZGF0YTtcblxuICAvLyBlbnN1cmUgZWFjaCByZWZlcmVuY2UgaXMgdW5pcXVlIGluIHRoZSBuYW1lc3BhY2VcbiAgdmFyIGNvbnRhaW5lciA9IGFsdC5hY3Rpb25zW25hbWVzcGFjZV07XG4gIHZhciBuYW1lc3BhY2VJZCA9IHV0aWxzLnVpZChjb250YWluZXIsIG5hbWUpO1xuICBjb250YWluZXJbbmFtZXNwYWNlSWRdID0gYWN0aW9uO1xuXG4gIC8vIGdlbmVyYXRlIGEgY29uc3RhbnRcbiAgdmFyIGNvbnN0YW50ID0gdXRpbHMuZm9ybWF0QXNDb25zdGFudChuYW1lc3BhY2VJZCk7XG4gIGNvbnRhaW5lcltjb25zdGFudF0gPSBpZDtcblxuICByZXR1cm4gYWN0aW9uO1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5pc011dGFibGVPYmplY3QgPSBpc011dGFibGVPYmplY3Q7XG5leHBvcnRzLmVhY2hPYmplY3QgPSBlYWNoT2JqZWN0O1xuZXhwb3J0cy5hc3NpZ24gPSBhc3NpZ247XG52YXIgaXNGdW5jdGlvbiA9IGV4cG9ydHMuaXNGdW5jdGlvbiA9IGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59O1xuXG5mdW5jdGlvbiBpc011dGFibGVPYmplY3QodGFyZ2V0KSB7XG4gIHZhciBDdG9yID0gdGFyZ2V0LmNvbnN0cnVjdG9yO1xuXG4gIHJldHVybiAhIXRhcmdldCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGFyZ2V0KSA9PT0gJ1tvYmplY3QgT2JqZWN0XScgJiYgaXNGdW5jdGlvbihDdG9yKSAmJiAhT2JqZWN0LmlzRnJvemVuKHRhcmdldCkgJiYgKEN0b3IgaW5zdGFuY2VvZiBDdG9yIHx8IHRhcmdldC50eXBlID09PSAnQWx0U3RvcmUnKTtcbn1cblxuZnVuY3Rpb24gZWFjaE9iamVjdChmLCBvKSB7XG4gIG8uZm9yRWFjaChmdW5jdGlvbiAoZnJvbSkge1xuICAgIE9iamVjdC5rZXlzKE9iamVjdChmcm9tKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBmKGtleSwgZnJvbVtrZXldKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFzc2lnbih0YXJnZXQpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNvdXJjZSA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBzb3VyY2VbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgZWFjaE9iamVjdChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiB0YXJnZXRba2V5XSA9IHZhbHVlO1xuICB9LCBzb3VyY2UpO1xuICByZXR1cm4gdGFyZ2V0O1xufSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9mbHV4ID0gcmVxdWlyZSgnZmx1eCcpO1xuXG52YXIgX1N0YXRlRnVuY3Rpb25zID0gcmVxdWlyZSgnLi91dGlscy9TdGF0ZUZ1bmN0aW9ucycpO1xuXG52YXIgU3RhdGVGdW5jdGlvbnMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfU3RhdGVGdW5jdGlvbnMpO1xuXG52YXIgX2Z1bmN0aW9ucyA9IHJlcXVpcmUoJy4vZnVuY3Rpb25zJyk7XG5cbnZhciBmbiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9mdW5jdGlvbnMpO1xuXG52YXIgX3N0b3JlID0gcmVxdWlyZSgnLi9zdG9yZScpO1xuXG52YXIgc3RvcmUgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfc3RvcmUpO1xuXG52YXIgX0FsdFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy9BbHRVdGlscycpO1xuXG52YXIgdXRpbHMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfQWx0VXRpbHMpO1xuXG52YXIgX2FjdGlvbnMgPSByZXF1aXJlKCcuL2FjdGlvbnMnKTtcblxudmFyIF9hY3Rpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FjdGlvbnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmpbJ2RlZmF1bHQnXSA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH0gLyogZ2xvYmFsIHdpbmRvdyAqL1xuXG5cbnZhciBBbHQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEFsdCgpIHtcbiAgICB2YXIgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWx0KTtcblxuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuc2VyaWFsaXplID0gY29uZmlnLnNlcmlhbGl6ZSB8fCBKU09OLnN0cmluZ2lmeTtcbiAgICB0aGlzLmRlc2VyaWFsaXplID0gY29uZmlnLmRlc2VyaWFsaXplIHx8IEpTT04ucGFyc2U7XG4gICAgdGhpcy5kaXNwYXRjaGVyID0gY29uZmlnLmRpc3BhdGNoZXIgfHwgbmV3IF9mbHV4LkRpc3BhdGNoZXIoKTtcbiAgICB0aGlzLmJhdGNoaW5nRnVuY3Rpb24gPSBjb25maWcuYmF0Y2hpbmdGdW5jdGlvbiB8fCBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH07XG4gICAgdGhpcy5hY3Rpb25zID0geyBnbG9iYWw6IHt9IH07XG4gICAgdGhpcy5zdG9yZXMgPSB7fTtcbiAgICB0aGlzLnN0b3JlVHJhbnNmb3JtcyA9IGNvbmZpZy5zdG9yZVRyYW5zZm9ybXMgfHwgW107XG4gICAgdGhpcy50cmFwQXN5bmMgPSBmYWxzZTtcbiAgICB0aGlzLl9hY3Rpb25zUmVnaXN0cnkgPSB7fTtcbiAgICB0aGlzLl9pbml0U25hcHNob3QgPSB7fTtcbiAgICB0aGlzLl9sYXN0U25hcHNob3QgPSB7fTtcbiAgfVxuXG4gIEFsdC5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZGlzcGF0Y2goYWN0aW9uLCBkYXRhLCBkZXRhaWxzKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB0aGlzLmJhdGNoaW5nRnVuY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE4KS5zdWJzdHIoMiwgMTYpO1xuXG4gICAgICAgIC8vIHN1cHBvcnQgc3RyYWlnaHQgZGlzcGF0Y2hpbmcgb2YgRlNBLXN0eWxlIGFjdGlvbnNcbiAgICAgICAgaWYgKGFjdGlvbi5oYXNPd25Qcm9wZXJ0eSgndHlwZScpICYmIGFjdGlvbi5oYXNPd25Qcm9wZXJ0eSgncGF5bG9hZCcpKSB7XG4gICAgICAgICAgdmFyIGZzYURldGFpbHMgPSB7XG4gICAgICAgICAgICBpZDogYWN0aW9uLnR5cGUsXG4gICAgICAgICAgICBuYW1lc3BhY2U6IGFjdGlvbi50eXBlLFxuICAgICAgICAgICAgbmFtZTogYWN0aW9uLnR5cGVcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBfdGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoKHV0aWxzLmZzYShpZCwgYWN0aW9uLnR5cGUsIGFjdGlvbi5wYXlsb2FkLCBmc2FEZXRhaWxzKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWN0aW9uLmlkICYmIGFjdGlvbi5kaXNwYXRjaCkge1xuICAgICAgICAgIHJldHVybiB1dGlscy5kaXNwYXRjaChpZCwgYWN0aW9uLCBkYXRhLCBfdGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX3RoaXMuZGlzcGF0Y2hlci5kaXNwYXRjaCh1dGlscy5mc2EoaWQsIGFjdGlvbiwgZGF0YSwgZGV0YWlscykpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpc3BhdGNoO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5jcmVhdGVVbnNhdmVkU3RvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gY3JlYXRlVW5zYXZlZFN0b3JlKFN0b3JlTW9kZWwpIHtcbiAgICAgIHZhciBrZXkgPSBTdG9yZU1vZGVsLmRpc3BsYXlOYW1lIHx8ICcnO1xuICAgICAgc3RvcmUuY3JlYXRlU3RvcmVDb25maWcodGhpcy5jb25maWcsIFN0b3JlTW9kZWwpO1xuICAgICAgdmFyIFN0b3JlID0gc3RvcmUudHJhbnNmb3JtU3RvcmUodGhpcy5zdG9yZVRyYW5zZm9ybXMsIFN0b3JlTW9kZWwpO1xuXG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmbi5pc0Z1bmN0aW9uKFN0b3JlKSA/IHN0b3JlLmNyZWF0ZVN0b3JlRnJvbUNsYXNzLmFwcGx5KHN0b3JlLCBbdGhpcywgU3RvcmUsIGtleV0uY29uY2F0KGFyZ3MpKSA6IHN0b3JlLmNyZWF0ZVN0b3JlRnJvbU9iamVjdCh0aGlzLCBTdG9yZSwga2V5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlVW5zYXZlZFN0b3JlO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5jcmVhdGVTdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVTdG9yZShTdG9yZU1vZGVsLCBpZGVuKSB7XG4gICAgICB2YXIga2V5ID0gaWRlbiB8fCBTdG9yZU1vZGVsLmRpc3BsYXlOYW1lIHx8IFN0b3JlTW9kZWwubmFtZSB8fCAnJztcbiAgICAgIHN0b3JlLmNyZWF0ZVN0b3JlQ29uZmlnKHRoaXMuY29uZmlnLCBTdG9yZU1vZGVsKTtcbiAgICAgIHZhciBTdG9yZSA9IHN0b3JlLnRyYW5zZm9ybVN0b3JlKHRoaXMuc3RvcmVUcmFuc2Zvcm1zLCBTdG9yZU1vZGVsKTtcblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGlmIChtb2R1bGUuaG90KSBkZWxldGUgdGhpcy5zdG9yZXNba2V5XTtcblxuICAgICAgaWYgKHRoaXMuc3RvcmVzW2tleV0gfHwgIWtleSkge1xuICAgICAgICBpZiAodGhpcy5zdG9yZXNba2V5XSkge1xuICAgICAgICAgIHV0aWxzLndhcm4oJ0Egc3RvcmUgbmFtZWQgJyArIFN0cmluZyhrZXkpICsgJyBhbHJlYWR5IGV4aXN0cywgZG91YmxlIGNoZWNrIHlvdXIgc3RvcmUgJyArICduYW1lcyBvciBwYXNzIGluIHlvdXIgb3duIGN1c3RvbSBpZGVudGlmaWVyIGZvciBlYWNoIHN0b3JlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXRpbHMud2FybignU3RvcmUgbmFtZSB3YXMgbm90IHNwZWNpZmllZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAga2V5ID0gdXRpbHMudWlkKHRoaXMuc3RvcmVzLCBrZXkpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDIgPyBfbGVuMiAtIDIgOiAwKSwgX2tleTIgPSAyOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTIgLSAyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHZhciBzdG9yZUluc3RhbmNlID0gZm4uaXNGdW5jdGlvbihTdG9yZSkgPyBzdG9yZS5jcmVhdGVTdG9yZUZyb21DbGFzcy5hcHBseShzdG9yZSwgW3RoaXMsIFN0b3JlLCBrZXldLmNvbmNhdChhcmdzKSkgOiBzdG9yZS5jcmVhdGVTdG9yZUZyb21PYmplY3QodGhpcywgU3RvcmUsIGtleSk7XG5cbiAgICAgIHRoaXMuc3RvcmVzW2tleV0gPSBzdG9yZUluc3RhbmNlO1xuICAgICAgU3RhdGVGdW5jdGlvbnMuc2F2ZUluaXRpYWxTbmFwc2hvdCh0aGlzLCBrZXkpO1xuXG4gICAgICByZXR1cm4gc3RvcmVJbnN0YW5jZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlU3RvcmU7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLmdlbmVyYXRlQWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUFjdGlvbnMoKSB7XG4gICAgICB2YXIgYWN0aW9ucyA9IHsgbmFtZTogJ2dsb2JhbCcgfTtcblxuICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhY3Rpb25OYW1lcyA9IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICAgIGFjdGlvbk5hbWVzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUFjdGlvbnMoYWN0aW9uTmFtZXMucmVkdWNlKGZ1bmN0aW9uIChvYmosIGFjdGlvbikge1xuICAgICAgICBvYmpbYWN0aW9uXSA9IHV0aWxzLmRpc3BhdGNoSWRlbnRpdHk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9LCBhY3Rpb25zKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdlbmVyYXRlQWN0aW9ucztcbiAgfSgpO1xuXG4gIEFsdC5wcm90b3R5cGUuY3JlYXRlQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUFjdGlvbihuYW1lLCBpbXBsZW1lbnRhdGlvbiwgb2JqKSB7XG4gICAgICByZXR1cm4gKDAsIF9hY3Rpb25zMlsnZGVmYXVsdCddKSh0aGlzLCAnZ2xvYmFsJywgbmFtZSwgaW1wbGVtZW50YXRpb24sIG9iaik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZUFjdGlvbjtcbiAgfSgpO1xuXG4gIEFsdC5wcm90b3R5cGUuY3JlYXRlQWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVBY3Rpb25zKEFjdGlvbnNDbGFzcykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBleHBvcnRPYmogPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgdmFyIGFjdGlvbnMgPSB7fTtcbiAgICAgIHZhciBrZXkgPSB1dGlscy51aWQodGhpcy5fYWN0aW9uc1JlZ2lzdHJ5LCBBY3Rpb25zQ2xhc3MuZGlzcGxheU5hbWUgfHwgQWN0aW9uc0NsYXNzLm5hbWUgfHwgJ1Vua25vd24nKTtcblxuICAgICAgaWYgKGZuLmlzRnVuY3Rpb24oQWN0aW9uc0NsYXNzKSkge1xuICAgICAgICBmbi5hc3NpZ24oYWN0aW9ucywgdXRpbHMuZ2V0UHJvdG90eXBlQ2hhaW4oQWN0aW9uc0NsYXNzKSk7XG5cbiAgICAgICAgdmFyIEFjdGlvbnNHZW5lcmF0b3IgPSBmdW5jdGlvbiAoX0FjdGlvbnNDbGFzcykge1xuICAgICAgICAgIF9pbmhlcml0cyhBY3Rpb25zR2VuZXJhdG9yLCBfQWN0aW9uc0NsYXNzKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIEFjdGlvbnNHZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWN0aW9uc0dlbmVyYXRvcik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIF9sZW41ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW41KSwgX2tleTUgPSAwOyBfa2V5NSA8IF9sZW41OyBfa2V5NSsrKSB7XG4gICAgICAgICAgICAgIGFyZ3NbX2tleTVdID0gYXJndW1lbnRzW19rZXk1XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9BY3Rpb25zQ2xhc3MuY2FsbC5hcHBseShfQWN0aW9uc0NsYXNzLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgQWN0aW9uc0dlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVBY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVBY3Rpb25zKCkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBfbGVuNiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFjdGlvbk5hbWVzID0gQXJyYXkoX2xlbjYpLCBfa2V5NiA9IDA7IF9rZXk2IDwgX2xlbjY7IF9rZXk2KyspIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25OYW1lc1tfa2V5Nl0gPSBhcmd1bWVudHNbX2tleTZdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYWN0aW9uTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uTmFtZSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnNbYWN0aW9uTmFtZV0gPSB1dGlscy5kaXNwYXRjaElkZW50aXR5O1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlQWN0aW9ucztcbiAgICAgICAgICB9KCk7XG5cbiAgICAgICAgICByZXR1cm4gQWN0aW9uc0dlbmVyYXRvcjtcbiAgICAgICAgfShBY3Rpb25zQ2xhc3MpO1xuXG4gICAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJnc0ZvckNvbnN0cnVjdG9yID0gQXJyYXkoX2xlbjQgPiAyID8gX2xlbjQgLSAyIDogMCksIF9rZXk0ID0gMjsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgICAgIGFyZ3NGb3JDb25zdHJ1Y3Rvcltfa2V5NCAtIDJdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZuLmFzc2lnbihhY3Rpb25zLCBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KEFjdGlvbnNHZW5lcmF0b3IsIFtudWxsXS5jb25jYXQoYXJnc0ZvckNvbnN0cnVjdG9yKSkpKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm4uYXNzaWduKGFjdGlvbnMsIEFjdGlvbnNDbGFzcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYWN0aW9uc1trZXldID0gdGhpcy5hY3Rpb25zW2tleV0gfHwge307XG5cbiAgICAgIGZuLmVhY2hPYmplY3QoZnVuY3Rpb24gKGFjdGlvbk5hbWUsIGFjdGlvbikge1xuICAgICAgICBpZiAoIWZuLmlzRnVuY3Rpb24oYWN0aW9uKSkge1xuICAgICAgICAgIGV4cG9ydE9ialthY3Rpb25OYW1lXSA9IGFjdGlvbjtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjcmVhdGUgdGhlIGFjdGlvblxuICAgICAgICBleHBvcnRPYmpbYWN0aW9uTmFtZV0gPSAoMCwgX2FjdGlvbnMyWydkZWZhdWx0J10pKF90aGlzMywga2V5LCBhY3Rpb25OYW1lLCBhY3Rpb24sIGV4cG9ydE9iaik7XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgYSBjb25zdGFudFxuICAgICAgICB2YXIgY29uc3RhbnQgPSB1dGlscy5mb3JtYXRBc0NvbnN0YW50KGFjdGlvbk5hbWUpO1xuICAgICAgICBleHBvcnRPYmpbY29uc3RhbnRdID0gZXhwb3J0T2JqW2FjdGlvbk5hbWVdLmlkO1xuICAgICAgfSwgW2FjdGlvbnNdKTtcblxuICAgICAgcmV0dXJuIGV4cG9ydE9iajtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlQWN0aW9ucztcbiAgfSgpO1xuXG4gIEFsdC5wcm90b3R5cGUudGFrZVNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHRha2VTbmFwc2hvdCgpIHtcbiAgICAgIGZvciAodmFyIF9sZW43ID0gYXJndW1lbnRzLmxlbmd0aCwgc3RvcmVOYW1lcyA9IEFycmF5KF9sZW43KSwgX2tleTcgPSAwOyBfa2V5NyA8IF9sZW43OyBfa2V5NysrKSB7XG4gICAgICAgIHN0b3JlTmFtZXNbX2tleTddID0gYXJndW1lbnRzW19rZXk3XTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXRlID0gU3RhdGVGdW5jdGlvbnMuc25hcHNob3QodGhpcywgc3RvcmVOYW1lcyk7XG4gICAgICBmbi5hc3NpZ24odGhpcy5fbGFzdFNuYXBzaG90LCBzdGF0ZSk7XG4gICAgICByZXR1cm4gdGhpcy5zZXJpYWxpemUoc3RhdGUpO1xuICAgIH1cblxuICAgIHJldHVybiB0YWtlU25hcHNob3Q7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLnJvbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHJvbGxiYWNrKCkge1xuICAgICAgU3RhdGVGdW5jdGlvbnMuc2V0QXBwU3RhdGUodGhpcywgdGhpcy5zZXJpYWxpemUodGhpcy5fbGFzdFNuYXBzaG90KSwgZnVuY3Rpb24gKHN0b3JlSW5zdCkge1xuICAgICAgICBzdG9yZUluc3QubGlmZWN5Y2xlKCdyb2xsYmFjaycpO1xuICAgICAgICBzdG9yZUluc3QuZW1pdENoYW5nZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvbGxiYWNrO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHJlY3ljbGUoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuOCA9IGFyZ3VtZW50cy5sZW5ndGgsIHN0b3JlTmFtZXMgPSBBcnJheShfbGVuOCksIF9rZXk4ID0gMDsgX2tleTggPCBfbGVuODsgX2tleTgrKykge1xuICAgICAgICBzdG9yZU5hbWVzW19rZXk4XSA9IGFyZ3VtZW50c1tfa2V5OF07XG4gICAgICB9XG5cbiAgICAgIHZhciBpbml0aWFsU25hcHNob3QgPSBzdG9yZU5hbWVzLmxlbmd0aCA/IFN0YXRlRnVuY3Rpb25zLmZpbHRlclNuYXBzaG90cyh0aGlzLCB0aGlzLl9pbml0U25hcHNob3QsIHN0b3JlTmFtZXMpIDogdGhpcy5faW5pdFNuYXBzaG90O1xuXG4gICAgICBTdGF0ZUZ1bmN0aW9ucy5zZXRBcHBTdGF0ZSh0aGlzLCB0aGlzLnNlcmlhbGl6ZShpbml0aWFsU25hcHNob3QpLCBmdW5jdGlvbiAoc3RvcmVJbnN0KSB7XG4gICAgICAgIHN0b3JlSW5zdC5saWZlY3ljbGUoJ2luaXQnKTtcbiAgICAgICAgc3RvcmVJbnN0LmVtaXRDaGFuZ2UoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZWN5Y2xlO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc2VyaWFsaXplKFN0YXRlRnVuY3Rpb25zLnNuYXBzaG90KHRoaXMpKTtcbiAgICAgIHRoaXMucmVjeWNsZSgpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIHJldHVybiBmbHVzaDtcbiAgfSgpO1xuXG4gIEFsdC5wcm90b3R5cGUuYm9vdHN0cmFwID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGJvb3RzdHJhcChkYXRhKSB7XG4gICAgICBTdGF0ZUZ1bmN0aW9ucy5zZXRBcHBTdGF0ZSh0aGlzLCBkYXRhLCBmdW5jdGlvbiAoc3RvcmVJbnN0LCBzdGF0ZSkge1xuICAgICAgICBzdG9yZUluc3QubGlmZWN5Y2xlKCdib290c3RyYXAnLCBzdGF0ZSk7XG4gICAgICAgIHN0b3JlSW5zdC5lbWl0Q2hhbmdlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9vdHN0cmFwO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5wcmVwYXJlID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHByZXBhcmUoc3RvcmVJbnN0LCBwYXlsb2FkKSB7XG4gICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgaWYgKCFzdG9yZUluc3QuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdTdG9yZSBwcm92aWRlZCBkb2VzIG5vdCBoYXZlIGEgbmFtZScpO1xuICAgICAgfVxuICAgICAgZGF0YVtzdG9yZUluc3QuZGlzcGxheU5hbWVdID0gcGF5bG9hZDtcbiAgICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZShkYXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJlcGFyZTtcbiAgfSgpO1xuXG4gIC8vIEluc3RhbmNlIHR5cGUgbWV0aG9kcyBmb3IgaW5qZWN0aW5nIGFsdCBpbnRvIHlvdXIgYXBwbGljYXRpb24gYXMgY29udGV4dFxuXG4gIEFsdC5wcm90b3R5cGUuYWRkQWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBhZGRBY3Rpb25zKG5hbWUsIEFjdGlvbnNDbGFzcykge1xuICAgICAgZm9yICh2YXIgX2xlbjkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjkgPiAyID8gX2xlbjkgLSAyIDogMCksIF9rZXk5ID0gMjsgX2tleTkgPCBfbGVuOTsgX2tleTkrKykge1xuICAgICAgICBhcmdzW19rZXk5IC0gMl0gPSBhcmd1bWVudHNbX2tleTldO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFjdGlvbnNbbmFtZV0gPSBBcnJheS5pc0FycmF5KEFjdGlvbnNDbGFzcykgPyB0aGlzLmdlbmVyYXRlQWN0aW9ucy5hcHBseSh0aGlzLCBBY3Rpb25zQ2xhc3MpIDogdGhpcy5jcmVhdGVBY3Rpb25zLmFwcGx5KHRoaXMsIFtBY3Rpb25zQ2xhc3NdLmNvbmNhdChhcmdzKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZEFjdGlvbnM7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLmFkZFN0b3JlID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGFkZFN0b3JlKG5hbWUsIFN0b3JlTW9kZWwpIHtcbiAgICAgIGZvciAodmFyIF9sZW4xMCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMTAgPiAyID8gX2xlbjEwIC0gMiA6IDApLCBfa2V5MTAgPSAyOyBfa2V5MTAgPCBfbGVuMTA7IF9rZXkxMCsrKSB7XG4gICAgICAgIGFyZ3NbX2tleTEwIC0gMl0gPSBhcmd1bWVudHNbX2tleTEwXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jcmVhdGVTdG9yZS5hcHBseSh0aGlzLCBbU3RvcmVNb2RlbCwgbmFtZV0uY29uY2F0KGFyZ3MpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkU3RvcmU7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLmdldEFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZ2V0QWN0aW9ucyhuYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rpb25zW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRBY3Rpb25zO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5nZXRTdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBnZXRTdG9yZShuYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZXNbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldFN0b3JlO1xuICB9KCk7XG5cbiAgQWx0LmRlYnVnID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGRlYnVnKG5hbWUsIGFsdCwgd2luKSB7XG4gICAgICB2YXIga2V5ID0gJ2FsdC5qcy5vcmcnO1xuICAgICAgdmFyIGNvbnRleHQgPSB3aW47XG4gICAgICBpZiAoIWNvbnRleHQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29udGV4dCA9IHdpbmRvdztcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29udGV4dFtrZXldID0gY29udGV4dFtrZXldIHx8IFtdO1xuICAgICAgICBjb250ZXh0W2tleV0ucHVzaCh7IG5hbWU6IG5hbWUsIGFsdDogYWx0IH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFsdDtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVidWc7XG4gIH0oKTtcblxuICByZXR1cm4gQWx0O1xufSgpO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBBbHQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZnVuY3Rpb25zID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zJyk7XG5cbnZhciBmbiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9mdW5jdGlvbnMpO1xuXG52YXIgX3RyYW5zbWl0dGVyID0gcmVxdWlyZSgndHJhbnNtaXR0ZXInKTtcblxudmFyIF90cmFuc21pdHRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc21pdHRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09ialsnZGVmYXVsdCddID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIEFsdFN0b3JlID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBBbHRTdG9yZShhbHQsIG1vZGVsLCBzdGF0ZSwgU3RvcmVNb2RlbCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWx0U3RvcmUpO1xuXG4gICAgdmFyIGxpZmVjeWNsZUV2ZW50cyA9IG1vZGVsLmxpZmVjeWNsZUV2ZW50cztcbiAgICB0aGlzLnRyYW5zbWl0dGVyID0gKDAsIF90cmFuc21pdHRlcjJbJ2RlZmF1bHQnXSkoKTtcbiAgICB0aGlzLmxpZmVjeWNsZSA9IGZ1bmN0aW9uIChldmVudCwgeCkge1xuICAgICAgaWYgKGxpZmVjeWNsZUV2ZW50c1tldmVudF0pIGxpZmVjeWNsZUV2ZW50c1tldmVudF0ucHVibGlzaCh4KTtcbiAgICB9O1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblxuICAgIHRoaXMuYWx0ID0gYWx0O1xuICAgIHRoaXMucHJldmVudERlZmF1bHQgPSBmYWxzZTtcbiAgICB0aGlzLmRpc3BsYXlOYW1lID0gbW9kZWwuZGlzcGxheU5hbWU7XG4gICAgdGhpcy5ib3VuZExpc3RlbmVycyA9IG1vZGVsLmJvdW5kTGlzdGVuZXJzO1xuICAgIHRoaXMuU3RvcmVNb2RlbCA9IFN0b3JlTW9kZWw7XG4gICAgdGhpcy5yZWR1Y2UgPSBtb2RlbC5yZWR1Y2UgfHwgZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiB4O1xuICAgIH07XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG5cbiAgICB2YXIgb3V0cHV0ID0gbW9kZWwub3V0cHV0IHx8IGZ1bmN0aW9uICh4KSB7XG4gICAgICByZXR1cm4geDtcbiAgICB9O1xuXG4gICAgdGhpcy5lbWl0Q2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnRyYW5zbWl0dGVyLnB1Ymxpc2gob3V0cHV0KF90aGlzLnN0YXRlKSk7XG4gICAgfTtcblxuICAgIHZhciBoYW5kbGVEaXNwYXRjaCA9IGZ1bmN0aW9uIGhhbmRsZURpc3BhdGNoKGYsIHBheWxvYWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChtb2RlbC5oYW5kbGVzT3duRXJyb3JzKSB7XG4gICAgICAgICAgX3RoaXMubGlmZWN5Y2xlKCdlcnJvcicsIHtcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgcGF5bG9hZDogcGF5bG9hZCxcbiAgICAgICAgICAgIHN0YXRlOiBfdGhpcy5zdGF0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZuLmFzc2lnbih0aGlzLCBtb2RlbC5wdWJsaWNNZXRob2RzKTtcblxuICAgIC8vIFJlZ2lzdGVyIGRpc3BhdGNoZXJcbiAgICB0aGlzLmRpc3BhdGNoVG9rZW4gPSBhbHQuZGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgX3RoaXMucHJldmVudERlZmF1bHQgPSBmYWxzZTtcblxuICAgICAgX3RoaXMubGlmZWN5Y2xlKCdiZWZvcmVFYWNoJywge1xuICAgICAgICBwYXlsb2FkOiBwYXlsb2FkLFxuICAgICAgICBzdGF0ZTogX3RoaXMuc3RhdGVcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgYWN0aW9uSGFuZGxlcnMgPSBtb2RlbC5hY3Rpb25MaXN0ZW5lcnNbcGF5bG9hZC5hY3Rpb25dO1xuXG4gICAgICBpZiAoYWN0aW9uSGFuZGxlcnMgfHwgbW9kZWwub3RoZXJ3aXNlKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKGFjdGlvbkhhbmRsZXJzKSB7XG4gICAgICAgICAgcmVzdWx0ID0gaGFuZGxlRGlzcGF0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbkhhbmRsZXJzLmZpbHRlcihCb29sZWFuKS5ldmVyeShmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKG1vZGVsLCBwYXlsb2FkLmRhdGEsIHBheWxvYWQuYWN0aW9uKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCBwYXlsb2FkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSBoYW5kbGVEaXNwYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kZWwub3RoZXJ3aXNlKHBheWxvYWQuZGF0YSwgcGF5bG9hZC5hY3Rpb24pO1xuICAgICAgICAgIH0sIHBheWxvYWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UgJiYgIV90aGlzLnByZXZlbnREZWZhdWx0KSBfdGhpcy5lbWl0Q2hhbmdlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RlbC5yZWR1Y2UpIHtcbiAgICAgICAgaGFuZGxlRGlzcGF0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IG1vZGVsLnJlZHVjZShfdGhpcy5zdGF0ZSwgcGF5bG9hZCk7XG4gICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIF90aGlzLnN0YXRlID0gdmFsdWU7XG4gICAgICAgIH0sIHBheWxvYWQpO1xuICAgICAgICBpZiAoIV90aGlzLnByZXZlbnREZWZhdWx0KSBfdGhpcy5lbWl0Q2hhbmdlKCk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmxpZmVjeWNsZSgnYWZ0ZXJFYWNoJywge1xuICAgICAgICBwYXlsb2FkOiBwYXlsb2FkLFxuICAgICAgICBzdGF0ZTogX3RoaXMuc3RhdGVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5saWZlY3ljbGUoJ2luaXQnKTtcbiAgfVxuXG4gIEFsdFN0b3JlLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gbGlzdGVuKGNiKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKCFmbi5pc0Z1bmN0aW9uKGNiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbGlzdGVuIGV4cGVjdHMgYSBmdW5jdGlvbicpO1xuXG4gICAgICB2YXIgX3RyYW5zbWl0dGVyJHN1YnNjcmliID0gdGhpcy50cmFuc21pdHRlci5zdWJzY3JpYmUoY2IpO1xuXG4gICAgICB2YXIgZGlzcG9zZSA9IF90cmFuc21pdHRlciRzdWJzY3JpYi5kaXNwb3NlO1xuXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCh7IGNiOiBjYiwgZGlzcG9zZTogZGlzcG9zZSB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5saWZlY3ljbGUoJ3VubGlzdGVuJyk7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RlbjtcbiAgfSgpO1xuXG4gIEFsdFN0b3JlLnByb3RvdHlwZS51bmxpc3RlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB1bmxpc3RlbihjYikge1xuICAgICAgdGhpcy5saWZlY3ljbGUoJ3VubGlzdGVuJyk7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5jYiA9PT0gY2I7XG4gICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5saXN0ZW47XG4gIH0oKTtcblxuICBBbHRTdG9yZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5TdG9yZU1vZGVsLmNvbmZpZy5nZXRTdGF0ZS5jYWxsKHRoaXMsIHRoaXMuc3RhdGUpO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRTdGF0ZTtcbiAgfSgpO1xuXG4gIHJldHVybiBBbHRTdG9yZTtcbn0oKTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gQWx0U3RvcmU7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfdHJhbnNtaXR0ZXIgPSByZXF1aXJlKCd0cmFuc21pdHRlcicpO1xuXG52YXIgX3RyYW5zbWl0dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zbWl0dGVyKTtcblxudmFyIF9mdW5jdGlvbnMgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMnKTtcblxudmFyIGZuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2Z1bmN0aW9ucyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmpbJ2RlZmF1bHQnXSA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIFN0b3JlTWl4aW4gPSB7XG4gIHdhaXRGb3I6IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB3YWl0Rm9yKCkge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNvdXJjZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgc291cmNlc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFzb3VyY2VzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoJ0Rpc3BhdGNoIHRva2VucyBub3QgcHJvdmlkZWQnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNvdXJjZXNBcnJheSA9IHNvdXJjZXM7XG4gICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgc291cmNlc0FycmF5ID0gQXJyYXkuaXNBcnJheShzb3VyY2VzWzBdKSA/IHNvdXJjZXNbMF0gOiBzb3VyY2VzO1xuICAgICAgfVxuXG4gICAgICB2YXIgdG9rZW5zID0gc291cmNlc0FycmF5Lm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuZGlzcGF0Y2hUb2tlbiB8fCBzb3VyY2U7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5kaXNwYXRjaGVyLndhaXRGb3IodG9rZW5zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gd2FpdEZvcjtcbiAgfSgpLFxuICBleHBvcnRBc3luYzogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGV4cG9ydEFzeW5jKGFzeW5jTWV0aG9kcykge1xuICAgICAgdGhpcy5yZWdpc3RlckFzeW5jKGFzeW5jTWV0aG9kcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGV4cG9ydEFzeW5jO1xuICB9KCksXG4gIHJlZ2lzdGVyQXN5bmM6IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiByZWdpc3RlckFzeW5jKGFzeW5jRGVmKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgbG9hZENvdW50ZXIgPSAwO1xuXG4gICAgICB2YXIgYXN5bmNNZXRob2RzID0gZm4uaXNGdW5jdGlvbihhc3luY0RlZikgPyBhc3luY0RlZih0aGlzLmFsdCkgOiBhc3luY0RlZjtcblxuICAgICAgdmFyIHRvRXhwb3J0ID0gT2JqZWN0LmtleXMoYXN5bmNNZXRob2RzKS5yZWR1Y2UoZnVuY3Rpb24gKHB1YmxpY01ldGhvZHMsIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgdmFyIGRlc2MgPSBhc3luY01ldGhvZHNbbWV0aG9kTmFtZV07XG4gICAgICAgIHZhciBzcGVjID0gZm4uaXNGdW5jdGlvbihkZXNjKSA/IGRlc2MoX3RoaXMpIDogZGVzYztcblxuICAgICAgICB2YXIgdmFsaWRIYW5kbGVycyA9IFsnc3VjY2VzcycsICdlcnJvcicsICdsb2FkaW5nJ107XG4gICAgICAgIHZhbGlkSGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICAgIGlmIChzcGVjW2hhbmRsZXJdICYmICFzcGVjW2hhbmRsZXJdLmlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5nKGhhbmRsZXIpICsgJyBoYW5kbGVyIG11c3QgYmUgYW4gYWN0aW9uIGZ1bmN0aW9uJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBwdWJsaWNNZXRob2RzW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHN0YXRlID0gX3RoaXMuZ2V0SW5zdGFuY2UoKS5nZXRTdGF0ZSgpO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IHNwZWMubG9jYWwgJiYgc3BlYy5sb2NhbC5hcHBseShzcGVjLCBbc3RhdGVdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgICAgdmFyIHNob3VsZEZldGNoID0gc3BlYy5zaG91bGRGZXRjaCA/IHNwZWMuc2hvdWxkRmV0Y2guYXBwbHkoc3BlYywgW3N0YXRlXS5jb25jYXQoYXJncykpXG4gICAgICAgICAgLyplc2xpbnQtZGlzYWJsZSovXG4gICAgICAgICAgOiB2YWx1ZSA9PSBudWxsO1xuICAgICAgICAgIC8qZXNsaW50LWVuYWJsZSovXG4gICAgICAgICAgdmFyIGludGVyY2VwdCA9IHNwZWMuaW50ZXJjZXB0UmVzcG9uc2UgfHwgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgbWFrZUFjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBtYWtlQWN0aW9uSGFuZGxlcihhY3Rpb24sIGlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaXJlKCkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkQ291bnRlciAtPSAxO1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb24oaW50ZXJjZXB0KHgsIGFjdGlvbiwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFcnJvcikgdGhyb3cgeDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIHJldHVybiBmaXJlO1xuICAgICAgICAgICAgICAgIH0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYWx0LnRyYXBBc3luYyA/IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmaXJlKCk7XG4gICAgICAgICAgICAgICAgfSA6IGZpcmUoKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1ha2VBY3Rpb25IYW5kbGVyO1xuICAgICAgICAgIH0oKTtcblxuICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgaXQgaW4gY2FjaGUgdGhlbiBmZXRjaCBpdFxuICAgICAgICAgIGlmIChzaG91bGRGZXRjaCkge1xuICAgICAgICAgICAgbG9hZENvdW50ZXIgKz0gMTtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgICAgICBpZiAoc3BlYy5sb2FkaW5nKSBzcGVjLmxvYWRpbmcoaW50ZXJjZXB0KG51bGwsIHNwZWMubG9hZGluZywgYXJncykpO1xuICAgICAgICAgICAgcmV0dXJuIHNwZWMucmVtb3RlLmFwcGx5KHNwZWMsIFtzdGF0ZV0uY29uY2F0KGFyZ3MpKS50aGVuKG1ha2VBY3Rpb25IYW5kbGVyKHNwZWMuc3VjY2VzcyksIG1ha2VBY3Rpb25IYW5kbGVyKHNwZWMuZXJyb3IsIDEpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBvdGhlcndpc2UgZW1pdCB0aGUgY2hhbmdlIG5vd1xuICAgICAgICAgIF90aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHB1YmxpY01ldGhvZHM7XG4gICAgICB9LCB7fSk7XG5cbiAgICAgIHRoaXMuZXhwb3J0UHVibGljTWV0aG9kcyh0b0V4cG9ydCk7XG4gICAgICB0aGlzLmV4cG9ydFB1YmxpY01ldGhvZHMoe1xuICAgICAgICBpc0xvYWRpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmdW5jdGlvbiBpc0xvYWRpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZENvdW50ZXIgPiAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBpc0xvYWRpbmc7XG4gICAgICAgIH0oKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlZ2lzdGVyQXN5bmM7XG4gIH0oKSxcbiAgZXhwb3J0UHVibGljTWV0aG9kczogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGV4cG9ydFB1YmxpY01ldGhvZHMobWV0aG9kcykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGZuLmVhY2hPYmplY3QoZnVuY3Rpb24gKG1ldGhvZE5hbWUsIHZhbHVlKSB7XG4gICAgICAgIGlmICghZm4uaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleHBvcnRQdWJsaWNNZXRob2RzIGV4cGVjdHMgYSBmdW5jdGlvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnB1YmxpY01ldGhvZHNbbWV0aG9kTmFtZV0gPSB2YWx1ZTtcbiAgICAgIH0sIFttZXRob2RzXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGV4cG9ydFB1YmxpY01ldGhvZHM7XG4gIH0oKSxcbiAgZW1pdENoYW5nZTogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGVtaXRDaGFuZ2UoKSB7XG4gICAgICB0aGlzLmdldEluc3RhbmNlKCkuZW1pdENoYW5nZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBlbWl0Q2hhbmdlO1xuICB9KCksXG4gIG9uOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gb24obGlmZWN5Y2xlRXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgIGlmIChsaWZlY3ljbGVFdmVudCA9PT0gJ2Vycm9yJykgdGhpcy5oYW5kbGVzT3duRXJyb3JzID0gdHJ1ZTtcbiAgICAgIHZhciBidXMgPSB0aGlzLmxpZmVjeWNsZUV2ZW50c1tsaWZlY3ljbGVFdmVudF0gfHwgKDAsIF90cmFuc21pdHRlcjJbJ2RlZmF1bHQnXSkoKTtcbiAgICAgIHRoaXMubGlmZWN5Y2xlRXZlbnRzW2xpZmVjeWNsZUV2ZW50XSA9IGJ1cztcbiAgICAgIHJldHVybiBidXMuc3Vic2NyaWJlKGhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9uO1xuICB9KCksXG4gIGJpbmRBY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBiaW5kQWN0aW9uKHN5bWJvbCwgaGFuZGxlcikge1xuICAgICAgaWYgKCFzeW1ib2wpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdJbnZhbGlkIGFjdGlvbiByZWZlcmVuY2UgcGFzc2VkIGluJyk7XG4gICAgICB9XG4gICAgICBpZiAoIWZuLmlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYmluZEFjdGlvbiBleHBlY3RzIGEgZnVuY3Rpb24nKTtcbiAgICAgIH1cblxuICAgICAgLy8gWW91IGNhbiBwYXNzIGluIHRoZSBjb25zdGFudCBvciB0aGUgZnVuY3Rpb24gaXRzZWxmXG4gICAgICB2YXIga2V5ID0gc3ltYm9sLmlkID8gc3ltYm9sLmlkIDogc3ltYm9sO1xuICAgICAgdGhpcy5hY3Rpb25MaXN0ZW5lcnNba2V5XSA9IHRoaXMuYWN0aW9uTGlzdGVuZXJzW2tleV0gfHwgW107XG4gICAgICB0aGlzLmFjdGlvbkxpc3RlbmVyc1trZXldLnB1c2goaGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMuYm91bmRMaXN0ZW5lcnMucHVzaChrZXkpO1xuICAgIH1cblxuICAgIHJldHVybiBiaW5kQWN0aW9uO1xuICB9KCksXG4gIGJpbmRBY3Rpb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gYmluZEFjdGlvbnMoYWN0aW9ucykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIGZuLmVhY2hPYmplY3QoZnVuY3Rpb24gKGFjdGlvbiwgc3ltYm9sKSB7XG4gICAgICAgIHZhciBtYXRjaEZpcnN0Q2hhcmFjdGVyID0gLy4vO1xuICAgICAgICB2YXIgYXNzdW1lZEV2ZW50SGFuZGxlciA9IGFjdGlvbi5yZXBsYWNlKG1hdGNoRmlyc3RDaGFyYWN0ZXIsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgcmV0dXJuICdvbicgKyBTdHJpbmcoeFswXS50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKF90aGlzM1thY3Rpb25dICYmIF90aGlzM1thc3N1bWVkRXZlbnRIYW5kbGVyXSkge1xuICAgICAgICAgIC8vIElmIHlvdSBoYXZlIGJvdGggYWN0aW9uIGFuZCBvbkFjdGlvblxuICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignWW91IGhhdmUgbXVsdGlwbGUgYWN0aW9uIGhhbmRsZXJzIGJvdW5kIHRvIGFuIGFjdGlvbjogJyArIChTdHJpbmcoYWN0aW9uKSArICcgYW5kICcgKyBTdHJpbmcoYXNzdW1lZEV2ZW50SGFuZGxlcikpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVyID0gX3RoaXMzW2FjdGlvbl0gfHwgX3RoaXMzW2Fzc3VtZWRFdmVudEhhbmRsZXJdO1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIF90aGlzMy5iaW5kQWN0aW9uKHN5bWJvbCwgaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0sIFthY3Rpb25zXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJpbmRBY3Rpb25zO1xuICB9KCksXG4gIGJpbmRMaXN0ZW5lcnM6IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBiaW5kTGlzdGVuZXJzKG9iaikge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIGZuLmVhY2hPYmplY3QoZnVuY3Rpb24gKG1ldGhvZE5hbWUsIHN5bWJvbCkge1xuICAgICAgICB2YXIgbGlzdGVuZXIgPSBfdGhpczRbbWV0aG9kTmFtZV07XG5cbiAgICAgICAgaWYgKCFsaXN0ZW5lcikge1xuICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihTdHJpbmcobWV0aG9kTmFtZSkgKyAnIGRlZmluZWQgYnV0IGRvZXMgbm90IGV4aXN0IGluICcgKyBTdHJpbmcoX3RoaXM0LmRpc3BsYXlOYW1lKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzeW1ib2wpKSB7XG4gICAgICAgICAgc3ltYm9sLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgX3RoaXM0LmJpbmRBY3Rpb24oYWN0aW9uLCBsaXN0ZW5lcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXM0LmJpbmRBY3Rpb24oc3ltYm9sLCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0sIFtvYmpdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmluZExpc3RlbmVycztcbiAgfSgpXG59O1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBTdG9yZU1peGluO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jcmVhdGVTdG9yZUNvbmZpZyA9IGNyZWF0ZVN0b3JlQ29uZmlnO1xuZXhwb3J0cy50cmFuc2Zvcm1TdG9yZSA9IHRyYW5zZm9ybVN0b3JlO1xuZXhwb3J0cy5jcmVhdGVTdG9yZUZyb21PYmplY3QgPSBjcmVhdGVTdG9yZUZyb21PYmplY3Q7XG5leHBvcnRzLmNyZWF0ZVN0b3JlRnJvbUNsYXNzID0gY3JlYXRlU3RvcmVGcm9tQ2xhc3M7XG5cbnZhciBfQWx0VXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy9BbHRVdGlscycpO1xuXG52YXIgdXRpbHMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfQWx0VXRpbHMpO1xuXG52YXIgX2Z1bmN0aW9ucyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucycpO1xuXG52YXIgZm4gPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfZnVuY3Rpb25zKTtcblxudmFyIF9BbHRTdG9yZSA9IHJlcXVpcmUoJy4vQWx0U3RvcmUnKTtcblxudmFyIF9BbHRTdG9yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BbHRTdG9yZSk7XG5cbnZhciBfU3RvcmVNaXhpbiA9IHJlcXVpcmUoJy4vU3RvcmVNaXhpbicpO1xuXG52YXIgX1N0b3JlTWl4aW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3RvcmVNaXhpbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09ialsnZGVmYXVsdCddID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5mdW5jdGlvbiBkb1NldFN0YXRlKHN0b3JlLCBzdG9yZUluc3RhbmNlLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNvbmZpZyA9IHN0b3JlSW5zdGFuY2UuU3RvcmVNb2RlbC5jb25maWc7XG5cblxuICB2YXIgbmV4dFN0YXRlID0gZm4uaXNGdW5jdGlvbihzdGF0ZSkgPyBzdGF0ZShzdG9yZUluc3RhbmNlLnN0YXRlKSA6IHN0YXRlO1xuXG4gIHN0b3JlSW5zdGFuY2Uuc3RhdGUgPSBjb25maWcuc2V0U3RhdGUuY2FsbChzdG9yZSwgc3RvcmVJbnN0YW5jZS5zdGF0ZSwgbmV4dFN0YXRlKTtcblxuICBpZiAoIXN0b3JlLmFsdC5kaXNwYXRjaGVyLmlzRGlzcGF0Y2hpbmcoKSkge1xuICAgIHN0b3JlLmVtaXRDaGFuZ2UoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm90b3R5cGUocHJvdG8sIGFsdCwga2V5LCBleHRyYXMpIHtcbiAgcmV0dXJuIGZuLmFzc2lnbihwcm90bywgX1N0b3JlTWl4aW4yWydkZWZhdWx0J10sIHtcbiAgICBkaXNwbGF5TmFtZToga2V5LFxuICAgIGFsdDogYWx0LFxuICAgIGRpc3BhdGNoZXI6IGFsdC5kaXNwYXRjaGVyLFxuICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCgpIHtcbiAgICAgICAgdGhpcy5nZXRJbnN0YW5jZSgpLnByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZlbnREZWZhdWx0O1xuICAgIH0oKSxcblxuICAgIGJvdW5kTGlzdGVuZXJzOiBbXSxcbiAgICBsaWZlY3ljbGVFdmVudHM6IHt9LFxuICAgIGFjdGlvbkxpc3RlbmVyczoge30sXG4gICAgcHVibGljTWV0aG9kczoge30sXG4gICAgaGFuZGxlc093bkVycm9yczogZmFsc2VcbiAgfSwgZXh0cmFzKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3RvcmVDb25maWcoZ2xvYmFsQ29uZmlnLCBTdG9yZU1vZGVsKSB7XG4gIFN0b3JlTW9kZWwuY29uZmlnID0gZm4uYXNzaWduKHtcbiAgICBnZXRTdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gZ2V0U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3RhdGUpKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLnNsaWNlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZm4uaXNNdXRhYmxlT2JqZWN0KHN0YXRlKSkge1xuICAgICAgICAgIHJldHVybiBmbi5hc3NpZ24oe30sIHN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdldFN0YXRlO1xuICAgIH0oKSxcbiAgICBzZXRTdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gc2V0U3RhdGUoY3VycmVudFN0YXRlLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgaWYgKGZuLmlzTXV0YWJsZU9iamVjdChuZXh0U3RhdGUpKSB7XG4gICAgICAgICAgcmV0dXJuIGZuLmFzc2lnbihjdXJyZW50U3RhdGUsIG5leHRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHRTdGF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNldFN0YXRlO1xuICAgIH0oKVxuICB9LCBnbG9iYWxDb25maWcsIFN0b3JlTW9kZWwuY29uZmlnKTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtU3RvcmUodHJhbnNmb3JtcywgU3RvcmVNb2RlbCkge1xuICByZXR1cm4gdHJhbnNmb3Jtcy5yZWR1Y2UoZnVuY3Rpb24gKFN0b3JlLCB0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtKFN0b3JlKTtcbiAgfSwgU3RvcmVNb2RlbCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0b3JlRnJvbU9iamVjdChhbHQsIFN0b3JlTW9kZWwsIGtleSkge1xuICB2YXIgc3RvcmVJbnN0YW5jZSA9IHZvaWQgMDtcblxuICB2YXIgU3RvcmVQcm90byA9IGNyZWF0ZVByb3RvdHlwZSh7fSwgYWx0LCBrZXksIGZuLmFzc2lnbih7XG4gICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gc3RvcmVJbnN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdldEluc3RhbmNlO1xuICAgIH0oKSxcbiAgICBzZXRTdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgICAgIGRvU2V0U3RhdGUodGhpcywgc3RvcmVJbnN0YW5jZSwgbmV4dFN0YXRlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNldFN0YXRlO1xuICAgIH0oKVxuICB9LCBTdG9yZU1vZGVsKSk7XG5cbiAgLy8gYmluZCB0aGUgc3RvcmUgbGlzdGVuZXJzXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChTdG9yZVByb3RvLmJpbmRMaXN0ZW5lcnMpIHtcbiAgICBfU3RvcmVNaXhpbjJbJ2RlZmF1bHQnXS5iaW5kTGlzdGVuZXJzLmNhbGwoU3RvcmVQcm90bywgU3RvcmVQcm90by5iaW5kTGlzdGVuZXJzKTtcbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoU3RvcmVQcm90by5vYnNlcnZlKSB7XG4gICAgX1N0b3JlTWl4aW4yWydkZWZhdWx0J10uYmluZExpc3RlbmVycy5jYWxsKFN0b3JlUHJvdG8sIFN0b3JlUHJvdG8ub2JzZXJ2ZShhbHQpKTtcbiAgfVxuXG4gIC8vIGJpbmQgdGhlIGxpZmVjeWNsZSBldmVudHNcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKFN0b3JlUHJvdG8ubGlmZWN5Y2xlKSB7XG4gICAgZm4uZWFjaE9iamVjdChmdW5jdGlvbiAoZXZlbnROYW1lLCBldmVudCkge1xuICAgICAgX1N0b3JlTWl4aW4yWydkZWZhdWx0J10ub24uY2FsbChTdG9yZVByb3RvLCBldmVudE5hbWUsIGV2ZW50KTtcbiAgICB9LCBbU3RvcmVQcm90by5saWZlY3ljbGVdKTtcbiAgfVxuXG4gIC8vIGNyZWF0ZSB0aGUgaW5zdGFuY2UgYW5kIGZuLmFzc2lnbiB0aGUgcHVibGljIG1ldGhvZHMgdG8gdGhlIGluc3RhbmNlXG4gIHN0b3JlSW5zdGFuY2UgPSBmbi5hc3NpZ24obmV3IF9BbHRTdG9yZTJbJ2RlZmF1bHQnXShhbHQsIFN0b3JlUHJvdG8sIFN0b3JlUHJvdG8uc3RhdGUgIT09IHVuZGVmaW5lZCA/IFN0b3JlUHJvdG8uc3RhdGUgOiB7fSwgU3RvcmVNb2RlbCksIFN0b3JlUHJvdG8ucHVibGljTWV0aG9kcywge1xuICAgIGRpc3BsYXlOYW1lOiBrZXksXG4gICAgY29uZmlnOiBTdG9yZU1vZGVsLmNvbmZpZ1xuICB9KTtcblxuICByZXR1cm4gc3RvcmVJbnN0YW5jZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3RvcmVGcm9tQ2xhc3MoYWx0LCBTdG9yZU1vZGVsLCBrZXkpIHtcbiAgdmFyIHN0b3JlSW5zdGFuY2UgPSB2b2lkIDA7XG4gIHZhciBjb25maWcgPSBTdG9yZU1vZGVsLmNvbmZpZztcblxuICAvLyBDcmVhdGluZyBhIGNsYXNzIGhlcmUgc28gd2UgZG9uJ3Qgb3ZlcmxvYWQgdGhlIHByb3ZpZGVkIHN0b3JlJ3NcbiAgLy8gcHJvdG90eXBlIHdpdGggdGhlIG1peGluIGJlaGF2aW91ciBhbmQgSSdtIGV4dGVuZGluZyBmcm9tIFN0b3JlTW9kZWxcbiAgLy8gc28gd2UgY2FuIGluaGVyaXQgYW55IGV4dGVuc2lvbnMgZnJvbSB0aGUgcHJvdmlkZWQgc3RvcmUuXG5cbiAgdmFyIFN0b3JlID0gZnVuY3Rpb24gKF9TdG9yZU1vZGVsKSB7XG4gICAgX2luaGVyaXRzKFN0b3JlLCBfU3RvcmVNb2RlbCk7XG5cbiAgICBmdW5jdGlvbiBTdG9yZSgpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdG9yZSk7XG5cbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9TdG9yZU1vZGVsLmNhbGwuYXBwbHkoX1N0b3JlTW9kZWwsIFt0aGlzXS5jb25jYXQoYXJncykpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gU3RvcmU7XG4gIH0oU3RvcmVNb2RlbCk7XG5cbiAgY3JlYXRlUHJvdG90eXBlKFN0b3JlLnByb3RvdHlwZSwgYWx0LCBrZXksIHtcbiAgICB0eXBlOiAnQWx0U3RvcmUnLFxuICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JlSW5zdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBnZXRJbnN0YW5jZTtcbiAgICB9KCksXG4gICAgc2V0U3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgICAgICBkb1NldFN0YXRlKHRoaXMsIHN0b3JlSW5zdGFuY2UsIG5leHRTdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZXRTdGF0ZTtcbiAgICB9KClcbiAgfSk7XG5cbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3NGb3JDbGFzcyA9IEFycmF5KF9sZW4gPiAzID8gX2xlbiAtIDMgOiAwKSwgX2tleSA9IDM7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzRm9yQ2xhc3NbX2tleSAtIDNdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgdmFyIHN0b3JlID0gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShTdG9yZSwgW251bGxdLmNvbmNhdChhcmdzRm9yQ2xhc3MpKSkoKTtcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBpZiAoY29uZmlnLmJpbmRMaXN0ZW5lcnMpIHN0b3JlLmJpbmRMaXN0ZW5lcnMoY29uZmlnLmJpbmRMaXN0ZW5lcnMpO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBpZiAoY29uZmlnLmRhdGFzb3VyY2UpIHN0b3JlLnJlZ2lzdGVyQXN5bmMoY29uZmlnLmRhdGFzb3VyY2UpO1xuXG4gIHN0b3JlSW5zdGFuY2UgPSBmbi5hc3NpZ24obmV3IF9BbHRTdG9yZTJbJ2RlZmF1bHQnXShhbHQsIHN0b3JlLCBzdG9yZS5zdGF0ZSAhPT0gdW5kZWZpbmVkID8gc3RvcmUuc3RhdGUgOiBzdG9yZSwgU3RvcmVNb2RlbCksIHV0aWxzLmdldEludGVybmFsTWV0aG9kcyhTdG9yZU1vZGVsKSwgY29uZmlnLnB1YmxpY01ldGhvZHMsIHsgZGlzcGxheU5hbWU6IGtleSB9KTtcblxuICByZXR1cm4gc3RvcmVJbnN0YW5jZTtcbn0iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuZ2V0SW50ZXJuYWxNZXRob2RzID0gZ2V0SW50ZXJuYWxNZXRob2RzO1xuZXhwb3J0cy5nZXRQcm90b3R5cGVDaGFpbiA9IGdldFByb3RvdHlwZUNoYWluO1xuZXhwb3J0cy53YXJuID0gd2FybjtcbmV4cG9ydHMudWlkID0gdWlkO1xuZXhwb3J0cy5mb3JtYXRBc0NvbnN0YW50ID0gZm9ybWF0QXNDb25zdGFudDtcbmV4cG9ydHMuZGlzcGF0Y2hJZGVudGl0eSA9IGRpc3BhdGNoSWRlbnRpdHk7XG5leHBvcnRzLmZzYSA9IGZzYTtcbmV4cG9ydHMuZGlzcGF0Y2ggPSBkaXNwYXRjaDtcblxudmFyIF9mdW5jdGlvbnMgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMnKTtcblxudmFyIGZuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2Z1bmN0aW9ucyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmpbJ2RlZmF1bHQnXSA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbi8qZXNsaW50LWRpc2FibGUqL1xudmFyIGJ1aWx0SW5zID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTm9vcENsYXNzKTtcbnZhciBidWlsdEluUHJvdG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhOb29wQ2xhc3MucHJvdG90eXBlKTtcbi8qZXNsaW50LWVuYWJsZSovXG5cbmZ1bmN0aW9uIGdldEludGVybmFsTWV0aG9kcyhPYmosIGlzUHJvdG8pIHtcbiAgdmFyIGV4Y2x1ZGVkID0gaXNQcm90byA/IGJ1aWx0SW5Qcm90byA6IGJ1aWx0SW5zO1xuICB2YXIgb2JqID0gaXNQcm90byA/IE9iai5wcm90b3R5cGUgOiBPYmo7XG4gIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLnJlZHVjZShmdW5jdGlvbiAodmFsdWUsIG0pIHtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihtKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICB2YWx1ZVttXSA9IG9ialttXTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJvdG90eXBlQ2hhaW4oT2JqKSB7XG4gIHZhciBtZXRob2RzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cbiAgcmV0dXJuIE9iaiA9PT0gRnVuY3Rpb24ucHJvdG90eXBlID8gbWV0aG9kcyA6IGdldFByb3RvdHlwZUNoYWluKE9iamVjdC5nZXRQcm90b3R5cGVPZihPYmopLCBmbi5hc3NpZ24oZ2V0SW50ZXJuYWxNZXRob2RzKE9iaiwgdHJ1ZSksIG1ldGhvZHMpKTtcbn1cblxuZnVuY3Rpb24gd2Fybihtc2cpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgLyplc2xpbnQtZGlzYWJsZSovXG4gIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLndhcm4obmV3IFJlZmVyZW5jZUVycm9yKG1zZykpO1xuICB9XG4gIC8qZXNsaW50LWVuYWJsZSovXG59XG5cbmZ1bmN0aW9uIHVpZChjb250YWluZXIsIG5hbWUpIHtcbiAgdmFyIGNvdW50ID0gMDtcbiAgdmFyIGtleSA9IG5hbWU7XG4gIHdoaWxlIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChjb250YWluZXIsIGtleSkpIHtcbiAgICBrZXkgPSBuYW1lICsgU3RyaW5nKCsrY291bnQpO1xuICB9XG4gIHJldHVybiBrZXk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFzQ29uc3RhbnQobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9bYS16XShbQS1aXSkvZywgZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gU3RyaW5nKGlbMF0pICsgJ18nICsgU3RyaW5nKGlbMV0udG9Mb3dlckNhc2UoKSk7XG4gIH0pLnRvVXBwZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoSWRlbnRpdHkoeCkge1xuICBpZiAoeCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbnVsbDtcblxuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYSA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBhLmxlbmd0aCA/IFt4XS5jb25jYXQoYSkgOiB4O1xufVxuXG5mdW5jdGlvbiBmc2EoaWQsIHR5cGUsIHBheWxvYWQsIGRldGFpbHMpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiB0eXBlLFxuICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgbWV0YTogX2V4dGVuZHMoe1xuICAgICAgZGlzcGF0Y2hJZDogaWRcbiAgICB9LCBkZXRhaWxzKSxcblxuICAgIGlkOiBpZCxcbiAgICBhY3Rpb246IHR5cGUsXG4gICAgZGF0YTogcGF5bG9hZCxcbiAgICBkZXRhaWxzOiBkZXRhaWxzXG4gIH07XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoKGlkLCBhY3Rpb25PYmosIHBheWxvYWQsIGFsdCkge1xuICB2YXIgZGF0YSA9IGFjdGlvbk9iai5kaXNwYXRjaChwYXlsb2FkKTtcbiAgaWYgKGRhdGEgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG5cbiAgdmFyIHR5cGUgPSBhY3Rpb25PYmouaWQ7XG4gIHZhciBuYW1lc3BhY2UgPSB0eXBlO1xuICB2YXIgbmFtZSA9IHR5cGU7XG4gIHZhciBkZXRhaWxzID0geyBpZDogdHlwZSwgbmFtZXNwYWNlOiBuYW1lc3BhY2UsIG5hbWU6IG5hbWUgfTtcblxuICB2YXIgZGlzcGF0Y2hMYXRlciA9IGZ1bmN0aW9uIGRpc3BhdGNoTGF0ZXIoeCkge1xuICAgIHJldHVybiBhbHQuZGlzcGF0Y2godHlwZSwgeCwgZGV0YWlscyk7XG4gIH07XG5cbiAgaWYgKGZuLmlzRnVuY3Rpb24oZGF0YSkpIHJldHVybiBkYXRhKGRpc3BhdGNoTGF0ZXIsIGFsdCk7XG5cbiAgLy8gWFhYIHN0YW5kYXJkaXplIHRoaXNcbiAgcmV0dXJuIGFsdC5kaXNwYXRjaGVyLmRpc3BhdGNoKGZzYShpZCwgdHlwZSwgZGF0YSwgZGV0YWlscykpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gTm9vcENsYXNzKCkge30iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnNldEFwcFN0YXRlID0gc2V0QXBwU3RhdGU7XG5leHBvcnRzLnNuYXBzaG90ID0gc25hcHNob3Q7XG5leHBvcnRzLnNhdmVJbml0aWFsU25hcHNob3QgPSBzYXZlSW5pdGlhbFNuYXBzaG90O1xuZXhwb3J0cy5maWx0ZXJTbmFwc2hvdHMgPSBmaWx0ZXJTbmFwc2hvdHM7XG5cbnZhciBfZnVuY3Rpb25zID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zJyk7XG5cbnZhciBmbiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9mdW5jdGlvbnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqWydkZWZhdWx0J10gPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBzZXRBcHBTdGF0ZShpbnN0YW5jZSwgZGF0YSwgb25TdG9yZSkge1xuICB2YXIgb2JqID0gaW5zdGFuY2UuZGVzZXJpYWxpemUoZGF0YSk7XG4gIGZuLmVhY2hPYmplY3QoZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICB2YXIgc3RvcmUgPSBpbnN0YW5jZS5zdG9yZXNba2V5XTtcbiAgICBpZiAoc3RvcmUpIHtcbiAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBzdG9yZS5TdG9yZU1vZGVsLmNvbmZpZztcblxuICAgICAgICB2YXIgc3RhdGUgPSBzdG9yZS5zdGF0ZTtcbiAgICAgICAgaWYgKGNvbmZpZy5vbkRlc2VyaWFsaXplKSBvYmpba2V5XSA9IGNvbmZpZy5vbkRlc2VyaWFsaXplKHZhbHVlKSB8fCB2YWx1ZTtcbiAgICAgICAgaWYgKGZuLmlzTXV0YWJsZU9iamVjdChzdGF0ZSkpIHtcbiAgICAgICAgICBmbi5lYWNoT2JqZWN0KGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlIHN0YXRlW2tdO1xuICAgICAgICAgIH0sIFtzdGF0ZV0pO1xuICAgICAgICAgIGZuLmFzc2lnbihzdGF0ZSwgb2JqW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0b3JlLnN0YXRlID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgb25TdG9yZShzdG9yZSwgc3RvcmUuc3RhdGUpO1xuICAgICAgfSkoKTtcbiAgICB9XG4gIH0sIFtvYmpdKTtcbn1cblxuZnVuY3Rpb24gc25hcHNob3QoaW5zdGFuY2UpIHtcbiAgdmFyIHN0b3JlTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBbXSA6IGFyZ3VtZW50c1sxXTtcblxuICB2YXIgc3RvcmVzID0gc3RvcmVOYW1lcy5sZW5ndGggPyBzdG9yZU5hbWVzIDogT2JqZWN0LmtleXMoaW5zdGFuY2Uuc3RvcmVzKTtcbiAgcmV0dXJuIHN0b3Jlcy5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgc3RvcmVIYW5kbGUpIHtcbiAgICB2YXIgc3RvcmVOYW1lID0gc3RvcmVIYW5kbGUuZGlzcGxheU5hbWUgfHwgc3RvcmVIYW5kbGU7XG4gICAgdmFyIHN0b3JlID0gaW5zdGFuY2Uuc3RvcmVzW3N0b3JlTmFtZV07XG4gICAgdmFyIGNvbmZpZyA9IHN0b3JlLlN0b3JlTW9kZWwuY29uZmlnO1xuXG4gICAgc3RvcmUubGlmZWN5Y2xlKCdzbmFwc2hvdCcpO1xuICAgIHZhciBjdXN0b21TbmFwc2hvdCA9IGNvbmZpZy5vblNlcmlhbGl6ZSAmJiBjb25maWcub25TZXJpYWxpemUoc3RvcmUuc3RhdGUpO1xuICAgIG9ialtzdG9yZU5hbWVdID0gY3VzdG9tU25hcHNob3QgPyBjdXN0b21TbmFwc2hvdCA6IHN0b3JlLmdldFN0YXRlKCk7XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufVxuXG5mdW5jdGlvbiBzYXZlSW5pdGlhbFNuYXBzaG90KGluc3RhbmNlLCBrZXkpIHtcbiAgdmFyIHN0YXRlID0gaW5zdGFuY2UuZGVzZXJpYWxpemUoaW5zdGFuY2Uuc2VyaWFsaXplKGluc3RhbmNlLnN0b3Jlc1trZXldLnN0YXRlKSk7XG4gIGluc3RhbmNlLl9pbml0U25hcHNob3Rba2V5XSA9IHN0YXRlO1xuICBpbnN0YW5jZS5fbGFzdFNuYXBzaG90W2tleV0gPSBzdGF0ZTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyU25hcHNob3RzKGluc3RhbmNlLCBzdGF0ZSwgc3RvcmVzKSB7XG4gIHJldHVybiBzdG9yZXMucmVkdWNlKGZ1bmN0aW9uIChvYmosIHN0b3JlKSB7XG4gICAgdmFyIHN0b3JlTmFtZSA9IHN0b3JlLmRpc3BsYXlOYW1lIHx8IHN0b3JlO1xuICAgIGlmICghc3RhdGVbc3RvcmVOYW1lXSkge1xuICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFN0cmluZyhzdG9yZU5hbWUpICsgJyBpcyBub3QgYSB2YWxpZCBzdG9yZScpO1xuICAgIH1cbiAgICBvYmpbc3RvcmVOYW1lXSA9IHN0YXRlW3N0b3JlTmFtZV07XG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xufSIsInZhciBwU2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG52YXIgb2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4vbGliL2tleXMuanMnKTtcbnZhciBpc0FyZ3VtZW50cyA9IHJlcXVpcmUoJy4vbGliL2lzX2FyZ3VtZW50cy5qcycpO1xuXG52YXIgZGVlcEVxdWFsID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCwgb3B0cykge1xuICBpZiAoIW9wdHMpIG9wdHMgPSB7fTtcbiAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG5cbiAgfSBlbHNlIGlmIChhY3R1YWwgaW5zdGFuY2VvZiBEYXRlICYmIGV4cGVjdGVkIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIHJldHVybiBhY3R1YWwuZ2V0VGltZSgpID09PSBleHBlY3RlZC5nZXRUaW1lKCk7XG5cbiAgLy8gNy4zLiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuICAvLyBlcXVpdmFsZW5jZSBpcyBkZXRlcm1pbmVkIGJ5ID09LlxuICB9IGVsc2UgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkIHx8IHR5cGVvZiBhY3R1YWwgIT0gJ29iamVjdCcgJiYgdHlwZW9mIGV4cGVjdGVkICE9ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG9wdHMuc3RyaWN0ID8gYWN0dWFsID09PSBleHBlY3RlZCA6IGFjdHVhbCA9PSBleHBlY3RlZDtcblxuICAvLyA3LjQuIEZvciBhbGwgb3RoZXIgT2JqZWN0IHBhaXJzLCBpbmNsdWRpbmcgQXJyYXkgb2JqZWN0cywgZXF1aXZhbGVuY2UgaXNcbiAgLy8gZGV0ZXJtaW5lZCBieSBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGFzIHZlcmlmaWVkXG4gIC8vIHdpdGggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKSwgdGhlIHNhbWUgc2V0IG9mIGtleXNcbiAgLy8gKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksIGVxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeVxuICAvLyBjb3JyZXNwb25kaW5nIGtleSwgYW5kIGFuIGlkZW50aWNhbCAncHJvdG90eXBlJyBwcm9wZXJ0eS4gTm90ZTogdGhpc1xuICAvLyBhY2NvdW50cyBmb3IgYm90aCBuYW1lZCBhbmQgaW5kZXhlZCBwcm9wZXJ0aWVzIG9uIEFycmF5cy5cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqRXF1aXYoYWN0dWFsLCBleHBlY3RlZCwgb3B0cyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWRPck51bGwodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyICh4KSB7XG4gIGlmICgheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIHgubGVuZ3RoICE9PSAnbnVtYmVyJykgcmV0dXJuIGZhbHNlO1xuICBpZiAodHlwZW9mIHguY29weSAhPT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeC5zbGljZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoeC5sZW5ndGggPiAwICYmIHR5cGVvZiB4WzBdICE9PSAnbnVtYmVyJykgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gb2JqRXF1aXYoYSwgYiwgb3B0cykge1xuICB2YXIgaSwga2V5O1xuICBpZiAoaXNVbmRlZmluZWRPck51bGwoYSkgfHwgaXNVbmRlZmluZWRPck51bGwoYikpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvLyBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuXG4gIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTtcbiAgLy9+fn5JJ3ZlIG1hbmFnZWQgdG8gYnJlYWsgT2JqZWN0LmtleXMgdGhyb3VnaCBzY3Jld3kgYXJndW1lbnRzIHBhc3NpbmcuXG4gIC8vICAgQ29udmVydGluZyB0byBhcnJheSBzb2x2ZXMgdGhlIHByb2JsZW0uXG4gIGlmIChpc0FyZ3VtZW50cyhhKSkge1xuICAgIGlmICghaXNBcmd1bWVudHMoYikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgYSA9IHBTbGljZS5jYWxsKGEpO1xuICAgIGIgPSBwU2xpY2UuY2FsbChiKTtcbiAgICByZXR1cm4gZGVlcEVxdWFsKGEsIGIsIG9wdHMpO1xuICB9XG4gIGlmIChpc0J1ZmZlcihhKSkge1xuICAgIGlmICghaXNCdWZmZXIoYikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYVtpXSAhPT0gYltpXSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB0cnkge1xuICAgIHZhciBrYSA9IG9iamVjdEtleXMoYSksXG4gICAgICAgIGtiID0gb2JqZWN0S2V5cyhiKTtcbiAgfSBjYXRjaCAoZSkgey8vaGFwcGVucyB3aGVuIG9uZSBpcyBhIHN0cmluZyBsaXRlcmFsIGFuZCB0aGUgb3RoZXIgaXNuJ3RcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlc1xuICAvLyBoYXNPd25Qcm9wZXJ0eSlcbiAgaWYgKGthLmxlbmd0aCAhPSBrYi5sZW5ndGgpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvL3RoZSBzYW1lIHNldCBvZiBrZXlzIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLFxuICBrYS5zb3J0KCk7XG4gIGtiLnNvcnQoKTtcbiAgLy9+fn5jaGVhcCBrZXkgdGVzdFxuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChrYVtpXSAhPSBrYltpXSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvL2VxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeSBjb3JyZXNwb25kaW5nIGtleSwgYW5kXG4gIC8vfn5+cG9zc2libHkgZXhwZW5zaXZlIGRlZXAgdGVzdFxuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGtleSA9IGthW2ldO1xuICAgIGlmICghZGVlcEVxdWFsKGFba2V5XSwgYltrZXldLCBvcHRzKSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0eXBlb2YgYSA9PT0gdHlwZW9mIGI7XG59XG4iLCJ2YXIgc3VwcG9ydHNBcmd1bWVudHNDbGFzcyA9IChmdW5jdGlvbigpe1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50cylcbn0pKCkgPT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHN1cHBvcnRzQXJndW1lbnRzQ2xhc3MgPyBzdXBwb3J0ZWQgOiB1bnN1cHBvcnRlZDtcblxuZXhwb3J0cy5zdXBwb3J0ZWQgPSBzdXBwb3J0ZWQ7XG5mdW5jdGlvbiBzdXBwb3J0ZWQob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJztcbn07XG5cbmV4cG9ydHMudW5zdXBwb3J0ZWQgPSB1bnN1cHBvcnRlZDtcbmZ1bmN0aW9uIHVuc3VwcG9ydGVkKG9iamVjdCl7XG4gIHJldHVybiBvYmplY3QgJiZcbiAgICB0eXBlb2Ygb2JqZWN0ID09ICdvYmplY3QnICYmXG4gICAgdHlwZW9mIG9iamVjdC5sZW5ndGggPT0gJ251bWJlcicgJiZcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnY2FsbGVlJykgJiZcbiAgICAhT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKG9iamVjdCwgJ2NhbGxlZScpIHx8XG4gICAgZmFsc2U7XG59O1xuIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSAnZnVuY3Rpb24nXG4gID8gT2JqZWN0LmtleXMgOiBzaGltO1xuXG5leHBvcnRzLnNoaW0gPSBzaGltO1xuZnVuY3Rpb24gc2hpbSAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuICByZXR1cm4ga2V5cztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cy5EaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9saWIvRGlzcGF0Y2hlcicpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEaXNwYXRjaGVyXG4gKiBcbiAqIEBwcmV2ZW50TXVuZ2VcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBfcHJlZml4ID0gJ0lEXyc7XG5cbi8qKlxuICogRGlzcGF0Y2hlciBpcyB1c2VkIHRvIGJyb2FkY2FzdCBwYXlsb2FkcyB0byByZWdpc3RlcmVkIGNhbGxiYWNrcy4gVGhpcyBpc1xuICogZGlmZmVyZW50IGZyb20gZ2VuZXJpYyBwdWItc3ViIHN5c3RlbXMgaW4gdHdvIHdheXM6XG4gKlxuICogICAxKSBDYWxsYmFja3MgYXJlIG5vdCBzdWJzY3JpYmVkIHRvIHBhcnRpY3VsYXIgZXZlbnRzLiBFdmVyeSBwYXlsb2FkIGlzXG4gKiAgICAgIGRpc3BhdGNoZWQgdG8gZXZlcnkgcmVnaXN0ZXJlZCBjYWxsYmFjay5cbiAqICAgMikgQ2FsbGJhY2tzIGNhbiBiZSBkZWZlcnJlZCBpbiB3aG9sZSBvciBwYXJ0IHVudGlsIG90aGVyIGNhbGxiYWNrcyBoYXZlXG4gKiAgICAgIGJlZW4gZXhlY3V0ZWQuXG4gKlxuICogRm9yIGV4YW1wbGUsIGNvbnNpZGVyIHRoaXMgaHlwb3RoZXRpY2FsIGZsaWdodCBkZXN0aW5hdGlvbiBmb3JtLCB3aGljaFxuICogc2VsZWN0cyBhIGRlZmF1bHQgY2l0eSB3aGVuIGEgY291bnRyeSBpcyBzZWxlY3RlZDpcbiAqXG4gKiAgIHZhciBmbGlnaHREaXNwYXRjaGVyID0gbmV3IERpc3BhdGNoZXIoKTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNvdW50cnkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENvdW50cnlTdG9yZSA9IHtjb3VudHJ5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNpdHkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENpdHlTdG9yZSA9IHtjaXR5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBiYXNlIGZsaWdodCBwcmljZSBvZiB0aGUgc2VsZWN0ZWQgY2l0eVxuICogICB2YXIgRmxpZ2h0UHJpY2VTdG9yZSA9IHtwcmljZTogbnVsbH1cbiAqXG4gKiBXaGVuIGEgdXNlciBjaGFuZ2VzIHRoZSBzZWxlY3RlZCBjaXR5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjaXR5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDaXR5OiAncGFyaXMnXG4gKiAgIH0pO1xuICpcbiAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBgQ2l0eVN0b3JlYDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjaXR5LXVwZGF0ZScpIHtcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gcGF5bG9hZC5zZWxlY3RlZENpdHk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBjb3VudHJ5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjb3VudHJ5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDb3VudHJ5OiAnYXVzdHJhbGlhJ1xuICogICB9KTtcbiAqXG4gKiBUaGlzIHBheWxvYWQgaXMgZGlnZXN0ZWQgYnkgYm90aCBzdG9yZXM6XG4gKlxuICogICBDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIENvdW50cnlTdG9yZS5jb3VudHJ5ID0gcGF5bG9hZC5zZWxlY3RlZENvdW50cnk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSBjYWxsYmFjayB0byB1cGRhdGUgYENvdW50cnlTdG9yZWAgaXMgcmVnaXN0ZXJlZCwgd2Ugc2F2ZSBhIHJlZmVyZW5jZVxuICogdG8gdGhlIHJldHVybmVkIHRva2VuLiBVc2luZyB0aGlzIHRva2VuIHdpdGggYHdhaXRGb3IoKWAsIHdlIGNhbiBndWFyYW50ZWVcbiAqIHRoYXQgYENvdW50cnlTdG9yZWAgaXMgdXBkYXRlZCBiZWZvcmUgdGhlIGNhbGxiYWNrIHRoYXQgdXBkYXRlcyBgQ2l0eVN0b3JlYFxuICogbmVlZHMgdG8gcXVlcnkgaXRzIGRhdGEuXG4gKlxuICogICBDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIC8vIGBDb3VudHJ5U3RvcmUuY291bnRyeWAgbWF5IG5vdCBiZSB1cGRhdGVkLlxuICogICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBpcyBub3cgZ3VhcmFudGVlZCB0byBiZSB1cGRhdGVkLlxuICpcbiAqICAgICAgIC8vIFNlbGVjdCB0aGUgZGVmYXVsdCBjaXR5IGZvciB0aGUgbmV3IGNvdW50cnlcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gZ2V0RGVmYXVsdENpdHlGb3JDb3VudHJ5KENvdW50cnlTdG9yZS5jb3VudHJ5KTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSB1c2FnZSBvZiBgd2FpdEZvcigpYCBjYW4gYmUgY2hhaW5lZCwgZm9yIGV4YW1wbGU6XG4gKlxuICogICBGbGlnaHRQcmljZVN0b3JlLmRpc3BhdGNoVG9rZW4gPVxuICogICAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgICAgc3dpdGNoIChwYXlsb2FkLmFjdGlvblR5cGUpIHtcbiAqICAgICAgICAgY2FzZSAnY291bnRyeS11cGRhdGUnOlxuICogICAgICAgICBjYXNlICdjaXR5LXVwZGF0ZSc6XG4gKiAgICAgICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUucHJpY2UgPVxuICogICAgICAgICAgICAgZ2V0RmxpZ2h0UHJpY2VTdG9yZShDb3VudHJ5U3RvcmUuY291bnRyeSwgQ2l0eVN0b3JlLmNpdHkpO1xuICogICAgICAgICAgIGJyZWFrO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogVGhlIGBjb3VudHJ5LXVwZGF0ZWAgcGF5bG9hZCB3aWxsIGJlIGd1YXJhbnRlZWQgdG8gaW52b2tlIHRoZSBzdG9yZXMnXG4gKiByZWdpc3RlcmVkIGNhbGxiYWNrcyBpbiBvcmRlcjogYENvdW50cnlTdG9yZWAsIGBDaXR5U3RvcmVgLCB0aGVuXG4gKiBgRmxpZ2h0UHJpY2VTdG9yZWAuXG4gKi9cblxudmFyIERpc3BhdGNoZXIgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEaXNwYXRjaGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEaXNwYXRjaGVyKTtcblxuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuICAgIHRoaXMuX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9pc0hhbmRsZWQgPSB7fTtcbiAgICB0aGlzLl9pc1BlbmRpbmcgPSB7fTtcbiAgICB0aGlzLl9sYXN0SUQgPSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2l0aCBldmVyeSBkaXNwYXRjaGVkIHBheWxvYWQuIFJldHVybnNcbiAgICogYSB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHdpdGggYHdhaXRGb3IoKWAuXG4gICAqL1xuXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gcmVnaXN0ZXIoY2FsbGJhY2spIHtcbiAgICB2YXIgaWQgPSBfcHJlZml4ICsgdGhpcy5fbGFzdElEKys7XG4gICAgdGhpcy5fY2FsbGJhY2tzW2lkXSA9IGNhbGxiYWNrO1xuICAgIHJldHVybiBpZDtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNhbGxiYWNrIGJhc2VkIG9uIGl0cyB0b2tlbi5cbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUudW5yZWdpc3RlciA9IGZ1bmN0aW9uIHVucmVnaXN0ZXIoaWQpIHtcbiAgICAhdGhpcy5fY2FsbGJhY2tzW2lkXSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEaXNwYXRjaGVyLnVucmVnaXN0ZXIoLi4uKTogYCVzYCBkb2VzIG5vdCBtYXAgdG8gYSByZWdpc3RlcmVkIGNhbGxiYWNrLicsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tpZF07XG4gIH07XG5cbiAgLyoqXG4gICAqIFdhaXRzIGZvciB0aGUgY2FsbGJhY2tzIHNwZWNpZmllZCB0byBiZSBpbnZva2VkIGJlZm9yZSBjb250aW51aW5nIGV4ZWN1dGlvblxuICAgKiBvZiB0aGUgY3VycmVudCBjYWxsYmFjay4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBhIGNhbGxiYWNrIGluXG4gICAqIHJlc3BvbnNlIHRvIGEgZGlzcGF0Y2hlZCBwYXlsb2FkLlxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS53YWl0Rm9yID0gZnVuY3Rpb24gd2FpdEZvcihpZHMpIHtcbiAgICAhdGhpcy5faXNEaXNwYXRjaGluZyA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEaXNwYXRjaGVyLndhaXRGb3IoLi4uKTogTXVzdCBiZSBpbnZva2VkIHdoaWxlIGRpc3BhdGNoaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaWRzLmxlbmd0aDsgaWkrKykge1xuICAgICAgdmFyIGlkID0gaWRzW2lpXTtcbiAgICAgIGlmICh0aGlzLl9pc1BlbmRpbmdbaWRdKSB7XG4gICAgICAgICF0aGlzLl9pc0hhbmRsZWRbaWRdID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBDaXJjdWxhciBkZXBlbmRlbmN5IGRldGVjdGVkIHdoaWxlICcgKyAnd2FpdGluZyBmb3IgYCVzYC4nLCBpZCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgICF0aGlzLl9jYWxsYmFja3NbaWRdID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJywgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBwYXlsb2FkIHRvIGFsbCByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiBkaXNwYXRjaChwYXlsb2FkKSB7XG4gICAgISF0aGlzLl9pc0Rpc3BhdGNoaW5nID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoLmRpc3BhdGNoKC4uLik6IENhbm5vdCBkaXNwYXRjaCBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N0YXJ0RGlzcGF0Y2hpbmcocGF5bG9hZCk7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuX2NhbGxiYWNrcykge1xuICAgICAgICBpZiAodGhpcy5faXNQZW5kaW5nW2lkXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5fc3RvcERpc3BhdGNoaW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJcyB0aGlzIERpc3BhdGNoZXIgY3VycmVudGx5IGRpc3BhdGNoaW5nLlxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5pc0Rpc3BhdGNoaW5nID0gZnVuY3Rpb24gaXNEaXNwYXRjaGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5faXNEaXNwYXRjaGluZztcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCB0aGUgY2FsbGJhY2sgc3RvcmVkIHdpdGggdGhlIGdpdmVuIGlkLiBBbHNvIGRvIHNvbWUgaW50ZXJuYWxcbiAgICogYm9va2tlZXBpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5faW52b2tlQ2FsbGJhY2sgPSBmdW5jdGlvbiBfaW52b2tlQ2FsbGJhY2soaWQpIHtcbiAgICB0aGlzLl9pc1BlbmRpbmdbaWRdID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsYmFja3NbaWRdKHRoaXMuX3BlbmRpbmdQYXlsb2FkKTtcbiAgICB0aGlzLl9pc0hhbmRsZWRbaWRdID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHVwIGJvb2trZWVwaW5nIG5lZWRlZCB3aGVuIGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuX3N0YXJ0RGlzcGF0Y2hpbmcgPSBmdW5jdGlvbiBfc3RhcnREaXNwYXRjaGluZyhwYXlsb2FkKSB7XG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy5fY2FsbGJhY2tzKSB7XG4gICAgICB0aGlzLl9pc1BlbmRpbmdbaWRdID0gZmFsc2U7XG4gICAgICB0aGlzLl9pc0hhbmRsZWRbaWRdID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX3BlbmRpbmdQYXlsb2FkID0gcGF5bG9hZDtcbiAgICB0aGlzLl9pc0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgYm9va2tlZXBpbmcgdXNlZCBmb3IgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5fc3RvcERpc3BhdGNoaW5nID0gZnVuY3Rpb24gX3N0b3BEaXNwYXRjaGluZygpIHtcbiAgICBkZWxldGUgdGhpcy5fcGVuZGluZ1BheWxvYWQ7XG4gICAgdGhpcy5faXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiBEaXNwYXRjaGVyO1xufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEaXNwYXRjaGVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnZhcmlhbnRcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxudmFyIGludmFyaWFudCA9IGZ1bmN0aW9uIChjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgKyAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ0ludmFyaWFudCBWaW9sYXRpb246ICcgKyBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50OyIsIi8qKlxuICogSW5kaWNhdGVzIHRoYXQgbmF2aWdhdGlvbiB3YXMgY2F1c2VkIGJ5IGEgY2FsbCB0byBoaXN0b3J5LnB1c2guXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBQVVNIID0gJ1BVU0gnO1xuXG5leHBvcnRzLlBVU0ggPSBQVVNIO1xuLyoqXG4gKiBJbmRpY2F0ZXMgdGhhdCBuYXZpZ2F0aW9uIHdhcyBjYXVzZWQgYnkgYSBjYWxsIHRvIGhpc3RvcnkucmVwbGFjZS5cbiAqL1xudmFyIFJFUExBQ0UgPSAnUkVQTEFDRSc7XG5cbmV4cG9ydHMuUkVQTEFDRSA9IFJFUExBQ0U7XG4vKipcbiAqIEluZGljYXRlcyB0aGF0IG5hdmlnYXRpb24gd2FzIGNhdXNlZCBieSBzb21lIG90aGVyIGFjdGlvbiBzdWNoXG4gKiBhcyB1c2luZyBhIGJyb3dzZXIncyBiYWNrL2ZvcndhcmQgYnV0dG9ucyBhbmQvb3IgbWFudWFsbHkgbWFuaXB1bGF0aW5nXG4gKiB0aGUgVVJMIGluIGEgYnJvd3NlcidzIGxvY2F0aW9uIGJhci4gVGhpcyBpcyB0aGUgZGVmYXVsdC5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvd0V2ZW50SGFuZGxlcnMvb25wb3BzdGF0ZVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBQT1AgPSAnUE9QJztcblxuZXhwb3J0cy5QT1AgPSBQT1A7XG5leHBvcnRzWydkZWZhdWx0J10gPSB7XG4gIFBVU0g6IFBVU0gsXG4gIFJFUExBQ0U6IFJFUExBQ0UsXG4gIFBPUDogUE9QXG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5sb29wQXN5bmMgPSBsb29wQXN5bmM7XG5cbmZ1bmN0aW9uIGxvb3BBc3luYyh0dXJucywgd29yaywgY2FsbGJhY2spIHtcbiAgdmFyIGN1cnJlbnRUdXJuID0gMDtcbiAgdmFyIGlzRG9uZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgaXNEb25lID0gdHJ1ZTtcbiAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICBpZiAoaXNEb25lKSByZXR1cm47XG5cbiAgICBpZiAoY3VycmVudFR1cm4gPCB0dXJucykge1xuICAgICAgd29yay5jYWxsKHRoaXMsIGN1cnJlbnRUdXJuKyssIG5leHQsIGRvbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb25lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgbmV4dCgpO1xufSIsIi8qZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuc2F2ZVN0YXRlID0gc2F2ZVN0YXRlO1xuZXhwb3J0cy5yZWFkU3RhdGUgPSByZWFkU3RhdGU7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBLZXlQcmVmaXggPSAnQEBIaXN0b3J5Lyc7XG52YXIgUXVvdGFFeGNlZWRlZEVycm9yID0gJ1F1b3RhRXhjZWVkZWRFcnJvcic7XG52YXIgU2VjdXJpdHlFcnJvciA9ICdTZWN1cml0eUVycm9yJztcblxuZnVuY3Rpb24gY3JlYXRlS2V5KGtleSkge1xuICByZXR1cm4gS2V5UHJlZml4ICsga2V5O1xufVxuXG5mdW5jdGlvbiBzYXZlU3RhdGUoa2V5LCBzdGF0ZSkge1xuICB0cnkge1xuICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGNyZWF0ZUtleShrZXkpLCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvci5uYW1lID09PSBTZWN1cml0eUVycm9yKSB7XG4gICAgICAvLyBCbG9ja2luZyBjb29raWVzIGluIENocm9tZS9GaXJlZm94L1NhZmFyaSB0aHJvd3MgU2VjdXJpdHlFcnJvciBvbiBhbnlcbiAgICAgIC8vIGF0dGVtcHQgdG8gYWNjZXNzIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5cbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXShmYWxzZSwgJ1toaXN0b3J5XSBVbmFibGUgdG8gc2F2ZSBzdGF0ZTsgc2Vzc2lvblN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZSBkdWUgdG8gc2VjdXJpdHkgc2V0dGluZ3MnKSA6IHVuZGVmaW5lZDtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlcnJvci5uYW1lID09PSBRdW90YUV4Y2VlZGVkRXJyb3IgJiYgd2luZG93LnNlc3Npb25TdG9yYWdlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gU2FmYXJpIFwicHJpdmF0ZSBtb2RlXCIgdGhyb3dzIFF1b3RhRXhjZWVkZWRFcnJvci5cbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXShmYWxzZSwgJ1toaXN0b3J5XSBVbmFibGUgdG8gc2F2ZSBzdGF0ZTsgc2Vzc2lvblN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZSBpbiBTYWZhcmkgcHJpdmF0ZSBtb2RlJykgOiB1bmRlZmluZWQ7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWFkU3RhdGUoa2V5KSB7XG4gIHZhciBqc29uID0gdW5kZWZpbmVkO1xuICB0cnkge1xuICAgIGpzb24gPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShjcmVhdGVLZXkoa2V5KSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLm5hbWUgPT09IFNlY3VyaXR5RXJyb3IpIHtcbiAgICAgIC8vIEJsb2NraW5nIGNvb2tpZXMgaW4gQ2hyb21lL0ZpcmVmb3gvU2FmYXJpIHRocm93cyBTZWN1cml0eUVycm9yIG9uIGFueVxuICAgICAgLy8gYXR0ZW1wdCB0byBhY2Nlc3Mgd2luZG93LnNlc3Npb25TdG9yYWdlLlxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKGZhbHNlLCAnW2hpc3RvcnldIFVuYWJsZSB0byByZWFkIHN0YXRlOyBzZXNzaW9uU3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIGR1ZSB0byBzZWN1cml0eSBzZXR0aW5ncycpIDogdW5kZWZpbmVkO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBpZiAoanNvbikge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gSWdub3JlIGludmFsaWQgSlNPTi5cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmFkZEV2ZW50TGlzdGVuZXIgPSBhZGRFdmVudExpc3RlbmVyO1xuZXhwb3J0cy5yZW1vdmVFdmVudExpc3RlbmVyID0gcmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbmV4cG9ydHMuZ2V0SGFzaFBhdGggPSBnZXRIYXNoUGF0aDtcbmV4cG9ydHMucmVwbGFjZUhhc2hQYXRoID0gcmVwbGFjZUhhc2hQYXRoO1xuZXhwb3J0cy5nZXRXaW5kb3dQYXRoID0gZ2V0V2luZG93UGF0aDtcbmV4cG9ydHMuZ28gPSBnbztcbmV4cG9ydHMuZ2V0VXNlckNvbmZpcm1hdGlvbiA9IGdldFVzZXJDb25maXJtYXRpb247XG5leHBvcnRzLnN1cHBvcnRzSGlzdG9yeSA9IHN1cHBvcnRzSGlzdG9yeTtcbmV4cG9ydHMuc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2ggPSBzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaDtcblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudCwgbGlzdGVuZXIpIHtcbiAgaWYgKG5vZGUuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgfSBlbHNlIHtcbiAgICBub2RlLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnQsIGxpc3RlbmVyKSB7XG4gIGlmIChub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgbm9kZS5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRIYXNoUGF0aCgpIHtcbiAgLy8gV2UgY2FuJ3QgdXNlIHdpbmRvdy5sb2NhdGlvbi5oYXNoIGhlcmUgYmVjYXVzZSBpdCdzIG5vdFxuICAvLyBjb25zaXN0ZW50IGFjcm9zcyBicm93c2VycyAtIEZpcmVmb3ggd2lsbCBwcmUtZGVjb2RlIGl0IVxuICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVsxXSB8fCAnJztcbn1cblxuZnVuY3Rpb24gcmVwbGFjZUhhc2hQYXRoKHBhdGgpIHtcbiAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArICcjJyArIHBhdGgpO1xufVxuXG5mdW5jdGlvbiBnZXRXaW5kb3dQYXRoKCkge1xuICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xufVxuXG5mdW5jdGlvbiBnbyhuKSB7XG4gIGlmIChuKSB3aW5kb3cuaGlzdG9yeS5nbyhuKTtcbn1cblxuZnVuY3Rpb24gZ2V0VXNlckNvbmZpcm1hdGlvbihtZXNzYWdlLCBjYWxsYmFjaykge1xuICBjYWxsYmFjayh3aW5kb3cuY29uZmlybShtZXNzYWdlKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBIVE1MNSBoaXN0b3J5IEFQSSBpcyBzdXBwb3J0ZWQuIFRha2VuIGZyb20gTW9kZXJuaXpyLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL2ZlYXR1cmUtZGV0ZWN0cy9oaXN0b3J5LmpzXG4gKiBjaGFuZ2VkIHRvIGF2b2lkIGZhbHNlIG5lZ2F0aXZlcyBmb3IgV2luZG93cyBQaG9uZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWNrdC9yZWFjdC1yb3V0ZXIvaXNzdWVzLzU4NlxuICovXG5cbmZ1bmN0aW9uIHN1cHBvcnRzSGlzdG9yeSgpIHtcbiAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgaWYgKCh1YS5pbmRleE9mKCdBbmRyb2lkIDIuJykgIT09IC0xIHx8IHVhLmluZGV4T2YoJ0FuZHJvaWQgNC4wJykgIT09IC0xKSAmJiB1YS5pbmRleE9mKCdNb2JpbGUgU2FmYXJpJykgIT09IC0xICYmIHVhLmluZGV4T2YoJ0Nocm9tZScpID09PSAtMSAmJiB1YS5pbmRleE9mKCdXaW5kb3dzIFBob25lJykgPT09IC0xKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEZJWE1FOiBXb3JrIGFyb3VuZCBvdXIgYnJvd3NlciBoaXN0b3J5IG5vdCB3b3JraW5nIGNvcnJlY3RseSBvbiBDaHJvbWVcbiAgLy8gaU9TOiBodHRwczovL2dpdGh1Yi5jb20vcmFja3QvcmVhY3Qtcm91dGVyL2lzc3Vlcy8yNTY1XG4gIGlmICh1YS5pbmRleE9mKCdDcmlPUycpICE9PSAtMSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7XG59XG5cbi8qKlxuICogUmV0dXJucyBmYWxzZSBpZiB1c2luZyBnbyhuKSB3aXRoIGhhc2ggaGlzdG9yeSBjYXVzZXMgYSBmdWxsIHBhZ2UgcmVsb2FkLlxuICovXG5cbmZ1bmN0aW9uIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCkge1xuICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICByZXR1cm4gdWEuaW5kZXhPZignRmlyZWZveCcpID09PSAtMTtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbmV4cG9ydHMuY2FuVXNlRE9NID0gY2FuVXNlRE9NOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX2ludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG52YXIgX2ludmFyaWFudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbnZhcmlhbnQpO1xuXG52YXIgX0FjdGlvbnMgPSByZXF1aXJlKCcuL0FjdGlvbnMnKTtcblxudmFyIF9FeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIF9ET01VdGlscyA9IHJlcXVpcmUoJy4vRE9NVXRpbHMnKTtcblxudmFyIF9ET01TdGF0ZVN0b3JhZ2UgPSByZXF1aXJlKCcuL0RPTVN0YXRlU3RvcmFnZScpO1xuXG52YXIgX2NyZWF0ZURPTUhpc3RvcnkgPSByZXF1aXJlKCcuL2NyZWF0ZURPTUhpc3RvcnknKTtcblxudmFyIF9jcmVhdGVET01IaXN0b3J5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZURPTUhpc3RvcnkpO1xuXG52YXIgX3BhcnNlUGF0aCA9IHJlcXVpcmUoJy4vcGFyc2VQYXRoJyk7XG5cbnZhciBfcGFyc2VQYXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcnNlUGF0aCk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgdXNlcyBIVE1MNSdzIGhpc3RvcnkgQVBJXG4gKiAocHVzaFN0YXRlLCByZXBsYWNlU3RhdGUsIGFuZCB0aGUgcG9wc3RhdGUgZXZlbnQpIHRvIG1hbmFnZSBoaXN0b3J5LlxuICogVGhpcyBpcyB0aGUgcmVjb21tZW5kZWQgbWV0aG9kIG9mIG1hbmFnaW5nIGhpc3RvcnkgaW4gYnJvd3NlcnMgYmVjYXVzZVxuICogaXQgcHJvdmlkZXMgdGhlIGNsZWFuZXN0IFVSTHMuXG4gKlxuICogTm90ZTogSW4gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgZnVsbFxuICogcGFnZSByZWxvYWRzIHdpbGwgYmUgdXNlZCB0byBwcmVzZXJ2ZSBVUkxzLlxuICovXG5mdW5jdGlvbiBjcmVhdGVCcm93c2VySGlzdG9yeSgpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICAhX0V4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfaW52YXJpYW50MlsnZGVmYXVsdCddKGZhbHNlLCAnQnJvd3NlciBoaXN0b3J5IG5lZWRzIGEgRE9NJykgOiBfaW52YXJpYW50MlsnZGVmYXVsdCddKGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgZm9yY2VSZWZyZXNoID0gb3B0aW9ucy5mb3JjZVJlZnJlc2g7XG5cbiAgdmFyIGlzU3VwcG9ydGVkID0gX0RPTVV0aWxzLnN1cHBvcnRzSGlzdG9yeSgpO1xuICB2YXIgdXNlUmVmcmVzaCA9ICFpc1N1cHBvcnRlZCB8fCBmb3JjZVJlZnJlc2g7XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudExvY2F0aW9uKGhpc3RvcnlTdGF0ZSkge1xuICAgIGhpc3RvcnlTdGF0ZSA9IGhpc3RvcnlTdGF0ZSB8fCB3aW5kb3cuaGlzdG9yeS5zdGF0ZSB8fCB7fTtcblxuICAgIHZhciBwYXRoID0gX0RPTVV0aWxzLmdldFdpbmRvd1BhdGgoKTtcbiAgICB2YXIgX2hpc3RvcnlTdGF0ZSA9IGhpc3RvcnlTdGF0ZTtcbiAgICB2YXIga2V5ID0gX2hpc3RvcnlTdGF0ZS5rZXk7XG5cbiAgICB2YXIgc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgaWYgKGtleSkge1xuICAgICAgc3RhdGUgPSBfRE9NU3RhdGVTdG9yYWdlLnJlYWRTdGF0ZShrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZSA9IG51bGw7XG4gICAgICBrZXkgPSBoaXN0b3J5LmNyZWF0ZUtleSgpO1xuXG4gICAgICBpZiAoaXNTdXBwb3J0ZWQpIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShfZXh0ZW5kcyh7fSwgaGlzdG9yeVN0YXRlLCB7IGtleToga2V5IH0pLCBudWxsLCBwYXRoKTtcbiAgICB9XG5cbiAgICB2YXIgbG9jYXRpb24gPSBfcGFyc2VQYXRoMlsnZGVmYXVsdCddKHBhdGgpO1xuXG4gICAgcmV0dXJuIGhpc3RvcnkuY3JlYXRlTG9jYXRpb24oX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7IHN0YXRlOiBzdGF0ZSB9KSwgdW5kZWZpbmVkLCBrZXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRQb3BTdGF0ZUxpc3RlbmVyKF9yZWYpIHtcbiAgICB2YXIgdHJhbnNpdGlvblRvID0gX3JlZi50cmFuc2l0aW9uVG87XG5cbiAgICBmdW5jdGlvbiBwb3BTdGF0ZUxpc3RlbmVyKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQuc3RhdGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuOyAvLyBJZ25vcmUgZXh0cmFuZW91cyBwb3BzdGF0ZSBldmVudHMgaW4gV2ViS2l0LlxuXG4gICAgICB0cmFuc2l0aW9uVG8oZ2V0Q3VycmVudExvY2F0aW9uKGV2ZW50LnN0YXRlKSk7XG4gICAgfVxuXG4gICAgX0RPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAncG9wc3RhdGUnLCBwb3BTdGF0ZUxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfRE9NVXRpbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcih3aW5kb3csICdwb3BzdGF0ZScsIHBvcFN0YXRlTGlzdGVuZXIpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBmaW5pc2hUcmFuc2l0aW9uKGxvY2F0aW9uKSB7XG4gICAgdmFyIGJhc2VuYW1lID0gbG9jYXRpb24uYmFzZW5hbWU7XG4gICAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgdmFyIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaDtcbiAgICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XG4gICAgdmFyIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG4gICAgdmFyIGFjdGlvbiA9IGxvY2F0aW9uLmFjdGlvbjtcbiAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5O1xuXG4gICAgaWYgKGFjdGlvbiA9PT0gX0FjdGlvbnMuUE9QKSByZXR1cm47IC8vIE5vdGhpbmcgdG8gZG8uXG5cbiAgICBfRE9NU3RhdGVTdG9yYWdlLnNhdmVTdGF0ZShrZXksIHN0YXRlKTtcblxuICAgIHZhciBwYXRoID0gKGJhc2VuYW1lIHx8ICcnKSArIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcbiAgICB2YXIgaGlzdG9yeVN0YXRlID0ge1xuICAgICAga2V5OiBrZXlcbiAgICB9O1xuXG4gICAgaWYgKGFjdGlvbiA9PT0gX0FjdGlvbnMuUFVTSCkge1xuICAgICAgaWYgKHVzZVJlZnJlc2gpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRoO1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFByZXZlbnQgbG9jYXRpb24gdXBkYXRlLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoaGlzdG9yeVN0YXRlLCBudWxsLCBwYXRoKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSRVBMQUNFXG4gICAgICBpZiAodXNlUmVmcmVzaCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShwYXRoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBQcmV2ZW50IGxvY2F0aW9uIHVwZGF0ZS5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKGhpc3RvcnlTdGF0ZSwgbnVsbCwgcGF0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgaGlzdG9yeSA9IF9jcmVhdGVET01IaXN0b3J5MlsnZGVmYXVsdCddKF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgZ2V0Q3VycmVudExvY2F0aW9uOiBnZXRDdXJyZW50TG9jYXRpb24sXG4gICAgZmluaXNoVHJhbnNpdGlvbjogZmluaXNoVHJhbnNpdGlvbixcbiAgICBzYXZlU3RhdGU6IF9ET01TdGF0ZVN0b3JhZ2Uuc2F2ZVN0YXRlXG4gIH0pKTtcblxuICB2YXIgbGlzdGVuZXJDb3VudCA9IDAsXG4gICAgICBzdG9wUG9wU3RhdGVMaXN0ZW5lciA9IHVuZGVmaW5lZDtcblxuICBmdW5jdGlvbiBsaXN0ZW5CZWZvcmUobGlzdGVuZXIpIHtcbiAgICBpZiAoKytsaXN0ZW5lckNvdW50ID09PSAxKSBzdG9wUG9wU3RhdGVMaXN0ZW5lciA9IHN0YXJ0UG9wU3RhdGVMaXN0ZW5lcihoaXN0b3J5KTtcblxuICAgIHZhciB1bmxpc3RlbiA9IGhpc3RvcnkubGlzdGVuQmVmb3JlKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB1bmxpc3RlbigpO1xuXG4gICAgICBpZiAoLS1saXN0ZW5lckNvdW50ID09PSAwKSBzdG9wUG9wU3RhdGVMaXN0ZW5lcigpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICBpZiAoKytsaXN0ZW5lckNvdW50ID09PSAxKSBzdG9wUG9wU3RhdGVMaXN0ZW5lciA9IHN0YXJ0UG9wU3RhdGVMaXN0ZW5lcihoaXN0b3J5KTtcblxuICAgIHZhciB1bmxpc3RlbiA9IGhpc3RvcnkubGlzdGVuKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB1bmxpc3RlbigpO1xuXG4gICAgICBpZiAoLS1saXN0ZW5lckNvdW50ID09PSAwKSBzdG9wUG9wU3RhdGVMaXN0ZW5lcigpO1xuICAgIH07XG4gIH1cblxuICAvLyBkZXByZWNhdGVkXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vaykge1xuICAgIGlmICgrK2xpc3RlbmVyQ291bnQgPT09IDEpIHN0b3BQb3BTdGF0ZUxpc3RlbmVyID0gc3RhcnRQb3BTdGF0ZUxpc3RlbmVyKGhpc3RvcnkpO1xuXG4gICAgaGlzdG9yeS5yZWdpc3RlclRyYW5zaXRpb25Ib29rKGhvb2spO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiB1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vaykge1xuICAgIGhpc3RvcnkudW5yZWdpc3RlclRyYW5zaXRpb25Ib29rKGhvb2spO1xuXG4gICAgaWYgKC0tbGlzdGVuZXJDb3VudCA9PT0gMCkgc3RvcFBvcFN0YXRlTGlzdGVuZXIoKTtcbiAgfVxuXG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgaGlzdG9yeSwge1xuICAgIGxpc3RlbkJlZm9yZTogbGlzdGVuQmVmb3JlLFxuICAgIGxpc3RlbjogbGlzdGVuLFxuICAgIHJlZ2lzdGVyVHJhbnNpdGlvbkhvb2s6IHJlZ2lzdGVyVHJhbnNpdGlvbkhvb2ssXG4gICAgdW5yZWdpc3RlclRyYW5zaXRpb25Ib29rOiB1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2tcbiAgfSk7XG59XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGNyZWF0ZUJyb3dzZXJIaXN0b3J5O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfaW52YXJpYW50ID0gcmVxdWlyZSgnaW52YXJpYW50Jyk7XG5cbnZhciBfaW52YXJpYW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ludmFyaWFudCk7XG5cbnZhciBfRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBfRE9NVXRpbHMgPSByZXF1aXJlKCcuL0RPTVV0aWxzJyk7XG5cbnZhciBfY3JlYXRlSGlzdG9yeSA9IHJlcXVpcmUoJy4vY3JlYXRlSGlzdG9yeScpO1xuXG52YXIgX2NyZWF0ZUhpc3RvcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlSGlzdG9yeSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZURPTUhpc3Rvcnkob3B0aW9ucykge1xuICB2YXIgaGlzdG9yeSA9IF9jcmVhdGVIaXN0b3J5MlsnZGVmYXVsdCddKF9leHRlbmRzKHtcbiAgICBnZXRVc2VyQ29uZmlybWF0aW9uOiBfRE9NVXRpbHMuZ2V0VXNlckNvbmZpcm1hdGlvblxuICB9LCBvcHRpb25zLCB7XG4gICAgZ286IF9ET01VdGlscy5nb1xuICB9KSk7XG5cbiAgZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgIV9FeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX2ludmFyaWFudDJbJ2RlZmF1bHQnXShmYWxzZSwgJ0RPTSBoaXN0b3J5IG5lZWRzIGEgRE9NJykgOiBfaW52YXJpYW50MlsnZGVmYXVsdCddKGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiBoaXN0b3J5Lmxpc3RlbihsaXN0ZW5lcik7XG4gIH1cblxuICByZXR1cm4gX2V4dGVuZHMoe30sIGhpc3RvcnksIHtcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9KTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gY3JlYXRlRE9NSGlzdG9yeTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIi8vaW1wb3J0IHdhcm5pbmcgZnJvbSAnd2FybmluZydcbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX2RlZXBFcXVhbCA9IHJlcXVpcmUoJ2RlZXAtZXF1YWwnKTtcblxudmFyIF9kZWVwRXF1YWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVlcEVxdWFsKTtcblxudmFyIF9Bc3luY1V0aWxzID0gcmVxdWlyZSgnLi9Bc3luY1V0aWxzJyk7XG5cbnZhciBfQWN0aW9ucyA9IHJlcXVpcmUoJy4vQWN0aW9ucycpO1xuXG52YXIgX2NyZWF0ZUxvY2F0aW9uMiA9IHJlcXVpcmUoJy4vY3JlYXRlTG9jYXRpb24nKTtcblxudmFyIF9jcmVhdGVMb2NhdGlvbjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVMb2NhdGlvbjIpO1xuXG52YXIgX3J1blRyYW5zaXRpb25Ib29rID0gcmVxdWlyZSgnLi9ydW5UcmFuc2l0aW9uSG9vaycpO1xuXG52YXIgX3J1blRyYW5zaXRpb25Ib29rMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3J1blRyYW5zaXRpb25Ib29rKTtcblxudmFyIF9wYXJzZVBhdGggPSByZXF1aXJlKCcuL3BhcnNlUGF0aCcpO1xuXG52YXIgX3BhcnNlUGF0aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYXJzZVBhdGgpO1xuXG52YXIgX2RlcHJlY2F0ZSA9IHJlcXVpcmUoJy4vZGVwcmVjYXRlJyk7XG5cbnZhciBfZGVwcmVjYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlcHJlY2F0ZSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVJhbmRvbUtleShsZW5ndGgpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCBsZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBsb2NhdGlvbnNBcmVFcXVhbChhLCBiKSB7XG4gIHJldHVybiBhLnBhdGhuYW1lID09PSBiLnBhdGhuYW1lICYmIGEuc2VhcmNoID09PSBiLnNlYXJjaCAmJlxuICAvL2EuYWN0aW9uID09PSBiLmFjdGlvbiAmJiAvLyBEaWZmZXJlbnQgYWN0aW9uICE9PSBsb2NhdGlvbiBjaGFuZ2UuXG4gIGEua2V5ID09PSBiLmtleSAmJiBfZGVlcEVxdWFsMlsnZGVmYXVsdCddKGEuc3RhdGUsIGIuc3RhdGUpO1xufVxuXG52YXIgRGVmYXVsdEtleUxlbmd0aCA9IDY7XG5cbmZ1bmN0aW9uIGNyZWF0ZUhpc3RvcnkoKSB7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG4gIHZhciBnZXRDdXJyZW50TG9jYXRpb24gPSBvcHRpb25zLmdldEN1cnJlbnRMb2NhdGlvbjtcbiAgdmFyIGZpbmlzaFRyYW5zaXRpb24gPSBvcHRpb25zLmZpbmlzaFRyYW5zaXRpb247XG4gIHZhciBzYXZlU3RhdGUgPSBvcHRpb25zLnNhdmVTdGF0ZTtcbiAgdmFyIGdvID0gb3B0aW9ucy5nbztcbiAgdmFyIGtleUxlbmd0aCA9IG9wdGlvbnMua2V5TGVuZ3RoO1xuICB2YXIgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IG9wdGlvbnMuZ2V0VXNlckNvbmZpcm1hdGlvbjtcblxuICBpZiAodHlwZW9mIGtleUxlbmd0aCAhPT0gJ251bWJlcicpIGtleUxlbmd0aCA9IERlZmF1bHRLZXlMZW5ndGg7XG5cbiAgdmFyIHRyYW5zaXRpb25Ib29rcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIGxpc3RlbkJlZm9yZShob29rKSB7XG4gICAgdHJhbnNpdGlvbkhvb2tzLnB1c2goaG9vayk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdHJhbnNpdGlvbkhvb2tzID0gdHJhbnNpdGlvbkhvb2tzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbSAhPT0gaG9vaztcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICB2YXIgYWxsS2V5cyA9IFtdO1xuICB2YXIgY2hhbmdlTGlzdGVuZXJzID0gW107XG4gIHZhciBsb2NhdGlvbiA9IHVuZGVmaW5lZDtcblxuICBmdW5jdGlvbiBnZXRDdXJyZW50KCkge1xuICAgIGlmIChwZW5kaW5nTG9jYXRpb24gJiYgcGVuZGluZ0xvY2F0aW9uLmFjdGlvbiA9PT0gX0FjdGlvbnMuUE9QKSB7XG4gICAgICByZXR1cm4gYWxsS2V5cy5pbmRleE9mKHBlbmRpbmdMb2NhdGlvbi5rZXkpO1xuICAgIH0gZWxzZSBpZiAobG9jYXRpb24pIHtcbiAgICAgIHJldHVybiBhbGxLZXlzLmluZGV4T2YobG9jYXRpb24ua2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxvY2F0aW9uKG5ld0xvY2F0aW9uKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBnZXRDdXJyZW50KCk7XG5cbiAgICBsb2NhdGlvbiA9IG5ld0xvY2F0aW9uO1xuXG4gICAgaWYgKGxvY2F0aW9uLmFjdGlvbiA9PT0gX0FjdGlvbnMuUFVTSCkge1xuICAgICAgYWxsS2V5cyA9IFtdLmNvbmNhdChhbGxLZXlzLnNsaWNlKDAsIGN1cnJlbnQgKyAxKSwgW2xvY2F0aW9uLmtleV0pO1xuICAgIH0gZWxzZSBpZiAobG9jYXRpb24uYWN0aW9uID09PSBfQWN0aW9ucy5SRVBMQUNFKSB7XG4gICAgICBhbGxLZXlzW2N1cnJlbnRdID0gbG9jYXRpb24ua2V5O1xuICAgIH1cblxuICAgIGNoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgbGlzdGVuZXIobG9jYXRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgY2hhbmdlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICBsaXN0ZW5lcihsb2NhdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBfbG9jYXRpb24gPSBnZXRDdXJyZW50TG9jYXRpb24oKTtcbiAgICAgIGFsbEtleXMgPSBbX2xvY2F0aW9uLmtleV07XG4gICAgICB1cGRhdGVMb2NhdGlvbihfbG9jYXRpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFuZ2VMaXN0ZW5lcnMgPSBjaGFuZ2VMaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtICE9PSBsaXN0ZW5lcjtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBjb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBjYWxsYmFjaykge1xuICAgIF9Bc3luY1V0aWxzLmxvb3BBc3luYyh0cmFuc2l0aW9uSG9va3MubGVuZ3RoLCBmdW5jdGlvbiAoaW5kZXgsIG5leHQsIGRvbmUpIHtcbiAgICAgIF9ydW5UcmFuc2l0aW9uSG9vazJbJ2RlZmF1bHQnXSh0cmFuc2l0aW9uSG9va3NbaW5kZXhdLCBsb2NhdGlvbiwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICBkb25lKHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgaWYgKGdldFVzZXJDb25maXJtYXRpb24gJiYgdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGdldFVzZXJDb25maXJtYXRpb24obWVzc2FnZSwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgICAgY2FsbGJhY2sob2sgIT09IGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayhtZXNzYWdlICE9PSBmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB2YXIgcGVuZGluZ0xvY2F0aW9uID0gdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25UbyhuZXh0TG9jYXRpb24pIHtcbiAgICBpZiAobG9jYXRpb24gJiYgbG9jYXRpb25zQXJlRXF1YWwobG9jYXRpb24sIG5leHRMb2NhdGlvbikpIHJldHVybjsgLy8gTm90aGluZyB0byBkby5cblxuICAgIHBlbmRpbmdMb2NhdGlvbiA9IG5leHRMb2NhdGlvbjtcblxuICAgIGNvbmZpcm1UcmFuc2l0aW9uVG8obmV4dExvY2F0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmIChwZW5kaW5nTG9jYXRpb24gIT09IG5leHRMb2NhdGlvbikgcmV0dXJuOyAvLyBUcmFuc2l0aW9uIHdhcyBpbnRlcnJ1cHRlZC5cblxuICAgICAgaWYgKG9rKSB7XG4gICAgICAgIC8vIHRyZWF0IFBVU0ggdG8gY3VycmVudCBwYXRoIGxpa2UgUkVQTEFDRSB0byBiZSBjb25zaXN0ZW50IHdpdGggYnJvd3NlcnNcbiAgICAgICAgaWYgKG5leHRMb2NhdGlvbi5hY3Rpb24gPT09IF9BY3Rpb25zLlBVU0gpIHtcbiAgICAgICAgICB2YXIgcHJldlBhdGggPSBjcmVhdGVQYXRoKGxvY2F0aW9uKTtcbiAgICAgICAgICB2YXIgbmV4dFBhdGggPSBjcmVhdGVQYXRoKG5leHRMb2NhdGlvbik7XG5cbiAgICAgICAgICBpZiAobmV4dFBhdGggPT09IHByZXZQYXRoKSBuZXh0TG9jYXRpb24uYWN0aW9uID0gX0FjdGlvbnMuUkVQTEFDRTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaW5pc2hUcmFuc2l0aW9uKG5leHRMb2NhdGlvbikgIT09IGZhbHNlKSB1cGRhdGVMb2NhdGlvbihuZXh0TG9jYXRpb24pO1xuICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbiAmJiBuZXh0TG9jYXRpb24uYWN0aW9uID09PSBfQWN0aW9ucy5QT1ApIHtcbiAgICAgICAgdmFyIHByZXZJbmRleCA9IGFsbEtleXMuaW5kZXhPZihsb2NhdGlvbi5rZXkpO1xuICAgICAgICB2YXIgbmV4dEluZGV4ID0gYWxsS2V5cy5pbmRleE9mKG5leHRMb2NhdGlvbi5rZXkpO1xuXG4gICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xICYmIG5leHRJbmRleCAhPT0gLTEpIGdvKHByZXZJbmRleCAtIG5leHRJbmRleCk7IC8vIFJlc3RvcmUgdGhlIFVSTC5cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHB1c2gobG9jYXRpb24pIHtcbiAgICB0cmFuc2l0aW9uVG8oY3JlYXRlTG9jYXRpb24obG9jYXRpb24sIF9BY3Rpb25zLlBVU0gsIGNyZWF0ZUtleSgpKSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlKGxvY2F0aW9uKSB7XG4gICAgdHJhbnNpdGlvblRvKGNyZWF0ZUxvY2F0aW9uKGxvY2F0aW9uLCBfQWN0aW9ucy5SRVBMQUNFLCBjcmVhdGVLZXkoKSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIGdvKC0xKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICBnbygxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUtleSgpIHtcbiAgICByZXR1cm4gY3JlYXRlUmFuZG9tS2V5KGtleUxlbmd0aCk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVQYXRoKGxvY2F0aW9uKSB7XG4gICAgaWYgKGxvY2F0aW9uID09IG51bGwgfHwgdHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJykgcmV0dXJuIGxvY2F0aW9uO1xuXG4gICAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgdmFyIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaDtcbiAgICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cbiAgICB2YXIgcmVzdWx0ID0gcGF0aG5hbWU7XG5cbiAgICBpZiAoc2VhcmNoKSByZXN1bHQgKz0gc2VhcmNoO1xuXG4gICAgaWYgKGhhc2gpIHJlc3VsdCArPSBoYXNoO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICByZXR1cm4gY3JlYXRlUGF0aChsb2NhdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbiwgYWN0aW9uKSB7XG4gICAgdmFyIGtleSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGNyZWF0ZUtleSgpIDogYXJndW1lbnRzWzJdO1xuXG4gICAgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICdvYmplY3QnKSB7XG4gICAgICAvL3dhcm5pbmcoXG4gICAgICAvLyAgZmFsc2UsXG4gICAgICAvLyAgJ1RoZSBzdGF0ZSAoMm5kKSBhcmd1bWVudCB0byBoaXN0b3J5LmNyZWF0ZUxvY2F0aW9uIGlzIGRlcHJlY2F0ZWQ7IHVzZSBhICcgK1xuICAgICAgLy8gICdsb2NhdGlvbiBkZXNjcmlwdG9yIGluc3RlYWQnXG4gICAgICAvLylcblxuICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbiA9PT0gJ3N0cmluZycpIGxvY2F0aW9uID0gX3BhcnNlUGF0aDJbJ2RlZmF1bHQnXShsb2NhdGlvbik7XG5cbiAgICAgIGxvY2F0aW9uID0gX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7IHN0YXRlOiBhY3Rpb24gfSk7XG5cbiAgICAgIGFjdGlvbiA9IGtleTtcbiAgICAgIGtleSA9IGFyZ3VtZW50c1szXSB8fCBjcmVhdGVLZXkoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2NyZWF0ZUxvY2F0aW9uM1snZGVmYXVsdCddKGxvY2F0aW9uLCBhY3Rpb24sIGtleSk7XG4gIH1cblxuICAvLyBkZXByZWNhdGVkXG4gIGZ1bmN0aW9uIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICB1cGRhdGVMb2NhdGlvblN0YXRlKGxvY2F0aW9uLCBzdGF0ZSk7XG4gICAgICB1cGRhdGVMb2NhdGlvbihsb2NhdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwZGF0ZUxvY2F0aW9uU3RhdGUoZ2V0Q3VycmVudExvY2F0aW9uKCksIHN0YXRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVMb2NhdGlvblN0YXRlKGxvY2F0aW9uLCBzdGF0ZSkge1xuICAgIGxvY2F0aW9uLnN0YXRlID0gX2V4dGVuZHMoe30sIGxvY2F0aW9uLnN0YXRlLCBzdGF0ZSk7XG4gICAgc2F2ZVN0YXRlKGxvY2F0aW9uLmtleSwgbG9jYXRpb24uc3RhdGUpO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiByZWdpc3RlclRyYW5zaXRpb25Ib29rKGhvb2spIHtcbiAgICBpZiAodHJhbnNpdGlvbkhvb2tzLmluZGV4T2YoaG9vaykgPT09IC0xKSB0cmFuc2l0aW9uSG9va3MucHVzaChob29rKTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gdW5yZWdpc3RlclRyYW5zaXRpb25Ib29rKGhvb2spIHtcbiAgICB0cmFuc2l0aW9uSG9va3MgPSB0cmFuc2l0aW9uSG9va3MuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbSAhPT0gaG9vaztcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gcHVzaFN0YXRlKHN0YXRlLCBwYXRoKSB7XG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgcGF0aCA9IF9wYXJzZVBhdGgyWydkZWZhdWx0J10ocGF0aCk7XG5cbiAgICBwdXNoKF9leHRlbmRzKHsgc3RhdGU6IHN0YXRlIH0sIHBhdGgpKTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gcmVwbGFjZVN0YXRlKHN0YXRlLCBwYXRoKSB7XG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgcGF0aCA9IF9wYXJzZVBhdGgyWydkZWZhdWx0J10ocGF0aCk7XG5cbiAgICByZXBsYWNlKF9leHRlbmRzKHsgc3RhdGU6IHN0YXRlIH0sIHBhdGgpKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbGlzdGVuQmVmb3JlOiBsaXN0ZW5CZWZvcmUsXG4gICAgbGlzdGVuOiBsaXN0ZW4sXG4gICAgdHJhbnNpdGlvblRvOiB0cmFuc2l0aW9uVG8sXG4gICAgcHVzaDogcHVzaCxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIGdvOiBnbyxcbiAgICBnb0JhY2s6IGdvQmFjayxcbiAgICBnb0ZvcndhcmQ6IGdvRm9yd2FyZCxcbiAgICBjcmVhdGVLZXk6IGNyZWF0ZUtleSxcbiAgICBjcmVhdGVQYXRoOiBjcmVhdGVQYXRoLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgY3JlYXRlTG9jYXRpb246IGNyZWF0ZUxvY2F0aW9uLFxuXG4gICAgc2V0U3RhdGU6IF9kZXByZWNhdGUyWydkZWZhdWx0J10oc2V0U3RhdGUsICdzZXRTdGF0ZSBpcyBkZXByZWNhdGVkOyB1c2UgbG9jYXRpb24ua2V5IHRvIHNhdmUgc3RhdGUgaW5zdGVhZCcpLFxuICAgIHJlZ2lzdGVyVHJhbnNpdGlvbkhvb2s6IF9kZXByZWNhdGUyWydkZWZhdWx0J10ocmVnaXN0ZXJUcmFuc2l0aW9uSG9vaywgJ3JlZ2lzdGVyVHJhbnNpdGlvbkhvb2sgaXMgZGVwcmVjYXRlZDsgdXNlIGxpc3RlbkJlZm9yZSBpbnN0ZWFkJyksXG4gICAgdW5yZWdpc3RlclRyYW5zaXRpb25Ib29rOiBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKHVucmVnaXN0ZXJUcmFuc2l0aW9uSG9vaywgJ3VucmVnaXN0ZXJUcmFuc2l0aW9uSG9vayBpcyBkZXByZWNhdGVkOyB1c2UgdGhlIGNhbGxiYWNrIHJldHVybmVkIGZyb20gbGlzdGVuQmVmb3JlIGluc3RlYWQnKSxcbiAgICBwdXNoU3RhdGU6IF9kZXByZWNhdGUyWydkZWZhdWx0J10ocHVzaFN0YXRlLCAncHVzaFN0YXRlIGlzIGRlcHJlY2F0ZWQ7IHVzZSBwdXNoIGluc3RlYWQnKSxcbiAgICByZXBsYWNlU3RhdGU6IF9kZXByZWNhdGUyWydkZWZhdWx0J10ocmVwbGFjZVN0YXRlLCAncmVwbGFjZVN0YXRlIGlzIGRlcHJlY2F0ZWQ7IHVzZSByZXBsYWNlIGluc3RlYWQnKVxuICB9O1xufVxuXG5leHBvcnRzWydkZWZhdWx0J10gPSBjcmVhdGVIaXN0b3J5O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiLy9pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJ1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfQWN0aW9ucyA9IHJlcXVpcmUoJy4vQWN0aW9ucycpO1xuXG52YXIgX3BhcnNlUGF0aCA9IHJlcXVpcmUoJy4vcGFyc2VQYXRoJyk7XG5cbnZhciBfcGFyc2VQYXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcnNlUGF0aCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKCkge1xuICB2YXIgbG9jYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAnLycgOiBhcmd1bWVudHNbMF07XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBfQWN0aW9ucy5QT1AgOiBhcmd1bWVudHNbMV07XG4gIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzJdO1xuXG4gIHZhciBfZm91cnRoQXJnID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1szXTtcblxuICBpZiAodHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJykgbG9jYXRpb24gPSBfcGFyc2VQYXRoMlsnZGVmYXVsdCddKGxvY2F0aW9uKTtcblxuICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAvL3dhcm5pbmcoXG4gICAgLy8gIGZhbHNlLFxuICAgIC8vICAnVGhlIHN0YXRlICgybmQpIGFyZ3VtZW50IHRvIGNyZWF0ZUxvY2F0aW9uIGlzIGRlcHJlY2F0ZWQ7IHVzZSBhICcgK1xuICAgIC8vICAnbG9jYXRpb24gZGVzY3JpcHRvciBpbnN0ZWFkJ1xuICAgIC8vKVxuXG4gICAgbG9jYXRpb24gPSBfZXh0ZW5kcyh7fSwgbG9jYXRpb24sIHsgc3RhdGU6IGFjdGlvbiB9KTtcblxuICAgIGFjdGlvbiA9IGtleSB8fCBfQWN0aW9ucy5QT1A7XG4gICAga2V5ID0gX2ZvdXJ0aEFyZztcbiAgfVxuXG4gIHZhciBwYXRobmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lIHx8ICcvJztcbiAgdmFyIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaCB8fCAnJztcbiAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoIHx8ICcnO1xuICB2YXIgc3RhdGUgPSBsb2NhdGlvbi5zdGF0ZSB8fCBudWxsO1xuXG4gIHJldHVybiB7XG4gICAgcGF0aG5hbWU6IHBhdGhuYW1lLFxuICAgIHNlYXJjaDogc2VhcmNoLFxuICAgIGhhc2g6IGhhc2gsXG4gICAgc3RhdGU6IHN0YXRlLFxuICAgIGFjdGlvbjogYWN0aW9uLFxuICAgIGtleToga2V5XG4gIH07XG59XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGNyZWF0ZUxvY2F0aW9uO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiLy9pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJ1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmZ1bmN0aW9uIGRlcHJlY2F0ZShmbikge1xuICByZXR1cm4gZm47XG4gIC8vcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgLy8gIHdhcm5pbmcoZmFsc2UsICdbaGlzdG9yeV0gJyArIG1lc3NhZ2UpXG4gIC8vICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAvL31cbn1cblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBkZXByZWNhdGU7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdOyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZnVuY3Rpb24gZXh0cmFjdFBhdGgoc3RyaW5nKSB7XG4gIHZhciBtYXRjaCA9IHN0cmluZy5tYXRjaCgvXmh0dHBzPzpcXC9cXC9bXlxcL10qLyk7XG5cbiAgaWYgKG1hdGNoID09IG51bGwpIHJldHVybiBzdHJpbmc7XG5cbiAgcmV0dXJuIHN0cmluZy5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcbn1cblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBleHRyYWN0UGF0aDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX2V4dHJhY3RQYXRoID0gcmVxdWlyZSgnLi9leHRyYWN0UGF0aCcpO1xuXG52YXIgX2V4dHJhY3RQYXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dHJhY3RQYXRoKTtcblxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIHBhdGhuYW1lID0gX2V4dHJhY3RQYXRoMlsnZGVmYXVsdCddKHBhdGgpO1xuICB2YXIgc2VhcmNoID0gJyc7XG4gIHZhciBoYXNoID0gJyc7XG5cbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKHBhdGggPT09IHBhdGhuYW1lLCAnQSBwYXRoIG11c3QgYmUgcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoIG9ubHksIG5vdCBhIGZ1bGx5IHF1YWxpZmllZCBVUkwgbGlrZSBcIiVzXCInLCBwYXRoKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgaGFzaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignIycpO1xuICBpZiAoaGFzaEluZGV4ICE9PSAtMSkge1xuICAgIGhhc2ggPSBwYXRobmFtZS5zdWJzdHJpbmcoaGFzaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cmluZygwLCBoYXNoSW5kZXgpO1xuICB9XG5cbiAgdmFyIHNlYXJjaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignPycpO1xuICBpZiAoc2VhcmNoSW5kZXggIT09IC0xKSB7XG4gICAgc2VhcmNoID0gcGF0aG5hbWUuc3Vic3RyaW5nKHNlYXJjaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cmluZygwLCBzZWFyY2hJbmRleCk7XG4gIH1cblxuICBpZiAocGF0aG5hbWUgPT09ICcnKSBwYXRobmFtZSA9ICcvJztcblxuICByZXR1cm4ge1xuICAgIHBhdGhuYW1lOiBwYXRobmFtZSxcbiAgICBzZWFyY2g6IHNlYXJjaCxcbiAgICBoYXNoOiBoYXNoXG4gIH07XG59XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHBhcnNlUGF0aDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gcnVuVHJhbnNpdGlvbkhvb2soaG9vaywgbG9jYXRpb24sIGNhbGxiYWNrKSB7XG4gIHZhciByZXN1bHQgPSBob29rKGxvY2F0aW9uLCBjYWxsYmFjayk7XG5cbiAgaWYgKGhvb2subGVuZ3RoIDwgMikge1xuICAgIC8vIEFzc3VtZSB0aGUgaG9vayBydW5zIHN5bmNocm9ub3VzbHkgYW5kIGF1dG9tYXRpY2FsbHlcbiAgICAvLyBjYWxsIHRoZSBjYWxsYmFjayB3aXRoIHRoZSByZXR1cm4gdmFsdWUuXG4gICAgY2FsbGJhY2socmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10ocmVzdWx0ID09PSB1bmRlZmluZWQsICdZb3Ugc2hvdWxkIG5vdCBcInJldHVyblwiIGluIGEgdHJhbnNpdGlvbiBob29rIHdpdGggYSBjYWxsYmFjayBhcmd1bWVudDsgY2FsbCB0aGUgY2FsbGJhY2sgaW5zdGVhZCcpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHJ1blRyYW5zaXRpb25Ib29rO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuICpcbiAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG4gKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcbiAqIGV4cGVjdGluZy5cbiAqXG4gKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuICovXG5cbnZhciBpbnZhcmlhbnQgPSBmdW5jdGlvbihjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICtcbiAgICAgICAgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107IH0pXG4gICAgICApO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBpc1Byb21pc2U7XG5cbmZ1bmN0aW9uIGlzUHJvbWlzZShvYmopIHtcbiAgcmV0dXJuICEhb2JqICYmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIHRyYW5zbWl0dGVyKCkge1xuICB2YXIgc3Vic2NyaXB0aW9ucyA9IFtdO1xuICB2YXIgbm93RGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgdmFyIHRvVW5zdWJzY3JpYmUgPSB7fTtcblxuICB2YXIgdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiB1bnN1YnNjcmliZShvbkNoYW5nZSkge1xuICAgIHZhciBpZCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihvbkNoYW5nZSk7XG4gICAgaWYgKGlkIDwgMCkgcmV0dXJuO1xuICAgIGlmIChub3dEaXNwYXRjaGluZykge1xuICAgICAgdG9VbnN1YnNjcmliZVtpZF0gPSBvbkNoYW5nZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3Vic2NyaXB0aW9ucy5zcGxpY2UoaWQsIDEpO1xuICB9O1xuXG4gIHZhciBzdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUob25DaGFuZ2UpIHtcbiAgICB2YXIgaWQgPSBzdWJzY3JpcHRpb25zLnB1c2gob25DaGFuZ2UpO1xuICAgIHZhciBkaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIHJldHVybiB1bnN1YnNjcmliZShvbkNoYW5nZSk7XG4gICAgfTtcbiAgICByZXR1cm4geyBkaXNwb3NlOiBkaXNwb3NlIH07XG4gIH07XG5cbiAgdmFyIHB1Ymxpc2ggPSBmdW5jdGlvbiBwdWJsaXNoKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIG5vd0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24sIGlkKSB7XG4gICAgICAgIHJldHVybiB0b1Vuc3Vic2NyaWJlW2lkXSB8fCBzdWJzY3JpcHRpb24uYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBub3dEaXNwYXRjaGluZyA9IGZhbHNlO1xuICAgICAgT2JqZWN0LmtleXModG9VbnN1YnNjcmliZSkuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlKHRvVW5zdWJzY3JpYmVbaWRdKTtcbiAgICAgIH0pO1xuICAgICAgdG9VbnN1YnNjcmliZSA9IHt9O1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHB1Ymxpc2g6IHB1Ymxpc2gsXG4gICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gICAgJHN1YnNjcmlwdGlvbnM6IHN1YnNjcmlwdGlvbnNcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmFuc21pdHRlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU2ltaWxhciB0byBpbnZhcmlhbnQgYnV0IG9ubHkgbG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgbWV0LlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBsb2cgaXNzdWVzIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50cyBpbiBjcml0aWNhbFxuICogcGF0aHMuIFJlbW92aW5nIHRoZSBsb2dnaW5nIGNvZGUgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRzIHdpbGwga2VlcCB0aGVcbiAqIHNhbWUgbG9naWMgYW5kIGZvbGxvdyB0aGUgc2FtZSBjb2RlIHBhdGhzLlxuICovXG5cbnZhciB3YXJuaW5nID0gZnVuY3Rpb24oKSB7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgd2FybmluZyA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgZm9ybWF0LCBhcmdzKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgYXJncyA9IG5ldyBBcnJheShsZW4gPiAyID8gbGVuIC0gMiA6IDApO1xuICAgIGZvciAodmFyIGtleSA9IDI7IGtleSA8IGxlbjsga2V5KyspIHtcbiAgICAgIGFyZ3Nba2V5IC0gMl0gPSBhcmd1bWVudHNba2V5XTtcbiAgICB9XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdgd2FybmluZyhjb25kaXRpb24sIGZvcm1hdCwgLi4uYXJncylgIHJlcXVpcmVzIGEgd2FybmluZyAnICtcbiAgICAgICAgJ21lc3NhZ2UgYXJndW1lbnQnXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChmb3JtYXQubGVuZ3RoIDwgMTAgfHwgKC9eW3NcXFddKiQvKS50ZXN0KGZvcm1hdCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1RoZSB3YXJuaW5nIGZvcm1hdCBzaG91bGQgYmUgYWJsZSB0byB1bmlxdWVseSBpZGVudGlmeSB0aGlzICcgK1xuICAgICAgICAnd2FybmluZy4gUGxlYXNlLCB1c2UgYSBtb3JlIGRlc2NyaXB0aXZlIGZvcm1hdCB0aGFuOiAnICsgZm9ybWF0XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArXG4gICAgICAgIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2tcbiAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIH0gY2F0Y2goeCkge31cbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2FybmluZztcbiIsImltcG9ydCBhbHQgZnJvbSAnLi4vYWx0J1xyXG5cclxuY2xhc3MgRm9ybUFjdGlvbnMge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMuZ2VuZXJhdGVBY3Rpb25zKFxyXG4gICAgICAnaGFuZGxlSW5wdXRDaGFuZ2UnLFxyXG4gICAgICAndXNlcm5hbWVWYWxpZGF0aW9uRmFpbCcsXHJcbiAgICAgICdwYXNzd29yZFZhbGlkYXRpb25GYWlsJyxcclxuICAgICAgJ2dlbmRlclZhbGlkYXRpb25GYWlsJyxcclxuICAgICAgJ2ZpcnN0TmFtZVZhbGlkYXRpb25GYWlsJyxcclxuICAgICAgJ2xhc3ROYW1lVmFsaWRhdGlvbkZhaWwnLFxyXG4gICAgICAnYWdlVmFsaWRhdGlvbkZhaWwnLFxyXG4gICAgICAndW5hdXRob3JpemVkQWNjZXNzQXR0ZW1wdCdcclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKEZvcm1BY3Rpb25zKVxyXG4iLCJpbXBvcnQgYWx0IGZyb20gJy4uL2FsdCdcclxuaW1wb3J0IFRNREIgZnJvbSAnLi4vdXRpbGl0aWVzL1JlcXVlc3RlclRNREInXHJcblxyXG5jbGFzcyBNb3ZpZUFjdGlvbnMge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMuZ2VuZXJhdGVBY3Rpb25zKFxyXG4gICAgICAnZ2V0VG9wVGVuTW92aWVzU3VjY2VzcycsXHJcbiAgICAgICdnZXRUb3BUZW5Nb3ZpZXNGYWlsJyxcclxuICAgICAgJ2dldEZpdmVSZWNlbnRNb3ZpZXNTdWNjZXNzJyxcclxuICAgICAgJ2dldEZpdmVSZWNlbnRNb3ZpZXNGYWlsJyxcclxuICAgICAgJ2VtcHR5VG9wVGVuTW92aWVzJyxcclxuICAgICAgJ2FkZE1vdmllVG9Ub3BUZW4nXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRGaXZlUmVjZW50TW92aWVzICgpIHtcclxuICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICBtZXRob2Q6ICdnZXQnLFxyXG4gICAgICB1cmw6ICcvYXBpL21vdmllcy9maXZlLXJlY2VudCdcclxuICAgIH1cclxuXHJcbiAgICAkLmFqYXgocmVxdWVzdClcclxuICAgICAgLmRvbmUoZGF0YSA9PiB0aGlzLmdldEZpdmVSZWNlbnRNb3ZpZXNTdWNjZXNzKGRhdGEpKVxyXG5cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBnZXRUb3BUZW5Nb3ZpZXMgKCkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgIHVybDogJy9hcGkvbW92aWVzL3RvcC10ZW4nLFxyXG4gICAgICBtZXRob2Q6ICdnZXQnXHJcbiAgICB9XHJcblxyXG4gICAgJC5hamF4KHJlcXVlc3QpXHJcbiAgICAgIC5kb25lKGRhdGEgPT4ge1xyXG4gICAgICAgIHRoaXMuZW1wdHlUb3BUZW5Nb3ZpZXMoKVxyXG4gICAgICAgIGZvciAobGV0IG1vdmllIG9mIGRhdGEpIHtcclxuICAgICAgICAgIGxldCBtb3ZpZURhdGEgPSB7XHJcbiAgICAgICAgICAgIF9pZDogbW92aWUuX2lkLFxyXG4gICAgICAgICAgICBuYW1lOiBtb3ZpZS5uYW1lLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogbW92aWUuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGdlbnJlczogbW92aWUuZ2VucmVzXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgVE1EQlxyXG4gICAgICAgICAgICAuZ2V0TW92aWVQb3N0ZXIobW92aWUubmFtZSlcclxuICAgICAgICAgICAgLnRoZW4odG1kYlJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICBtb3ZpZURhdGEubW92aWVQb3N0ZXJVcmwgPSB0bWRiUmVzcG9uc2UucG9zdGVyVXJsXHJcbiAgICAgICAgICAgICAgaWYgKCFtb3ZpZURhdGEuZGVzY3JpcHRpb24gfHwgbW92aWVEYXRhLmRlc2NyaXB0aW9uID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgbW92aWVEYXRhLmRlc2NyaXB0aW9uID0gdG1kYlJlc3BvbnNlLm92ZXJ2aWV3XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBnZXRDb21tZW50cyhtb3ZpZS5faWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjb21tZW50cyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIG1vdmllRGF0YS5jb21tZW50cyA9IGNvbW1lbnRzXHJcblxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmFkZE1vdmllVG9Ub3BUZW4obW92aWVEYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5mYWlsKGVycm9yID0+IHRoaXMuZ2V0VG9wVGVuTW92aWVzRmFpbChlcnJvcikpXHJcblxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKE1vdmllQWN0aW9ucylcclxuXHJcbmZ1bmN0aW9uIGdldENvbW1lbnRzIChtb3ZpZUlkKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICB1cmw6IGAvYXBpL21vdmllcy8ke21vdmllSWR9L2NvbW1lbnRzYCxcclxuICAgICAgbWV0aG9kOiAnZ2V0J1xyXG4gICAgfVxyXG5cclxuICAgICQuYWpheChyZXF1ZXN0KVxyXG4gICAgICAuZG9uZShkYXRhID0+IHJlc29sdmUoZGF0YSkpXHJcbiAgICAgIC5mYWlsKGVyciA9PiByZWplY3QoZXJyKSlcclxuICB9KVxyXG59XHJcbiIsImltcG9ydCBhbHQgZnJvbSAnLi4vYWx0J1xyXG5cclxuY2xhc3MgTW92aWVBZGRBY3Rpb25zIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLmdlbmVyYXRlQWN0aW9ucyhcclxuICAgICAgJ2hhbmRsZU5hbWVDaGFuZ2UnLFxyXG4gICAgICAnaGFuZGxlRGVzY3JpcHRpb25DaGFuZ2UnLFxyXG4gICAgICAnaGFuZGxlR2VucmVzQ2hhbmdlJyxcclxuICAgICAgJ25hbWVWYWxpZGF0aW9uRmFpbCcsXHJcbiAgICAgICdnZW5yZXNWYWxpZGF0aW9uRmFpbCcsXHJcbiAgICAgICdhZGRNb3ZpZVN1Y2Nlc3MnLFxyXG4gICAgICAnYWRkTW92aWVGYWlsJ1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYWRkTW92aWUgKGRhdGEpIHtcclxuICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICB1cmw6ICcvYXBpL21vdmllcy9hZGQnLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxuXHJcbiAgICAkLmFqYXgocmVxdWVzdClcclxuICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuYWRkTW92aWVTdWNjZXNzKClcclxuICAgICAgfSlcclxuICAgICAgLmZhaWwoKGVycikgPT4gdGhpcy5hZGRNb3ZpZUZhaWwoZXJyKSlcclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWx0LmNyZWF0ZUFjdGlvbnMoTW92aWVBZGRBY3Rpb25zKVxyXG4iLCJpbXBvcnQgYWx0IGZyb20gJy4uL2FsdCdcclxuXHJcbmNsYXNzIE5hdmJhckFjdGlvbnMge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMuZ2VuZXJhdGVBY3Rpb25zKFxyXG4gICAgICAndXBkYXRlQWpheEFuaW1hdGlvbidcclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKE5hdmJhckFjdGlvbnMpXHJcbiIsImltcG9ydCBhbHQgZnJvbSAnLi4vYWx0J1xyXG5cclxuY2xhc3MgVXNlckFjdGlvbnMge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMuZ2VuZXJhdGVBY3Rpb25zKFxyXG4gICAgICAncmVnaXN0ZXJVc2VyU3VjY2VzcycsXHJcbiAgICAgICdyZWdpc3RlclVzZXJGYWlsJyxcclxuICAgICAgJ2xvZ2luVXNlclN1Y2Nlc3MnLFxyXG4gICAgICAnbG9naW5Vc2VyRmFpbCcsXHJcbiAgICAgICdsb2dvdXRVc2VyU3VjY2VzcydcclxuICAgIClcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyVXNlciAoZGF0YSkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgIHVybDogJy91c2VyL3JlZ2lzdGVyJyxcclxuICAgICAgbWV0aG9kOiAncG9zdCcsXHJcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICB9XHJcblxyXG4gICAgJC5hamF4KHJlcXVlc3QpXHJcbiAgICAgIC5kb25lKCgpID0+IHRoaXMucmVnaXN0ZXJVc2VyU3VjY2VzcygpKVxyXG4gICAgICAuZmFpbChlcnIgPT4ge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJVc2VyRmFpbChlcnIucmVzcG9uc2VKU09OLm1lc3NhZ2UpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGxvZ2luVXNlciAoZGF0YSkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgIHVybDogJy91c2VyL2xvZ2luJyxcclxuICAgICAgbWV0aG9kOiAncG9zdCcsXHJcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICB9XHJcblxyXG4gICAgJC5hamF4KHJlcXVlc3QpXHJcbiAgICAgIC5kb25lKHVzZXIgPT4ge1xyXG4gICAgICAgIHRoaXMubG9naW5Vc2VyU3VjY2Vzcyh1c2VyKVxyXG4gICAgICB9KVxyXG4gICAgICAuZmFpbChlcnIgPT4ge1xyXG4gICAgICAgIHRoaXMubG9naW5Vc2VyRmFpbChlcnIucmVzcG9uc2VKU09OKVxyXG4gICAgICB9KVxyXG5cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBsb2dvdXRVc2VyICgpIHtcclxuICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICB1cmw6ICcvdXNlci9sb2dvdXQnLFxyXG4gICAgICBtZXRob2Q6ICdwb3N0J1xyXG4gICAgfVxyXG5cclxuICAgICQuYWpheChyZXF1ZXN0KVxyXG4gICAgICAuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2dvdXRVc2VyU3VjY2VzcygpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKFVzZXJBY3Rpb25zKVxyXG4iLCJpbXBvcnQgQWx0IGZyb20gJ2FsdCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBBbHQoKVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcbmltcG9ydCBOYXZiYXIgZnJvbSAnLi9OYXZiYXInXHJcbmltcG9ydCBGb290ZXIgZnJvbSAnLi9Gb290ZXInXHJcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnLi4vc3RvcmVzL1VzZXJTdG9yZSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSBVc2VyU3RvcmUuZ2V0U3RhdGUoKVxyXG5cclxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcylcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlIChzdGF0ZSkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcclxuICAgIFVzZXJTdG9yZS5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcclxuICAgIFVzZXJTdG9yZS51bmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPE5hdmJhciAvPlxyXG4gICAgICAgIHsgdGhpcy5wcm9wcy5jaGlsZHJlbiB9XHJcbiAgICAgICAgPEZvb3RlciAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJ1xyXG5pbXBvcnQgTW92aWVBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvTW92aWVBY3Rpb25zJ1xyXG5pbXBvcnQgTW92aWVTdG9yZSBmcm9tICcuLi9zdG9yZXMvTW92aWVTdG9yZSdcclxuXHJcbmNsYXNzIEZvb3RlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSBNb3ZpZVN0b3JlLmdldFN0YXRlKClcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBNb3ZpZVN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gICAgTW92aWVBY3Rpb25zLmdldEZpdmVSZWNlbnRNb3ZpZXMoKVxyXG5cclxuICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiBNb3ZpZUFjdGlvbnMuZ2V0Rml2ZVJlY2VudE1vdmllcygpLCAzMDAwMClcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcclxuICAgIE1vdmllU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbClcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBsZXQgbW9zdFJlY2VudE1vdmllcyA9IHRoaXMuc3RhdGUubW9zdFJlY2VudE1vdmllcy5tYXAobW92aWUgPT4ge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxsaSBrZXk9e21vdmllLl9pZH0+XHJcbiAgICAgICAgICA8TGluayB0bz17YC8uLi5gfT57bW92aWUubmFtZX08L0xpbms+XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Zm9vdGVyPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb250YWluZXInPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jvdyc+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNSc+XHJcbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0nbGVhZCc+PHN0cm9uZz5JbmZvcm1hdGlvbjwvc3Ryb25nPiBhbmQgPHN0cm9uZz5Db3B5cmlnaHQ8L3N0cm9uZz48L2gzPlxyXG4gICAgICAgICAgICAgIDxwPlBvd2VyZWQgYnkgPHN0cm9uZz5FeHByZXNzPC9zdHJvbmc+LCA8c3Ryb25nPk1vbmdvREI8L3N0cm9uZz4gYW5kIDxzdHJvbmc+UmVhY3Q8L3N0cm9uZz48L3A+XHJcbiAgICAgICAgICAgICAgPHA+wqkgMjAxNyBTb2Z0VW5pLjwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNCBoaWRkZW4teHMnPlxyXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J2xlYWQnPlxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZz5OZXdlc3Q8L3N0cm9uZz4gNSBNb3ZpZXNcclxuICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9J2xpc3QtaW5saW5lJz5cclxuICAgICAgICAgICAgICAgIHttb3N0UmVjZW50TW92aWVzfVxyXG4gICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTMnPlxyXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J2xlYWQnPkF1dGhvcjwvaDM+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BldGVyQXNlbm92MjInPjxzdHJvbmc+UGV0YXIgQXNlbm92PC9zdHJvbmc+PC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Zvb3Rlcj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvb3RlclxyXG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBNb3ZpZUNhcmQgZnJvbSAnLi9zdWItY29tcG9uZW50cy9Nb3ZpZUNhcmQnXHJcbmltcG9ydCBNb3ZpZUFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Nb3ZpZUFjdGlvbnMnXHJcbmltcG9ydCBNb3ZpZVN0b3JlIGZyb20gJy4uL3N0b3Jlcy9Nb3ZpZVN0b3JlJ1xyXG5cclxuY2xhc3MgSG9tZSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSBNb3ZpZVN0b3JlLmdldFN0YXRlKClcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBNb3ZpZVN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gICAgTW92aWVBY3Rpb25zLmdldFRvcFRlbk1vdmllcygpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XHJcbiAgICBNb3ZpZVN0b3JlLnVubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgbGV0IG1vdmllcyA9IHRoaXMuc3RhdGUudG9wVGVuTW92aWVzLm1hcCgobW92aWUsIGluZGV4KSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPE1vdmllQ2FyZFxyXG4gICAgICAgICAga2V5PXttb3ZpZS5faWR9XHJcbiAgICAgICAgICBtb3ZpZT17bW92aWV9XHJcbiAgICAgICAgICBpbmRleD17aW5kZXh9IC8+XHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbnRhaW5lcic+XHJcbiAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGV4dC1jZW50ZXInPldlbGNvbWUgdG8gPHN0cm9uZz5Nb3ZpZSBEYXRhYmFzZTwvc3Ryb25nPjwvaDM+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3QtZ3JvdXAnPlxyXG4gICAgICAgICAge21vdmllc31cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIb21lXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuaW1wb3J0IE1vdmllQWRkQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL01vdmllQWRkQWN0aW9ucydcclxuaW1wb3J0IE1vdmllQWRkU3RvcmUgZnJvbSAnLi4vc3RvcmVzL01vdmllQWRkU3RvcmUnXHJcblxyXG5jbGFzcyBNb3ZpZUFkZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSBNb3ZpZUFkZFN0b3JlLmdldFN0YXRlKClcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBNb3ZpZUFkZFN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgTW92aWVBZGRTdG9yZS51bmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU3VibWl0IChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICBsZXQgbmFtZSA9IHRoaXMuc3RhdGUubmFtZS50cmltKClcclxuICAgIGxldCBnZW5yZXMgPSB0aGlzLnN0YXRlLmdlbnJlc1xyXG4gICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgIE1vdmllQWRkQWN0aW9ucy5uYW1lVmFsaWRhdGlvbkZhaWwoKVxyXG4gICAgfVxyXG4gICAgaWYgKGdlbnJlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgTW92aWVBZGRBY3Rpb25zLmdlbnJlc1ZhbGlkYXRpb25GYWlsKClcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBuYW1lOiB0aGlzLnN0YXRlLm5hbWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuc3RhdGUuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgZ2VucmVzOiB0aGlzLnN0YXRlLmdlbnJlc1xyXG4gICAgICB9XHJcblxyXG4gICAgICBNb3ZpZUFkZEFjdGlvbnMuYWRkTW92aWUoZGF0YSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncm93IGZsaXBJblggYW5pbWF0ZWQnPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbC1zbS04Jz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3BhbmVsIHBhbmVsLWRlZmF1bHQnPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYW5lbC1oZWFkaW5nJz5BZGQgTW92aWU8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtYm9keSc+XHJcbiAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsnZm9ybS1ncm91cCAnICsgdGhpcy5zdGF0ZS5uYW1lVmFsaWRhdGlvblN0YXRlfT5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb250cm9sLWxhYmVsJz5OYW1lPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnIHJlZj0nbmFtZVRleHRGaWVsZCdcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17TW92aWVBZGRBY3Rpb25zLmhhbmRsZU5hbWVDaGFuZ2V9IGF1dG9Gb2N1cyAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naGVscC1ibG9jayc+eyB0aGlzLnN0YXRlLmhlbHBCbG9jayB9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Zvcm0tZ3JvdXAnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbnRyb2wtbGFiZWwnPkRlc2NyaXB0aW9uPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnXHJcbiAgICAgICAgICAgICAgICAgICAgICByb3dzPSc1J1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZGVzY3JpcHRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17TW92aWVBZGRBY3Rpb25zLmhhbmRsZURlc2NyaXB0aW9uQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eydmb3JtLWdyb3VwICcgKyB0aGlzLnN0YXRlLmdlbnJlc1ZhbGlkYXRpb25TdGF0ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoZWNrYm94IGNoZWNrYm94LWlubGluZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9J2dlbnJlcycgaWQ9J2FjdGlvbicgdmFsdWU9J0FjdGlvbidcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5nZW5yZXMuaW5kZXhPZignQWN0aW9uJykgIT09IC0xfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17TW92aWVBZGRBY3Rpb25zLmhhbmRsZUdlbnJlc0NoYW5nZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPSdhY3Rpb24nPkFjdGlvbjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoZWNrYm94IGNoZWNrYm94LWlubGluZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9J2dlbnJlcycgaWQ9J2hvcnJvcicgdmFsdWU9J0hvcnJvcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5nZW5yZXMuaW5kZXhPZignSG9ycm9yJykgIT09IC0xfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17TW92aWVBZGRBY3Rpb25zLmhhbmRsZUdlbnJlc0NoYW5nZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPSdob3Jyb3InPkhvcnJvcjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoZWNrYm94IGNoZWNrYm94LWlubGluZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9J2dlbnJlcycgaWQ9J3NjaS1maScgdmFsdWU9J1NjaS1maSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5nZW5yZXMuaW5kZXhPZignU2NpLWZpJykgIT09IC0xfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17TW92aWVBZGRBY3Rpb25zLmhhbmRsZUdlbnJlc0NoYW5nZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPSdzY2ktZmknPlNjaS1maTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoZWNrYm94IGNoZWNrYm94LWlubGluZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9J2dlbnJlcycgaWQ9J2ZhbnRhc3knIHZhbHVlPSdGYW50YXN5J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmdlbnJlcy5pbmRleE9mKCdGYW50YXN5JykgIT09IC0xfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17TW92aWVBZGRBY3Rpb25zLmhhbmRsZUdlbnJlc0NoYW5nZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPSdmYW50YXN5Jz5GYW50YXN5PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2hlY2tib3ggY2hlY2tib3gtaW5saW5lJz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0nZ2VucmVzJyBpZD0ncm9tYW5jZScgdmFsdWU9J1JvbWFuY2UnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuZ2VucmVzLmluZGV4T2YoJ1JvbWFuY2UnKSAhPT0gLTF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtNb3ZpZUFkZEFjdGlvbnMuaGFuZGxlR2VucmVzQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J3JvbWFuY2UnPlJvbWFuY2U8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjaGVja2JveCBjaGVja2JveC1pbmxpbmUnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J2NoZWNrYm94JyBuYW1lPSdnZW5yZXMnIGlkPSd0aHJpbGxlcicgdmFsdWU9J1RocmlsbGVyJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmdlbnJlcy5pbmRleE9mKCdUaHJpbGxlcicpICE9PSAtMX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e01vdmllQWRkQWN0aW9ucy5oYW5kbGVHZW5yZXNDaGFuZ2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0ndGhyaWxsZXInPlRocmlsbGVyPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2hlY2tib3ggY2hlY2tib3gtaW5saW5lJz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0nZ2VucmVzJyBpZD0nYWR2ZW50dXJlJyB2YWx1ZT0nQWR2ZW50dXJlJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmdlbnJlcy5pbmRleE9mKCdBZHZlbnR1cmUnKSAhPT0gLTF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtNb3ZpZUFkZEFjdGlvbnMuaGFuZGxlR2VucmVzQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J2FkdmVudHVyZSc+QWR2ZW50dXJlPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0nc3VibWl0JyBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSc+U3VibWl0PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTW92aWVBZGRcclxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJ1xyXG5pbXBvcnQgTmF2YmFyQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL05hdmJhckFjdGlvbnMnXHJcbmltcG9ydCBOYXZiYXJTdG9yZSBmcm9tICcuLi9zdG9yZXMvTmF2YmFyU3RvcmUnXHJcbmltcG9ydCBOYXZiYXJVc2VyTWVudSBmcm9tICcuL3N1Yi1jb21wb25lbnRzL05hdmJhclVzZXJNZW51J1xyXG5cclxuY2xhc3MgTmF2YmFyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG4gICAgdGhpcy5zdGF0ZSA9IE5hdmJhclN0b3JlLmdldFN0YXRlKClcclxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcylcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlIChzdGF0ZSkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcclxuICAgIE5hdmJhclN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG5cclxuICAgICQoZG9jdW1lbnQpLmFqYXhTdGFydCgoKSA9PiBOYXZiYXJBY3Rpb25zLnVwZGF0ZUFqYXhBbmltYXRpb24oJ2ZhZGVJbicpKVxyXG4gICAgJChkb2N1bWVudCkuYWpheENvbXBsZXRlKCgpID0+IE5hdmJhckFjdGlvbnMudXBkYXRlQWpheEFuaW1hdGlvbignZmFkZU91dCcpKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgTmF2YmFyU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8bmF2IGNsYXNzTmFtZT0nbmF2YmFyIG5hdmJhci1kZWZhdWx0IG5hdmJhci1zdGF0aWMtdG9wJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmF2YmFyLWhlYWRlcic+XHJcbiAgICAgICAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbidcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSduYXZiYXItdG9nZ2xlIGNvbGxhcHNlZCdcclxuICAgICAgICAgICAgZGF0YS10b2dnbGU9J2NvbGxhcHNlJ1xyXG4gICAgICAgICAgICBkYXRhLXRhcmdldD0nI25hdmJhcic+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc3Itb25seSc+VG9nZ2xlIG5hdmlnYXRpb248L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naWNvbi1iYXInIC8+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naWNvbi1iYXInIC8+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naWNvbi1iYXInIC8+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxMaW5rIHRvPScvJyBjbGFzc05hbWU9J25hdmJhci1icmFuZCc+XHJcbiAgICAgICAgICAgIDxzcGFuIHJlZj0ndHJpYW5nbGVzJyBjbGFzc05hbWU9eyd0cmlhbmdsZXMgYW5pbWF0ZWQnICsgdGhpcy5zdGF0ZS5hamF4QW5pbWF0aW9uQ2xhc3N9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmkgaW52ZXJ0JyAvPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmkgaW52ZXJ0JyAvPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmknIC8+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyaSBpbnZlcnQnIC8+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyaSBpbnZlcnQnIC8+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyaScgLz5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJpIGludmVydCcgLz5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJpJyAvPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmkgaW52ZXJ0JyAvPlxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIE1EQlxyXG4gICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgaWQ9J25hdmJhcicgY2xhc3NOYW1lPSduYXZiYXItY29sbGFwc2UgY29sbGFwc2UnPlxyXG4gICAgICAgICAgPHVsIGNsYXNzTmFtZT0nbmF2IG5hdmJhci1uYXYnPlxyXG4gICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgPExpbmsgdG89Jy8nPkhvbWU8L0xpbms+XHJcbiAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICA8TGluayB0bz0nL21vdmllL2FkZCc+QWRkIE1vdmllPC9MaW5rPlxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICAgIDxOYXZiYXJVc2VyTWVudSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L25hdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5hdmJhclxyXG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgRm9ybVN0b3JlIGZyb20gJy4uL3N0b3Jlcy9Gb3JtU3RvcmUnXHJcbmltcG9ydCBGb3JtQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0Zvcm1BY3Rpb25zJ1xyXG5pbXBvcnQgVXNlckFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Vc2VyQWN0aW9ucydcclxuaW1wb3J0IEZvcm0gZnJvbSAnLi9mb3JtL0Zvcm0nXHJcbmltcG9ydCBUZXh0R3JvdXAgZnJvbSAnLi9mb3JtL1RleHRHcm91cCdcclxuaW1wb3J0IFN1Ym1pdCBmcm9tICcuL2Zvcm0vU3VibWl0J1xyXG5cclxuY2xhc3MgVXNlckxvZ2luIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSBGb3JtU3RvcmUuZ2V0U3RhdGUoKVxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UgKHN0YXRlKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgRm9ybVN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgRm9ybVN0b3JlLnVubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICBoYW5kbGVTdWJtaXQgKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgbGV0IHVzZXJuYW1lID0gdGhpcy5zdGF0ZS51c2VyLnVzZXJuYW1lXHJcbiAgICBsZXQgcGFzc3dvcmQgPSB0aGlzLnN0YXRlLnVzZXIucGFzc3dvcmRcclxuXHJcbiAgICBpZiAoIXVzZXJuYW1lKSB7XHJcbiAgICAgIHJldHVybiBGb3JtQWN0aW9ucy51c2VybmFtZVZhbGlkYXRpb25GYWlsKClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXBhc3N3b3JkKSB7XHJcbiAgICAgIHJldHVybiBGb3JtQWN0aW9ucy5wYXNzd29yZFZhbGlkYXRpb25GYWlsKCdFbnRlciBwYXNzd29yZCcpXHJcbiAgICB9XHJcblxyXG4gICAgVXNlckFjdGlvbnMubG9naW5Vc2VyKHt1c2VybmFtZSwgcGFzc3dvcmR9KVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxGb3JtXHJcbiAgICAgICAgdGl0bGU9J0xvZ2luJ1xyXG4gICAgICAgIGhhbmRsZVN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKX1cclxuICAgICAgICBzdWJtaXRTdGF0ZT17dGhpcy5zdGF0ZS5mb3JtU3VibWl0U3RhdGV9XHJcbiAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5tZXNzYWdlfT5cclxuXHJcbiAgICAgICAgPFRleHRHcm91cFxyXG4gICAgICAgICAgdHlwZT0ndGV4dCdcclxuICAgICAgICAgIG5hbWU9J3VzZXJuYW1lJ1xyXG4gICAgICAgICAgbGFiZWw9J1VzZXJuYW1lJ1xyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXNlci51c2VybmFtZX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtGb3JtQWN0aW9ucy5oYW5kbGVJbnB1dENoYW5nZX1cclxuICAgICAgICAgIHZhbGlkYXRpb25TdGF0ZT17dGhpcy5zdGF0ZS51c2VybmFtZVZhbGlkYXRpb25TdGF0ZX0gLz5cclxuXHJcbiAgICAgICAgPFRleHRHcm91cFxyXG4gICAgICAgICAgdHlwZT0ncGFzc3dvcmQnXHJcbiAgICAgICAgICBuYW1lPSdwYXNzd29yZCdcclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnVzZXIucGFzc3dvcmR9XHJcbiAgICAgICAgICBsYWJlbD0nUGFzc3dvcmQnXHJcbiAgICAgICAgICBvbkNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlSW5wdXRDaGFuZ2V9XHJcbiAgICAgICAgICB2YWxpZGF0aW9uU3RhdGU9e3RoaXMuc3RhdGUucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGV9XHJcbiAgICAgICAgICBtZXNzYWdlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9IC8+XHJcblxyXG4gICAgICAgIDxTdWJtaXQgdHlwZT0nYnRuLXByaW1hcnknIHZhbHVlPSdMb2dpbicgLz5cclxuICAgICAgPC9Gb3JtPlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckxvZ2luXHJcbiIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnLi4vc3RvcmVzL1VzZXJTdG9yZSdcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvc3ViLWNvbXBvbmVudHMvVXNlckluZm8nXHJcbmltcG9ydCBVc2VyUmF0ZWRNb3ZpZXMgZnJvbSAnLi4vY29tcG9uZW50cy9zdWItY29tcG9uZW50cy9Vc2VyUmF0ZWRNb3ZpZXMnXHJcbmltcG9ydCBVc2VyUmV2aWV3cyBmcm9tICcuLi9jb21wb25lbnRzL3N1Yi1jb21wb25lbnRzL1VzZXJSZXZpZXdzJ1xyXG5cclxuY2xhc3MgVXNlclByb2ZpbGUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcbiAgICB0aGlzLnN0YXRlID0gVXNlclN0b3JlLmdldFN0YXRlKClcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBVc2VyU3RvcmUubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XHJcbiAgICBVc2VyU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxVc2VySW5mbyB1c2VybmFtZT17dGhpcy5zdGF0ZS5uYW1lfSByb2xlcz17dGhpcy5zdGF0ZS5yb2xlc30gLz5cclxuICAgICAgICA8VXNlclJhdGVkTW92aWVzIHZvdGVzPXt0aGlzLnN0YXRlLnZvdGVzfSAvPlxyXG4gICAgICAgIDxVc2VyUmV2aWV3cyByZXZpZXdzPXt0aGlzLnN0YXRlLnJldmlld3N9IC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlclByb2ZpbGVcclxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IEZvcm1TdG9yZSBmcm9tICcuLi9zdG9yZXMvRm9ybVN0b3JlJ1xyXG5pbXBvcnQgRm9ybUFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Gb3JtQWN0aW9ucydcclxuaW1wb3J0IFVzZXJBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvVXNlckFjdGlvbnMnXHJcbmltcG9ydCBGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvZm9ybS9Gb3JtJ1xyXG5pbXBvcnQgVGV4dEdyb3VwIGZyb20gJy4uL2NvbXBvbmVudHMvZm9ybS9UZXh0R3JvdXAnXHJcbmltcG9ydCBSYWRpb0dyb3VwIGZyb20gJy4uL2NvbXBvbmVudHMvZm9ybS9SYWRpb0dyb3VwJ1xyXG5pbXBvcnQgUmFkaW9FbGVtZW50IGZyb20gJy4uL2NvbXBvbmVudHMvZm9ybS9SYWRpb0VsZW1lbnQnXHJcbmltcG9ydCBTdWJtaXQgZnJvbSAnLi4vY29tcG9uZW50cy9mb3JtL1N1Ym1pdCdcclxuXHJcbmNsYXNzIFVzZXJSZWdpc3RlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICB0aGlzLnN0YXRlID0gRm9ybVN0b3JlLmdldFN0YXRlKClcclxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcylcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlIChzdGF0ZSkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcclxuICAgIEZvcm1TdG9yZS5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcclxuICAgIEZvcm1TdG9yZS51bmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU3VibWl0IChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICB1c2VybmFtZTogdGhpcy5zdGF0ZS51c2VyLnVzZXJuYW1lLFxyXG4gICAgICBwYXNzd29yZDogdGhpcy5zdGF0ZS51c2VyLnBhc3N3b3JkLFxyXG4gICAgICBjb25maXJtZWRQYXNzd29yZDogdGhpcy5zdGF0ZS51c2VyLmNvbmZpcm1lZFBhc3N3b3JkLFxyXG4gICAgICBmaXJzdE5hbWU6IHRoaXMuc3RhdGUudXNlci5maXJzdE5hbWUsXHJcbiAgICAgIGxhc3ROYW1lOiB0aGlzLnN0YXRlLnVzZXIubGFzdE5hbWUsXHJcbiAgICAgIGFnZTogdGhpcy5zdGF0ZS51c2VyLmFnZSxcclxuICAgICAgZ2VuZGVyOiB0aGlzLnN0YXRlLnVzZXIuZ2VuZGVyXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhLnVzZXJuYW1lKSB7XHJcbiAgICAgIHJldHVybiBGb3JtQWN0aW9ucy51c2VybmFtZVZhbGlkYXRpb25GYWlsKClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRhdGEucGFzc3dvcmQgfHxcclxuICAgICAgICFkYXRhLmNvbmZpcm1lZFBhc3N3b3JkIHx8XHJcbiAgICAgICAgZGF0YS5wYXNzd29yZCAhPT0gZGF0YS5jb25maXJtZWRQYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gRm9ybUFjdGlvbnMucGFzc3dvcmRWYWxpZGF0aW9uRmFpbCgnSW52YWxpZCBwYXNzd29yZCwgb3IgcGFzc3dvcmRzIGRvIG5vdCBtYXRjaCcpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhLmZpcnN0TmFtZSB8fCBkYXRhLmZpcnN0TmFtZS5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybiBGb3JtQWN0aW9ucy5maXJzdE5hbWVWYWxpZGF0aW9uRmFpbCgpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhLmxhc3ROYW1lIHx8IGRhdGEubGFzdE5hbWUubGVuZ3RoIDwgMikge1xyXG4gICAgICByZXR1cm4gRm9ybUFjdGlvbnMubGFzdE5hbWVWYWxpZGF0aW9uRmFpbCgpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhLmFnZSB8fCBwYXJzZUludChkYXRhLmFnZSkgPCAwIHx8IHBhcnNlSW50KGRhdGEuYWdlKSA+IDEyMCkge1xyXG4gICAgICByZXR1cm4gRm9ybUFjdGlvbnMuYWdlVmFsaWRhdGlvbkZhaWwoKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChkYXRhLmdlbmRlciAhPT0gJ01hbGUnICYmIGRhdGEuZ2VuZGVyICE9PSAnRmVtYWxlJykge1xyXG4gICAgICByZXR1cm4gRm9ybUFjdGlvbnMuZ2VuZGVyVmFsaWRhdGlvbkZhaWwoKVxyXG4gICAgfVxyXG5cclxuICAgIFVzZXJBY3Rpb25zLnJlZ2lzdGVyVXNlcihkYXRhKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxGb3JtXHJcbiAgICAgICAgdGl0bGU9J1JlZ2lzdGVyJ1xyXG4gICAgICAgIGhhbmRsZVN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKX1cclxuICAgICAgICBzdWJtaXRTdGF0ZT17dGhpcy5zdGF0ZS5mb3JtU3VibWl0U3RhdGV9XHJcbiAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5tZXNzYWdlfT5cclxuICAgICAgICA8VGV4dEdyb3VwXHJcbiAgICAgICAgICB0eXBlPSd0ZXh0J1xyXG4gICAgICAgICAgbmFtZT0ndXNlcm5hbWUnXHJcbiAgICAgICAgICBsYWJlbD0nVXNlcm5hbWUnXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51c2VyLnVzZXJuYW1lfVxyXG4gICAgICAgICAgYXV0b0ZvY3VzXHJcbiAgICAgICAgICBvbkNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlSW5wdXRDaGFuZ2V9XHJcbiAgICAgICAgICB2YWxpZGF0aW9uU3RhdGU9e3RoaXMuc3RhdGUudXNlcm5hbWVWYWxpZGF0aW9uU3RhdGV9XHJcbiAgICAgICAgICBtZXNzYWdlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9IC8+XHJcblxyXG4gICAgICAgIDxUZXh0R3JvdXBcclxuICAgICAgICAgIHR5cGU9J3Bhc3N3b3JkJ1xyXG4gICAgICAgICAgbmFtZT0ncGFzc3dvcmQnXHJcbiAgICAgICAgICBsYWJlbD0nUGFzc3dvcmQnXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51c2VyLnBhc3N3b3JkfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e0Zvcm1BY3Rpb25zLmhhbmRsZUlucHV0Q2hhbmdlfVxyXG4gICAgICAgICAgdmFsaWRhdGlvblN0YXRlPXt0aGlzLnN0YXRlLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlfVxyXG4gICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5tZXNzYWdlfSAvPlxyXG5cclxuICAgICAgICA8VGV4dEdyb3VwXHJcbiAgICAgICAgICB0eXBlPSdwYXNzd29yZCdcclxuICAgICAgICAgIG5hbWU9J2NvbmZpcm1lZFBhc3N3b3JkJ1xyXG4gICAgICAgICAgbGFiZWw9J0NvbmZpcm0gUGFzc3dvcmQnXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51c2VyLmNvbmZpcm1lZFBhc3N3b3JkfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e0Zvcm1BY3Rpb25zLmhhbmRsZUlucHV0Q2hhbmdlfVxyXG4gICAgICAgICAgdmFsaWRhdGlvblN0YXRlPXt0aGlzLnN0YXRlLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlfVxyXG4gICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5tZXNzYWdlfSAvPlxyXG5cclxuICAgICAgICA8VGV4dEdyb3VwXHJcbiAgICAgICAgICB0eXBlPSd0ZXh0J1xyXG4gICAgICAgICAgbmFtZT0nZmlyc3ROYW1lJ1xyXG4gICAgICAgICAgbGFiZWw9J0ZpcnN0IE5hbWUnXHJcbiAgICAgICAgICBvbkNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlSW5wdXRDaGFuZ2V9XHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51c2VyLmZpcnN0TmFtZX1cclxuICAgICAgICAgIHZhbGlkYXRpb25TdGF0ZT17dGhpcy5zdGF0ZS5maXJzdE5hbWVWYWxpZGF0aW9uU3RhdGV9XHJcbiAgICAgICAgICBtZXNzYWdlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9IC8+XHJcblxyXG4gICAgICAgIDxUZXh0R3JvdXBcclxuICAgICAgICAgIHR5cGU9J3RleHQnXHJcbiAgICAgICAgICBuYW1lPSdsYXN0TmFtZSdcclxuICAgICAgICAgIGxhYmVsPSdMYXN0IE5hbWUnXHJcbiAgICAgICAgICBvbkNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlSW5wdXRDaGFuZ2V9XHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51c2VyLmxhc3ROYW1lfVxyXG4gICAgICAgICAgdmFsaWRhdGlvblN0YXRlPXt0aGlzLnN0YXRlLmxhc3ROYW1lVmFsaWRhdGlvblN0YXRlfVxyXG4gICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5tZXNzYWdlfSAvPlxyXG5cclxuICAgICAgICA8VGV4dEdyb3VwXHJcbiAgICAgICAgICB0eXBlPSdudW1iZXInXHJcbiAgICAgICAgICBuYW1lPSdhZ2UnXHJcbiAgICAgICAgICBsYWJlbD0nQWdlJ1xyXG4gICAgICAgICAgb25DaGFuZ2U9e0Zvcm1BY3Rpb25zLmhhbmRsZUlucHV0Q2hhbmdlfVxyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXNlci5hZ2V9XHJcbiAgICAgICAgICB2YWxpZGF0aW9uU3RhdGU9e3RoaXMuc3RhdGUuYWdlVmFsaWRhdGlvblN0YXRlfVxyXG4gICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5tZXNzYWdlfSAvPlxyXG5cclxuICAgICAgICA8UmFkaW9Hcm91cFxyXG4gICAgICAgICAgdmFsaWRhdGlvblN0YXRlPXt0aGlzLnN0YXRlLmdlbmRlclZhbGlkYXRpb25TdGF0ZX1cclxuICAgICAgICAgIG1lc3NhZ2U9e3RoaXMuc3RhdGUubWVzc2FnZX0+XHJcbiAgICAgICAgICA8UmFkaW9FbGVtZW50XHJcbiAgICAgICAgICAgIGdyb3VwTmFtZT0nZ2VuZGVyJ1xyXG4gICAgICAgICAgICB2YWx1ZT0nTWFsZSdcclxuICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZT17dGhpcy5zdGF0ZS51c2VyLmdlbmRlcn1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e0Zvcm1BY3Rpb25zLmhhbmRsZUlucHV0Q2hhbmdlfSAvPlxyXG5cclxuICAgICAgICAgIDxSYWRpb0VsZW1lbnRcclxuICAgICAgICAgICAgZ3JvdXBOYW1lPSdnZW5kZXInXHJcbiAgICAgICAgICAgIHZhbHVlPSdGZW1hbGUnXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVmFsdWU9e3RoaXMuc3RhdGUudXNlci5nZW5kZXJ9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtGb3JtQWN0aW9ucy5oYW5kbGVJbnB1dENoYW5nZX0gLz5cclxuICAgICAgICA8L1JhZGlvR3JvdXA+XHJcblxyXG4gICAgICAgIDxTdWJtaXRcclxuICAgICAgICAgIHR5cGU9J2J0bi1wcmltYXJ5J1xyXG4gICAgICAgICAgdmFsdWU9J1JlZ2lzdGVyJyAvPlxyXG4gICAgICA8L0Zvcm0+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VyUmVnaXN0ZXJcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuY29uc3QgRm9ybSA9IChwcm9wcykgPT4gKFxyXG4gIDxkaXYgY2xhc3NOYW1lPSdjb250YWluZXInPlxyXG4gICAgPGRpdiBjbGFzc05hbWU9J3JvdyBmbGlwSW5YIGFuaW1hdGVkJz5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbC1zbS04Jz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwgcGFuZWwtZGVmYXVsdCc+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtaGVhZGluZyc+XHJcbiAgICAgICAgICAgIHsgcHJvcHMudGl0bGUgfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtYm9keSc+XHJcbiAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtwcm9wcy5oYW5kbGVTdWJtaXR9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZm9ybS1ncm91cCAke3Byb3BzLnN1Ym1pdFN0YXRlfWB9PlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgaGVscC1ibG9ja2B9PnsgcHJvcHMubWVzc2FnZSB9PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIHsgcHJvcHMuY2hpbGRyZW4gfVxyXG4gICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcblxyXG5jb25zdCBSYWRpb0VsZW1lbnQgPSAocHJvcHMpID0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8gcmFkaW8taW5saW5lJz5cclxuICAgIDxpbnB1dFxyXG4gICAgICB0eXBlPSdyYWRpbydcclxuICAgICAgbmFtZT17cHJvcHMuZ3JvdXBOYW1lfVxyXG4gICAgICBpZD17cHJvcHMudmFsdWUudG9Mb3dlckNhc2UoKX1cclxuICAgICAgdmFsdWU9e3Byb3BzLnZhbHVlfVxyXG4gICAgICBjaGVja2VkPXtwcm9wcy5zZWxlY3RlZFZhbHVlID09PSBwcm9wcy52YWx1ZX1cclxuICAgICAgb25DaGFuZ2U9e3Byb3BzLm9uQ2hhbmdlfSAvPlxyXG4gICAgPGxhYmVsIGh0bWxGb3I9e3Byb3BzLnZhbHVlLnRvTG93ZXJDYXNlKCl9PlxyXG4gICAgICB7cHJvcHMudmFsdWV9XHJcbiAgICA8L2xhYmVsPlxyXG4gIDwvZGl2PlxyXG4pXHJcblxyXG5leHBvcnQgZGVmYXVsdCBSYWRpb0VsZW1lbnRcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuY29uc3QgUmFkaW9Hcm91cCA9IChwcm9wcykgPT4gKFxyXG4gIDxkaXYgY2xhc3NOYW1lPXtgZm9ybS1ncm91cCAke3Byb3BzLnZhbGlkYXRpb25TdGF0ZX1gfT5cclxuICAgIDxzcGFuIGNsYXNzTmFtZT0naGVscC1ibG9jayc+XHJcbiAgICAgIHtwcm9wcy5tZXNzYWdlfVxyXG4gICAgPC9zcGFuPlxyXG4gICAge3Byb3BzLmNoaWxkcmVufVxyXG4gIDwvZGl2PlxyXG4pXHJcblxyXG5leHBvcnQgZGVmYXVsdCBSYWRpb0dyb3VwXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuXHJcbmNvbnN0IFN1Ym1pdCA9IChwcm9wcykgPT4gKFxyXG4gIDxpbnB1dFxyXG4gICAgdHlwZT0nc3VibWl0J1xyXG4gICAgY2xhc3NOYW1lPXtgYnRuICR7cHJvcHMudHlwZX1gfSB2YWx1ZT17cHJvcHMudmFsdWV9IC8+XHJcbilcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFN1Ym1pdFxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcblxyXG5jb25zdCBUZXh0R3JvdXAgPSAocHJvcHMpID0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT17J2Zvcm0tZ3JvdXAgJyArIHByb3BzLnZhbGlkYXRpb25TdGF0ZX0+XHJcbiAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb250cm9sLWxhYmVsJz5cclxuICAgICAgeyBwcm9wcy5sYWJlbCB9XHJcbiAgICA8L2xhYmVsPlxyXG4gICAgPGlucHV0XHJcbiAgICAgIHR5cGU9e3Byb3BzLnR5cGV9XHJcbiAgICAgIG5hbWU9e3Byb3BzLm5hbWV9XHJcbiAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xyXG4gICAgICB2YWx1ZT17cHJvcHMudmFsdWV9XHJcbiAgICAgIG9uQ2hhbmdlPXtwcm9wcy5vbkNoYW5nZX1cclxuICAgICAgYXV0b0ZvY3VzPXtwcm9wcy5hdXRvRm9jdXN9IC8+XHJcbiAgICA8c3BhbiBjbGFzc05hbWU9J2hlbHAtYmxvY2snPlxyXG4gICAgICB7IHByb3BzLm1lc3NhZ2UgfVxyXG4gICAgPC9zcGFuPlxyXG4gIDwvZGl2PlxyXG4pXHJcblxyXG5leHBvcnQgZGVmYXVsdCBUZXh0R3JvdXBcclxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgTW92aWVDYXJkSW5mbyBmcm9tICcuL01vdmllQ2FyZEluZm8nXHJcbmltcG9ydCBNb3ZpZUNhcmRQb3N0ZXIgZnJvbSAnLi9Nb3ZpZUNhcmRQb3N0ZXInXHJcbmltcG9ydCBNb3ZpZUNvbW1lbnRzUGFuZWwgZnJvbSAnLi9Nb3ZpZUNvbW1lbnRzUGFuZWwnXHJcbmltcG9ydCBNb3ZpZVZvdGVQYW5lbCBmcm9tICcuL01vdmllVm90ZVBhbmVsJ1xyXG5pbXBvcnQgTW92aWVQYW5lbFRvZ2dsZXMgZnJvbSAnLi9Nb3ZpZVBhbmVsVG9nZ2xlcydcclxuXHJcbmNsYXNzIE1vdmllQ2FyZCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBzaG93Vm90ZVBhbmVsOiBmYWxzZSxcclxuICAgICAgc2hvd0NvbW1lbnRzUGFuZWw6IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDb21tZW50c1BhbmVsICgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XHJcbiAgICAgIHNob3dDb21tZW50c1BhbmVsOiAhcHJldlN0YXRlLnNob3dDb21tZW50c1BhbmVsLFxyXG4gICAgICBzaG93Vm90ZVBhbmVsOiBmYWxzZVxyXG4gICAgfSkpXHJcbiAgfVxyXG5cclxuICB0b2dnbGVWb3RlUGFuZWwgKCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcclxuICAgICAgc2hvd1ZvdGVQYW5lbDogIXByZXZTdGF0ZS5zaG93Vm90ZVBhbmVsLFxyXG4gICAgICBzaG93Q29tbWVudHNQYW5lbDogZmFsc2VcclxuICAgIH0pKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdhbmltYXRlZCBmYWRlLWluJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVkaWEgbW92aWUnPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdwb3NpdGlvbiBwdWxsLWxlZnQnPnt0aGlzLnByb3BzLmluZGV4ICsgMX08L3NwYW4+XHJcbiAgICAgICAgICA8TW92aWVDYXJkUG9zdGVyIG1vdmllUG9zdGVyVXJsPXt0aGlzLnByb3BzLm1vdmllLm1vdmllUG9zdGVyVXJsfSAvPlxyXG4gICAgICAgICAgPE1vdmllQ2FyZEluZm8gbW92aWU9e3RoaXMucHJvcHMubW92aWV9IC8+XHJcbiAgICAgICAgICA8TW92aWVQYW5lbFRvZ2dsZXNcclxuICAgICAgICAgICAgdG9nZ2xlQ29tbWVudHNQYW5lbD17dGhpcy50b2dnbGVDb21tZW50c1BhbmVsLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIHRvZ2dsZVZvdGVQYW5lbD17dGhpcy50b2dnbGVWb3RlUGFuZWwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgc2hvd0NvbW1lbnRzUGFuZWw9e3RoaXMuc3RhdGUuc2hvd0NvbW1lbnRzUGFuZWx9XHJcbiAgICAgICAgICAgIHNob3dWb3RlUGFuZWw9e3RoaXMuc3RhdGUuc2hvd1ZvdGVQYW5lbH1cclxuICAgICAgICAgICAgbW92aWVJZD17dGhpcy5wcm9wcy5tb3ZpZS5faWR9IC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgeyB0aGlzLnN0YXRlLnNob3dWb3RlUGFuZWwgPyA8TW92aWVWb3RlUGFuZWwgbW92aWVJZD17dGhpcy5wcm9wcy5tb3ZpZS5faWR9IC8+IDogbnVsbCB9XHJcbiAgICAgICAgeyB0aGlzLnN0YXRlLnNob3dDb21tZW50c1BhbmVsID8gPE1vdmllQ29tbWVudHNQYW5lbCBtb3ZpZUlkPXt0aGlzLnByb3BzLm1vdmllLl9pZH0gLz4gOiBudWxsIH1cclxuICAgICAgICA8ZGl2IGlkPSdjbGVhcicgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNb3ZpZUNhcmRcclxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHtMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXInXHJcblxyXG5jbGFzcyBNb3ZpZUNhcmRJbmZvIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICByZW5kZXIgKCkge1xyXG4gICAgbGV0IGdlbnJlcyA9IHRoaXMucHJvcHMubW92aWUuZ2VucmVzLm1hcChnZW5yZSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPHN0cm9uZyBrZXk9e3RoaXMucHJvcHMubW92aWUuX2lkICsgZ2VucmV9PntnZW5yZX08L3N0cm9uZz5cclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVkaWEtYm9keSc+XHJcbiAgICAgICAgPGg0IGNsYXNzTmFtZT0nbWVkaWEtaGVhZGluZyc+XHJcbiAgICAgICAgICA8TGluayB0bz17YC9tb3ZpZS8ke3RoaXMucHJvcHMubW92aWUuX2lkfS8ke3RoaXMucHJvcHMubW92aWUubmFtZX1gfT5cclxuICAgICAgICAgICAge3RoaXMucHJvcHMubW92aWUubmFtZX1cclxuICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICA8L2g0PlxyXG4gICAgICAgIDxzbWFsbD5HZW5yZXM6IHtnZW5yZXN9PC9zbWFsbD5cclxuICAgICAgICA8YnIgLz5cclxuICAgICAgICA8cD57dGhpcy5wcm9wcy5tb3ZpZS5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd2b3Rlcyc+Vm90ZXM6XHJcbiAgICAgICAgeyAvKiA8c3Ryb25nPnt0aGlzLnN0YXRlLm1vdmllVm90ZXN9PC9zdHJvbmc+ICovIH1cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgey8qIHtub2Rlcy5yYXRpbmd9ICovfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1vdmllQ2FyZEluZm9cclxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCdcclxuXHJcbmNsYXNzIE1vdmllQ2FyZFBvc3RlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGxldCBwb3N0ZXJcclxuICAgIGlmICh0aGlzLnByb3BzLm1vdmllUG9zdGVyVXJsKSB7XHJcbiAgICAgIHBvc3RlciA9IChcclxuICAgICAgICA8aW1nIGNsYXNzTmFtZT0nbWVkaWEtb2JqZWN0JyBzcmM9e3RoaXMucHJvcHMubW92aWVQb3N0ZXJVcmx9IC8+XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncHVsbC1sZWZ0IHRodW1iLWxnJz5cclxuICAgICAgICB7cG9zdGVyfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1vdmllQ2FyZFBvc3RlclxyXG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0J1xyXG5cclxuY2xhc3MgTW92aWVDb21tZW50c1BhbmVsIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICByZW5kZXIgKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3QtZ3JvdXAnPlxyXG4gICAgICAgIDxoMyBjbGFzc05hbWU9J2NvbC1zbS0zJz5Db21tZW50czo8L2gzPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1vdmllQ29tbWVudHNQYW5lbFxyXG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXInXHJcblxyXG5jbGFzcyBNb3ZpZVBhbmVsVG9nZ2xlcyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwdWxsLXJpZ2h0IGJ0bi1ncm91cCc+XHJcbiAgICAgICAgPGEgY2xhc3NOYW1lPSdidG4gYnRuLXByaW1hcnknXHJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLnRvZ2dsZUNvbW1lbnRzUGFuZWx9PlxyXG4gICAgICAgICAge3RoaXMucHJvcHMuc2hvd0NvbW1lbnRzUGFuZWwgPyAnSGlkZScgOiAnQ29tbWVudHMnfVxyXG4gICAgICAgIDwvYT5cclxuICAgICAgICA8YSBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMudG9nZ2xlVm90ZVBhbmVsfT5cclxuICAgICAgICAgIHt0aGlzLnByb3BzLnNob3dWb3RlUGFuZWwgPyAnSGlkZScgOiAnVm90ZSd9XHJcbiAgICAgICAgPC9hPlxyXG4gICAgICAgIDxMaW5rIHRvPXtgL21vdmllLyR7dGhpcy5wcm9wcy5tb3ZpZUlkfS9yZXZpZXcvYWRkYH0gY2xhc3NOYW1lPSdidG4gYnRuLXdhcm5pbmcnPlxyXG4gICAgICAgICAgV3JpdGUgcmV2aWV3XHJcbiAgICAgICAgPC9MaW5rPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1vdmllUGFuZWxUb2dnbGVzXHJcbiIsImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnXHJcblxyXG5jbGFzcyBNb3ZpZVZvdGVQYW5lbCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNCBjb2wteHMtb2Zmc2V0LTggbGlzdC1ncm91cC1pdGVtIGFuaW1hdGVkIGZhZGVJbiB2b3RlJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVkaWEnPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lZGlhLWJvZHknPlxyXG4gICAgICAgICAgICBIZWxsbyBmcm9tIE1vdmllVm90ZVBhbmVsXHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNb3ZpZVZvdGVQYW5lbFxyXG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXInXHJcblxyXG5pbXBvcnQgVXNlckFjdGlvbnMgZnJvbSAnLi4vLi4vYWN0aW9ucy9Vc2VyQWN0aW9ucydcclxuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICcuLi8uLi9zdG9yZXMvVXNlclN0b3JlJ1xyXG5cclxuY2xhc3MgTmF2YmFyVXNlck1lbnUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcbiAgICB0aGlzLnN0YXRlID0gVXNlclN0b3JlLmdldFN0YXRlKClcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBVc2VyU3RvcmUubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XHJcbiAgICBVc2VyU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBsZXQgdXNlck1lbnVcclxuXHJcbiAgICBpZiAoIXRoaXMuc3RhdGUubG9nZ2VkSW5Vc2VySWQpIHtcclxuICAgICAgdXNlck1lbnUgPSAoXHJcbiAgICAgICAgPHVsIGNsYXNzTmFtZT0nbmF2IG5hdmJhci1uYXYgcHVsbC1yaWdodCc+XHJcbiAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgIDxMaW5rIHRvPScvdXNlci9sb2dpbic+TG9naW48L0xpbms+XHJcbiAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICA8TGluayB0bz0nL3VzZXIvcmVnaXN0ZXInPlJlZ2lzdGVyPC9MaW5rPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L3VsPlxyXG4gICAgICApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1c2VyTWVudSA9IChcclxuICAgICAgICA8dWwgY2xhc3NOYW1lPSduYXYgbmF2YmFyLW5hdiBwdWxsLXJpZ2h0Jz5cclxuICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgPExpbmsgdG89e2AvdXNlci9wcm9maWxlLyR7dGhpcy5zdGF0ZS5sb2dnZWRJblVzZXJJZH1gfT5Qcm9maWxlPC9MaW5rPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgPGEgaHJlZj0nIycgb25DbGljaz17VXNlckFjdGlvbnMubG9nb3V0VXNlcn0+TG9nb3V0PC9hPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L3VsPlxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdj57dXNlck1lbnV9PC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOYXZiYXJVc2VyTWVudVxyXG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0J1xyXG5cclxuY2xhc3MgVXNlckluZm8gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBsZXQgcm9sZXNcclxuICAgIGlmICh0aGlzLnByb3BzLnJvbGVzKSB7XHJcbiAgICAgIHJvbGVzID0gdGhpcy5wcm9wcy5yb2xlcy5tYXAoKHJvbGUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIDxoNCBrZXk9e2luZGV4fSBjbGFzc05hbWU9J2xlYWQnPlxyXG4gICAgICAgICAgICA8c3Ryb25nPntyb2xlfTwvc3Ryb25nPlxyXG4gICAgICAgICAgPC9oND5cclxuICAgICAgICApXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbnRhaW5lciBwcm9maWxlLWNvbnRhaW5lcic+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Byb2ZpbGUtaW1nJz5cclxuICAgICAgICAgIDxpbWcgc3JjPScvaW1hZ2VzL3VzZXItZGVmYXVsdC5wbmcnIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Byb2ZpbGUtaW5mbyBjbGVhcmZpeCc+XHJcbiAgICAgICAgICA8aDI+PHN0cm9uZz57IHRoaXMucHJvcHMudXNlcm5hbWUgfTwvc3Ryb25nPjwvaDI+XHJcbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPSdsZWFkJz5Sb2xlczo8L2g0PlxyXG4gICAgICAgICAgeyByb2xlcyB9XHJcbiAgICAgICAgICA8cD57IHRoaXMucHJvcHMuaW5mb3JtYXRpb24gfTwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mb1xyXG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgVXNlclJhdGVkTW92aWVzUGFuZWwgZnJvbSAnLi4vc3ViLWNvbXBvbmVudHMvVXNlclJhdGVkTW92aWVzUGFuZWwnXHJcblxyXG5jbGFzcyBVc2VyUmF0ZWRNb3ZpZXMgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBzaG93UmF0ZWRNb3ZpZXNQYW5lbDogZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZVJhdGVkTW92aWVzICgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XHJcbiAgICAgIHNob3dSYXRlZE1vdmllc1BhbmVsOiAhcHJldlN0YXRlLnNob3dSYXRlZE1vdmllc1BhbmVsXHJcbiAgICB9KSlcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyIHByb2ZpbGUtY29udGFpbmVyJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJvZmlsZS1zdGF0cyBjbGVhcmZpeCc+XHJcbiAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3N0YXRzLW51bWJlcic+e3RoaXMucHJvcHMudm90ZXMgPyB0aGlzLnByb3BzLnZvdGVzLmxlbmd0aCA6IDAgfTwvc3Bhbj5Wb3Rlc1xyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHVsbC1yaWdodCBidG4tZ3JvdXAnPlxyXG4gICAgICAgICAgPGEgY2xhc3NOYW1lPSdidG4gYnRuLXByaW1hcnknIG9uQ2xpY2s9e3RoaXMudG9nZ2xlUmF0ZWRNb3ZpZXMuYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5zaG93UmF0ZWRNb3ZpZXNQYW5lbCA/ICdIaWRlJyA6ICdSYXRlZCBNb3ZpZXMnIH1cclxuICAgICAgICAgIDwvYT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICB7IHRoaXMuc3RhdGUuc2hvd1JhdGVkTW92aWVzUGFuZWwgPyA8VXNlclJhdGVkTW92aWVzUGFuZWwgbW92aWVzPXt0aGlzLnByb3BzLnZvdGVzfSAvPiA6IG51bGwgfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJSYXRlZE1vdmllc1xyXG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0J1xyXG5cclxuY2xhc3MgVXNlclJhdGVkTW92aWVzUGFuZWwgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdC1ncm91cCc+XHJcbiAgICAgICAgICBIZWxsbyBmcm9tIFVzZXJSYXRlZE1vdmllc1BhbmVsXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlclJhdGVkTW92aWVzUGFuZWxcclxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFVzZXJSZXZpZXdzUGFuZWwgZnJvbSAnLi4vc3ViLWNvbXBvbmVudHMvVXNlclJldmlld3NQYW5lbCdcclxuXHJcbmNsYXNzIFVzZXJSZXZpZXdzIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgc2hvd1Jldmlld3NQYW5lbDogZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZVJldmlld3MgKCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcclxuICAgICAgc2hvd1Jldmlld3NQYW5lbDogIXByZXZTdGF0ZS5zaG93UmV2aWV3c1BhbmVsXHJcbiAgICB9KSlcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyIHByb2ZpbGUtY29udGFpbmVyJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJvZmlsZS1zdGF0cyBjbGVhcmZpeCc+XHJcbiAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgIDxsaT48c3BhbiBjbGFzc05hbWU9J3N0YXRzLW51bWJlcic+e3RoaXMucHJvcHMucmV2aWV3cyA/IHRoaXMucHJvcHMucmV2aWV3cy5sZW5ndGggOiAwfTwvc3Bhbj5SZXZpZXdzPC9saT5cclxuICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B1bGwtcmlnaHQgYnRuLWdyb3VwJz5cclxuICAgICAgICAgIDxhIGNsYXNzTmFtZT0nYnRuIGJ0bi1wcmltYXJ5J1xyXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZVJldmlld3MuYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5zaG93UmV2aWV3c1BhbmVsID8gJ0hpZGUnIDogJ1Jldmlld3MnIH1cclxuICAgICAgICAgIDwvYT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICB7IHRoaXMuc3RhdGUuc2hvd1Jldmlld3NQYW5lbCA/IDxVc2VyUmV2aWV3c1BhbmVsIC8+IDogbnVsbCB9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlclJldmlld3NcclxuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCdcclxuXHJcbmNsYXNzIFVzZXJSZXZpZXdzUGFuZWwgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdC1ncm91cCc+XHJcbiAgICAgICAgICBIZWxsbyBmcm9tIFVzZXJSZXZpZXdzUGFuZWxcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VyUmV2aWV3c1BhbmVsXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFJvdXRlciBmcm9tICdyZWFjdC1yb3V0ZXInXHJcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nXHJcbmltcG9ydCBjcmVhdGVCcm93c2VySGlzdG9yeSBmcm9tICdoaXN0b3J5L2xpYi9jcmVhdGVCcm93c2VySGlzdG9yeSdcclxuXHJcbmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMnXHJcblxyXG5sZXQgaGlzdG9yeSA9IGNyZWF0ZUJyb3dzZXJIaXN0b3J5KClcclxuXHJcblJlYWN0RE9NLnJlbmRlcihcclxuICA8Um91dGVyIGhpc3Rvcnk9e2hpc3Rvcnl9Pnsgcm91dGVzIH08L1JvdXRlcj4sXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpXHJcbilcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBSb3V0ZSB9IGZyb20gJ3JlYWN0LXJvdXRlcidcclxuXHJcbmltcG9ydCBBcHAgZnJvbSAnLi9jb21wb25lbnRzL0FwcCdcclxuaW1wb3J0IEhvbWUgZnJvbSAnLi9jb21wb25lbnRzL0hvbWUnXHJcbmltcG9ydCBNb3ZpZUFkZCBmcm9tICcuL2NvbXBvbmVudHMvTW92aWVBZGQnXHJcbmltcG9ydCBVc2VyUHJvZmlsZSBmcm9tICcuL2NvbXBvbmVudHMvVXNlclByb2ZpbGUnXHJcbmltcG9ydCBVc2VyUmVnaXN0ZXIgZnJvbSAnLi9jb21wb25lbnRzL1VzZXJSZWdpc3RlcidcclxuaW1wb3J0IFVzZXJMb2dpbiBmcm9tICcuL2NvbXBvbmVudHMvVXNlckxvZ2luJ1xyXG5pbXBvcnQgYXV0aG9yaXplIGZyb20gJy4vdXRpbGl0aWVzL0F1dGhvcml6ZSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IChcclxuICA8Um91dGUgY29tcG9uZW50PXtBcHB9PlxyXG4gICAgPFJvdXRlIHBhdGg9Jy8nIGNvbXBvbmVudD17SG9tZX0gLz5cclxuICAgIDxSb3V0ZSBwYXRoPScvbW92aWUvYWRkJyBjb21wb25lbnQ9e2F1dGhvcml6ZShNb3ZpZUFkZCl9IC8+XHJcbiAgICA8Um91dGUgcGF0aD0nL3VzZXIvcHJvZmlsZS86dXNlcklkJyBjb21wb25lbnQ9e2F1dGhvcml6ZShVc2VyUHJvZmlsZSl9IC8+XHJcbiAgICA8Um91dGUgcGF0aD0nL3VzZXIvcmVnaXN0ZXInIGNvbXBvbmVudD17VXNlclJlZ2lzdGVyfSAvPlxyXG4gICAgPFJvdXRlIHBhdGg9Jy91c2VyL2xvZ2luJyBjb21wb25lbnQ9e1VzZXJMb2dpbn0gLz5cclxuICA8L1JvdXRlPlxyXG4pXHJcbiIsImltcG9ydCBhbHQgZnJvbSAnLi4vYWx0J1xyXG5pbXBvcnQgRm9ybUFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Gb3JtQWN0aW9ucydcclxuaW1wb3J0IFVzZXJBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvVXNlckFjdGlvbnMnXHJcblxyXG5jbGFzcyBGb3JtU3RvcmUge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMuYmluZEFjdGlvbnMoRm9ybUFjdGlvbnMpXHJcbiAgICB0aGlzLmJpbmRMaXN0ZW5lcnMoe1xyXG4gICAgICBvblJlZ2lzdGVyVXNlckZhaWw6IFVzZXJBY3Rpb25zLnJlZ2lzdGVyVXNlckZhaWwsXHJcbiAgICAgIG9uUmVnaXN0ZXJVc2VyU3VjY2VzczogVXNlckFjdGlvbnMucmVnaXN0ZXJVc2VyU3VjY2VzcyxcclxuICAgICAgb25Mb2dpblVzZXJTdWNjZXNzOiBVc2VyQWN0aW9ucy5sb2dpblVzZXJTdWNjZXNzLFxyXG4gICAgICBvbkxvZ2luVXNlckZhaWw6IFVzZXJBY3Rpb25zLmxvZ2luVXNlckZhaWxcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy51c2VyID0ge1xyXG4gICAgICB1c2VybmFtZTogJycsXHJcbiAgICAgIHBhc3N3b3JkOiAnJyxcclxuICAgICAgY29uZmlybWVkUGFzc3dvcmQ6ICcnLFxyXG4gICAgICBmaXJzdE5hbWU6ICcnLFxyXG4gICAgICBsYXN0TmFtZTogJycsXHJcbiAgICAgIGFnZTogJycsXHJcbiAgICAgIGdlbmRlcjogJydcclxuICAgIH1cclxuICAgIHRoaXMudXNlcm5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5wYXNzd29yZFZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmZpcnN0TmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmxhc3ROYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuYWdlVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuZ2VuZGVyVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuZm9ybVN1Ym1pdFN0YXRlID0gJydcclxuICAgIHRoaXMubWVzc2FnZSA9ICcnXHJcbiAgfVxyXG5cclxuICBvblJlZ2lzdGVyVXNlclN1Y2Nlc3MgKCkge1xyXG4gICAgdGhpcy5mb3JtU3VibWl0U3RhdGUgPSAnaGFzLXN1Y2Nlc3MnXHJcbiAgICB0aGlzLm1lc3NhZ2UgPSAnVXNlciByZWdpc3RlciBzdWNjZXNzZnVsJ1xyXG4gICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuZmlyc3ROYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMubGFzdE5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5hZ2VWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5nZW5kZXJWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy51c2VyID0ge1xyXG4gICAgICB1c2VybmFtZTogJycsXHJcbiAgICAgIHBhc3N3b3JkOiAnJyxcclxuICAgICAgY29uZmlybWVkUGFzc3dvcmQ6ICcnLFxyXG4gICAgICBmaXJzdE5hbWU6ICcnLFxyXG4gICAgICBsYXN0TmFtZTogJycsXHJcbiAgICAgIGFnZTogJycsXHJcbiAgICAgIGdlbmRlcjogJydcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uUmVnaXN0ZXJVc2VyRmFpbCAoZXJyKSB7XHJcbiAgICBpZiAoZXJyLmNvZGUgPT09IDExMDAwKSB7XHJcbiAgICAgIHRoaXMudXNlcm5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gICAgICB0aGlzLm1lc3NhZ2UgPSAnVXNlcm5hbWUgYWxyZWFkeSBpbiB1c2UnXHJcbiAgICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgICB0aGlzLmZpcnN0TmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICAgIHRoaXMubGFzdE5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgICB0aGlzLmFnZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICAgIHRoaXMuZ2VuZGVyVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5mb3JtU3VibWl0U3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gICAgdGhpcy5tZXNzYWdlID0gZXJyLmVycm1zZ1xyXG4gIH1cclxuXHJcbiAgb25Mb2dpblVzZXJTdWNjZXNzICgpIHtcclxuICAgIHRoaXMuZm9ybVN1Ym1pdFN0YXRlID0gJ2hhcy1zdWNjZXNzJ1xyXG4gICAgdGhpcy5tZXNzYWdlID0gJ1VzZXIgbG9naW4gc3VjY2Vzc2Z1bCdcclxuICAgIHRoaXMudXNlcm5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5wYXNzd29yZFZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLnVzZXIgPSB7XHJcbiAgICAgIHVzZXJuYW1lOiAnJyxcclxuICAgICAgcGFzc3dvcmQ6ICcnLFxyXG4gICAgICBjb25maXJtZWRQYXNzd29yZDogJycsXHJcbiAgICAgIGZpcnN0TmFtZTogJycsXHJcbiAgICAgIGxhc3ROYW1lOiAnJyxcclxuICAgICAgYWdlOiAnJyxcclxuICAgICAgZ2VuZGVyOiAnJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Mb2dpblVzZXJGYWlsIChlcnIpIHtcclxuICAgIHRoaXMuZm9ybVN1Ym1pdFN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMubWVzc2FnZSA9IGVyci5tZXNzYWdlXHJcbiAgICB0aGlzLnVzZXJuYW1lVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gIH1cclxuXHJcbiAgb25Vc2VybmFtZVZhbGlkYXRpb25GYWlsICgpIHtcclxuICAgIHRoaXMudXNlcm5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gICAgdGhpcy5wYXNzd29yZFZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmZpcnN0TmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmxhc3ROYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuYWdlVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuZ2VuZGVyVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuZm9ybVN1Ym1pdFN0YXRlID0gJydcclxuICAgIHRoaXMubWVzc2FnZSA9ICdFbnRlciB1c2VybmFtZSdcclxuICB9XHJcblxyXG4gIG9uUGFzc3dvcmRWYWxpZGF0aW9uRmFpbCAobWVzc2FnZSkge1xyXG4gICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMuZmlyc3ROYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMubGFzdE5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5hZ2VWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5nZW5kZXJWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5mb3JtU3VibWl0U3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZVxyXG4gIH1cclxuXHJcbiAgb25GaXJzdE5hbWVWYWxpZGF0aW9uRmFpbCAoKSB7XHJcbiAgICB0aGlzLnVzZXJuYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5nZW5kZXJWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5maXJzdE5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gICAgdGhpcy5sYXN0TmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmFnZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmZvcm1TdWJtaXRTdGF0ZSA9ICcnXHJcbiAgICB0aGlzLm1lc3NhZ2UgPSAnRmlyc3QgTmFtZSBzaG91bGQgc3RhcnQgd2l0aCBjYXBpdGFsIGxldHRlciBhbmQgc2hvdWxkIGJlIGF0IGxlYXN0IDIgbGV0dGVycydcclxuICB9XHJcblxyXG4gIG9uTGFzdE5hbWVWYWxpZGF0aW9uRmFpbCAoKSB7XHJcbiAgICB0aGlzLnVzZXJuYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5nZW5kZXJWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5maXJzdE5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5sYXN0TmFtZVZhbGlkYXRpb25TdGF0ZSA9ICdoYXMtZXJyb3InXHJcbiAgICB0aGlzLmFnZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmZvcm1TdWJtaXRTdGF0ZSA9ICcnXHJcbiAgICB0aGlzLm1lc3NhZ2UgPSAnTGFzdCBOYW1lIHNob3VsZCBzdGFydCB3aXRoIGNhcGl0YWwgbGV0dGVyIGFuZCBzaG91bGQgYmUgYXQgbGVhc3QgMiBsZXR0ZXJzJ1xyXG4gIH1cclxuXHJcbiAgb25BZ2VWYWxpZGF0aW9uRmFpbCAoKSB7XHJcbiAgICB0aGlzLnVzZXJuYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5nZW5kZXJWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5maXJzdE5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5sYXN0TmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmFnZVZhbGlkYXRpb25TdGF0ZSA9ICdoYXMtZXJyb3InXHJcbiAgICB0aGlzLmZvcm1TdWJtaXRTdGF0ZSA9ICcnXHJcbiAgICB0aGlzLm1lc3NhZ2UgPSAnQWdlIHNob3VsZCBiZSBiZXR3ZWVuIDAgYW5kIDEyMCdcclxuICB9XHJcblxyXG4gIG9uR2VuZGVyVmFsaWRhdGlvbkZhaWwgKCkge1xyXG4gICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuZmlyc3ROYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMubGFzdE5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5hZ2VWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5nZW5kZXJWYWxpZGF0aW9uU3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gICAgdGhpcy5mb3JtU3VibWl0U3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5tZXNzYWdlID0gJ0dlbmRlciBzaG91bGQgYmUgTWFsZSBvciBGZW1hbGUuIFNlbGVjdCBvbmUnXHJcbiAgfVxyXG5cclxuICBvbkhhbmRsZUlucHV0Q2hhbmdlIChldmVudCkge1xyXG4gICAgdGhpcy51c2VyW2V2ZW50LnRhcmdldC5uYW1lXSA9IGV2ZW50LnRhcmdldC52YWx1ZVxyXG4gIH1cclxuXHJcbiAgb25VbmF1dGhvcml6ZWRBY2Nlc3NBdHRlbXB0ICgpIHtcclxuICAgIHRoaXMuZm9ybVN1Ym1pdFN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMubWVzc2FnZSA9ICdQbGVhc2UgbG9naW4nXHJcbiAgICB0aGlzLnVzZXJuYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWx0LmNyZWF0ZVN0b3JlKEZvcm1TdG9yZSlcclxuIiwiaW1wb3J0IGFsdCBmcm9tICcuLi9hbHQnXHJcbmltcG9ydCBNb3ZpZUFkZEFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Nb3ZpZUFkZEFjdGlvbnMnXHJcbmltcG9ydCBIZWxwZXJzIGZyb20gJy4uL3V0aWxpdGllcy9IZWxwZXJzJ1xyXG5cclxuY2xhc3MgTW92aWVBZGRTdG9yZSB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5iaW5kQWN0aW9ucyhNb3ZpZUFkZEFjdGlvbnMpXHJcblxyXG4gICAgdGhpcy5uYW1lID0gJydcclxuICAgIHRoaXMuZGVzY3JpcHRpb24gPSAnJ1xyXG4gICAgdGhpcy5nZW5yZXMgPSBbXVxyXG4gICAgdGhpcy5nZW5yZXNWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5uYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMubW92aWVQb3N0ZXJVcmwgPSAnJ1xyXG4gICAgdGhpcy5oZWxwQmxvY2sgPSAnJ1xyXG4gIH1cclxuXHJcbiAgb25BZGRNb3ZpZVN1Y2Nlc3MgKCkge1xyXG4gICAgY29uc29sZS5sb2coJ0FkZGVkIG1vdmllIScpXHJcbiAgICB0aGlzLm5hbWUgPSAnJ1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9ICcnXHJcbiAgICB0aGlzLmdlbnJlcyA9IFtdXHJcbiAgICB0aGlzLmdlbnJlc1ZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLm5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5tb3ZpZVBvc3RlclVybCA9ICcnXHJcbiAgICB0aGlzLmhlbHBCbG9jayA9ICcnXHJcbiAgfVxyXG5cclxuICBvbkFkZE1vdmllRmFpbCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGFkZCBtb3ZpZScsIGVycilcclxuICB9XHJcblxyXG4gIG9uSGFuZGxlTmFtZUNoYW5nZSAoZSkge1xyXG4gICAgdGhpcy5uYW1lID0gZS50YXJnZXQudmFsdWVcclxuICAgIHRoaXMubmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmhlbHBCbG9jayA9ICcnXHJcbiAgfVxyXG5cclxuICBvbkhhbmRsZURlc2NyaXB0aW9uQ2hhbmdlIChlKSB7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZS50YXJnZXQudmFsdWVcclxuICAgIHRoaXMuZ2VucmVzVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuaGVscEJsb2NrID0gJydcclxuICB9XHJcblxyXG4gIG9uSGFuZGxlR2VucmVzQ2hhbmdlIChlKSB7XHJcbiAgICBsZXQgZ2VucmVWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlXHJcbiAgICBpZiAodGhpcy5nZW5yZXMuaW5kZXhPZihnZW5yZVZhbHVlKSA9PT0gLTEpIHtcclxuICAgICAgdGhpcy5nZW5yZXMgPSBIZWxwZXJzLmFwcGVuZFRvQXJyYXkoZ2VucmVWYWx1ZSwgdGhpcy5nZW5yZXMpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmdlbnJlcyA9IEhlbHBlcnMucmVtb3ZlRnJvbUFycmF5KGdlbnJlVmFsdWUsIHRoaXMuZ2VucmVzKVxyXG4gICAgfVxyXG4gICAgdGhpcy5nZW5yZXNWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5oZWxwQmxvY2sgPSAnJ1xyXG4gIH1cclxuXHJcbiAgb25OYW1lVmFsaWRhdGlvbkZhaWwgKCkge1xyXG4gICAgdGhpcy5uYW1lVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMuaGVscEJsb2NrID0gJ0VudGVyIG1vdmllIG5hbWUnXHJcbiAgfVxyXG5cclxuICBvbkdlbnJlc1ZhbGlkYXRpb25GYWlsICgpIHtcclxuICAgIHRoaXMuZ2VucmVzVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMuaGVscEJsb2NrID0gJ1NlbGVjdCBhdCBsZWFzdCBvbmUgbW92aWUgZ2VucmUnXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhbHQuY3JlYXRlU3RvcmUoTW92aWVBZGRTdG9yZSlcclxuIiwiaW1wb3J0IGFsdCBmcm9tICcuLi9hbHQnXHJcbmltcG9ydCBNb3ZpZUFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Nb3ZpZUFjdGlvbnMnXHJcblxyXG5jbGFzcyBNb3ZpZVN0b3JlIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLmJpbmRBY3Rpb25zKE1vdmllQWN0aW9ucylcclxuICAgIHRoaXMudG9wVGVuTW92aWVzID0gW11cclxuICAgIHRoaXMubW9zdFJlY2VudE1vdmllcyA9IFtdXHJcbiAgfVxyXG5cclxuICBvbkFkZE1vdmllVG9Ub3BUZW4gKG1vdmllKSB7XHJcbiAgICB0aGlzLnRvcFRlbk1vdmllcy5wdXNoKG1vdmllKVxyXG4gIH1cclxuXHJcbiAgb25FbXB0eVRvcFRlbk1vdmllcyAoKSB7XHJcbiAgICB0aGlzLnRvcFRlbk1vdmllcyA9IFtdXHJcbiAgfVxyXG5cclxuICBvbkdldFRvcFRlbk1vdmllc1N1Y2Nlc3MgKG1vdmllcykge1xyXG4gICAgdGhpcy50b3BUZW5Nb3ZpZXMgPSBtb3ZpZXNcclxuICB9XHJcblxyXG4gIG9uR2V0VG9wVGVuTW92aWVzRmFpbCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ291bGQgbm90IGNvbm5lY3QgdG8gREInLCBlcnIpXHJcbiAgfVxyXG5cclxuICBvbkdldEZpdmVSZWNlbnRNb3ZpZXNTdWNjZXNzIChtb3ZpZXMpIHtcclxuICAgIHRoaXMubW9zdFJlY2VudE1vdmllcyA9IG1vdmllc1xyXG4gIH1cclxuXHJcbiAgb25HZXRGaXZlUmVjZW50TW92aWVzRmFpbCAoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ291bGQgbm90IGNvbm5lY3QgdG8gREInKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWx0LmNyZWF0ZVN0b3JlKE1vdmllU3RvcmUpXHJcbiIsImltcG9ydCBhbHQgZnJvbSAnLi4vYWx0J1xyXG5pbXBvcnQgTmF2YmFyQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL05hdmJhckFjdGlvbnMnXHJcblxyXG5jbGFzcyBOYXZiYXJTdG9yZSB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5iaW5kQWN0aW9ucyhOYXZiYXJBY3Rpb25zKVxyXG5cclxuICAgIHRoaXMuYWpheEFuaW1hdGlvbkNsYXNzID0gJydcclxuICB9XHJcblxyXG4gIG9uVXBkYXRlQWpheEFuaW1hdGlvbiAoYW5pbWF0aW9uQ2xhc3MpIHtcclxuICAgIHRoaXMuYWpheEFuaW1hdGlvbkNsYXNzID0gYW5pbWF0aW9uQ2xhc3NcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVTdG9yZShOYXZiYXJTdG9yZSlcclxuIiwiaW1wb3J0IGFsdCBmcm9tICcuLi9hbHQnXHJcbmltcG9ydCBVc2VyQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL1VzZXJBY3Rpb25zJ1xyXG5cclxuY2xhc3MgVXNlclN0b3JlIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLmJpbmRBY3Rpb25zKFVzZXJBY3Rpb25zKVxyXG5cclxuICAgIHRoaXMubG9nZ2VkSW5Vc2VySWQgPSAnJ1xyXG4gICAgdGhpcy51c2VybmFtZSA9ICcnXHJcbiAgICB0aGlzLnJvbGVzID0gW11cclxuICB9XHJcblxyXG4gIG9uTG9naW5Vc2VyU3VjY2VzcyAodXNlcikge1xyXG4gICAgdGhpcy5sb2dnZWRJblVzZXJJZCA9IHVzZXIuX2lkXHJcbiAgICB0aGlzLnVzZXJuYW1lID0gdXNlci51c2VybmFtZVxyXG4gICAgdGhpcy5yb2xlcyA9IHVzZXIucm9sZXNcclxuICB9XHJcblxyXG4gIG9uTG9naW5Vc2VyRmFpbCAoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnRmFpbGVkIGxvZ2luIGF0dGVtcHQnKVxyXG4gIH1cclxuXHJcbiAgb25Mb2dvdXRVc2VyU3VjY2VzcyAoKSB7XHJcbiAgICB0aGlzLmxvZ2dlZEluVXNlcklkID0gJydcclxuICAgIHRoaXMudXNlcm5hbWUgPSAnJ1xyXG4gICAgdGhpcy5yb2xlcyA9IFtdXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhbHQuY3JlYXRlU3RvcmUoVXNlclN0b3JlKVxyXG4iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJy4uL3N0b3Jlcy9Vc2VyU3RvcmUnXHJcbmltcG9ydCBGb3JtQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0Zvcm1BY3Rpb25zJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXV0aG9yaXplIChDaGlsZENvbXBvbmVudCkge1xyXG4gIHJldHVybiBjbGFzcyBBdXRob3JpemF0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICAgIHRoaXMuc3RhdGUgPSBVc2VyU3RvcmUuZ2V0U3RhdGUoKVxyXG4gICAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2UgKHN0YXRlKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50ICgpIHtcclxuICAgICAgaWYgKHRoaXMuc3RhdGUubG9nZ2VkSW5Vc2VySWQgPT09ICcnKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnL3VzZXIvbG9naW4nKVxyXG4gICAgICAgIEZvcm1BY3Rpb25zLnVuYXV0aG9yaXplZEFjY2Vzc0F0dGVtcHQoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgICBVc2VyU3RvcmUubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgICBVc2VyU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIgKCkge1xyXG4gICAgICByZXR1cm4gPENoaWxkQ29tcG9uZW50IHsuLi50aGlzLnByb3BzfSAvPlxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBIZWxwZXJzIHtcclxuICBzdGF0aWMgYXBwZW5kVG9BcnJheSAodmFsdWUsIGFycmF5KSB7XHJcbiAgICBhcnJheS5wdXNoKHZhbHVlKVxyXG4gICAgcmV0dXJuIGFycmF5XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcHJlcGVuZFRvQXJyYXkgKHZhbHVlLCBhcnJheSkge1xyXG4gICAgYXJyYXkudW5zaGlmdCh2YWx1ZSlcclxuICAgIHJldHVybiBhcnJheVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbW92ZUZyb21BcnJheSAodmFsdWUsIGFycmF5KSB7XHJcbiAgICBsZXQgaW5kZXggPSBhcnJheS5pbmRleE9mKHZhbHVlKVxyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIZWxwZXJzXHJcbiIsImNvbnN0IEFQSV9LRVkgPSAnNzFhYWJkNzljNzA4MmJjYWNhYmM5Njg3N2FjNzIzOGInXHJcbmNvbnN0IFNFQVJDSF9CQVNFX1VSTCA9ICdodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL3NlYXJjaC9tb3ZpZSdcclxuY29uc3QgUE9TVEVSX0JBU0VfVVJMID0gJ2h0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3c1MDAnXHJcbmNvbnN0IFVOVkVSSUZJRURfTU9WSUVfUE9TVEVSX1VSTCA9ICcvaW1hZ2VzL21vdmllLXVudmVyaWZpZWQucG5nJ1xyXG5jb25zdCBNSVNTSU5HX0RBVEFfUE9TVEVSX1VSTCA9ICcvaW1hZ2VzL21vdmllLW1pc3NpbmctZGF0YS5qcGcnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1ZXN0ZXJUTURCIHtcclxuICBzdGF0aWMgZ2V0TW92aWVQb3N0ZXIgKG1vdmllTmFtZSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnZ2V0JyxcclxuICAgICAgICB1cmw6IGAke1NFQVJDSF9CQVNFX1VSTH0/YXBpX2tleT0ke0FQSV9LRVl9JnF1ZXJ5PSR7bW92aWVOYW1lfWBcclxuICAgICAgfVxyXG4gICAgICAkLmFqYXgocmVxdWVzdClcclxuICAgICAgICAuZG9uZSh0bWRiUmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1RNREIgUmVzcG9uc2UnLCB0bWRiUmVzcG9uc2UpXHJcbiAgICAgICAgICBpZiAodG1kYlJlc3BvbnNlLnRvdGFsX3Jlc3VsdHMgPT09IDApIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh7cG9zdGVyVXJsOiBVTlZFUklGSUVEX01PVklFX1BPU1RFUl9VUkx9KVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBsZXQgcG9zdGVyUGF0aCA9IHRtZGJSZXNwb25zZS5yZXN1bHRzWzBdLnBvc3Rlcl9wYXRoXHJcbiAgICAgICAgICBpZiAocG9zdGVyUGF0aCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHtwb3N0ZXJVcmw6IE1JU1NJTkdfREFUQV9QT1NURVJfVVJMfSlcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgIHBvc3RlclVybDogYCR7UE9TVEVSX0JBU0VfVVJMfS8ke3Bvc3RlclBhdGh9YCxcclxuICAgICAgICAgICAgb3ZlcnZpZXc6IHRtZGJSZXNwb25zZS5yZXN1bHRzWzBdLm92ZXJ2aWV3XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZhaWwoZXJyID0+IHtcclxuICAgICAgICAgIHJlamVjdChlcnIpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiJdfQ=="}